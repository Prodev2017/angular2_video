webpackJsonp([3],{1545:function(t,e,n){"use strict";var r=n(0),a=n(5),i=n(8),o=n(369),c=n(1570),s=n(1561),l=n(1560),u=n(240),d=n(370),p=function(){function t(){}return t=__decorate([r.NgModule({imports:[a.CommonModule,i.FormsModule,o.NgaModule,c.routing,d.DataTableModule,d.SharedModule,d.ListboxModule,d.OverlayPanelModule,d.AccordionModule,d.ButtonModule,d.ToggleButtonModule,d.ContextMenuModule,d.DataListModule,u.ModalModule,u.DropdownModule,u.TabsModule,d.CheckboxModule,d.RadioButtonModule],declarations:[s.Tracks,l.TrackList]}),__metadata("design:paramtypes",[])],t)}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=p},1560:function(t,e,n){"use strict";var r=n(0),a=n(1),i=n(26),o=n(68),c=n(37),s=n(45),l=n(18),u=n(240),d=n(1569),p=n(1571),f=function(){function t(t,e,n,r,a,i,o,c,s,l,u,p){var f=this;this.tracks=t,this._state=e,this.router=n,this.http=r,this.route=a,this.currency=i,this.account=o,this.appState=c,this.editors=s,this.keys=l,this.genres=u,this.tags=p,this.query="",this.trackCurrentlyLoaded={},this.tracksToPurchase=[],this.trackColumns=[{label:"Added",value:"added"},{label:"Editor",value:"editor"},{label:"Artist",value:"artist"},{label:"BPM",value:"bpm"},{label:"Key",value:"key"},{label:"Tags",value:"tags"},{label:"Genres",value:"genres"},{label:"Year",value:"year"},{label:"Time",value:"time"}],this.trackColumnsSelected=["added","editor","artist","bpm","key","tags","genres","year","time"],this.currencyPackages=[],this.packagePurchase=new d.PackagePurchase("Select Package",null),this.showCrateEditor=!1,this.tableHeight="60vh",this.activeStoreTab="Charts",this.currentYear=(new Date).getFullYear(),this.downloadQueue={tracks:[]},this.currentlyAppliedCrate={name:""},this.activeTab="crates",this.charts={allTimeRankings:[],currentMonthRankings:[],lastMonthRankings:[]},this.showFilters=!1,this.showingTopTracks=!1,this.filterListBoxHeight="160px",this.filterListBoxFontSize="10px",this.events=[],this.tracksSelected=[],this.transactions=[],this.currencyEditors=[],this.keyList=[],this.tagList=[],this.genresList=[],this.displayTable=!0,this.trackListFilters={minYear:1950,maxYear:(new Date).getFullYear(),editors:[],artistName:"",startBpm:0,endBpm:250,keys:[],tags:[],genres:[],trackName:"",sortField:"publishDate",sortOrder:1,rows:25,_id:null,name:null},this.trackColumnWidths={added:10,editor:10,artist:15,bpm:5,key:5,title:15,tags:10,genres:10,releaseYear:5,trackLength:5,actions:13},this.dataLoading=!1,this.keys.getKeys(),this.tags.getTags(),this.genres.getGenres(),this.selectedCurrencyCreditBalance=this.currency.selectedCurrency.creditBalance,this.tabChange=this.route.params.subscribe(function(t){var e=["crates","collections","download-queue","library","transactions"];f.trackListRestrictions=null,f.showFilters=!1,e.indexOf(t.view)!==-1?f.activeTab=t.view:f.router.navigate(["/pages/tracks/crates"]),f._state.notifyDataChanged("tracks.route.changed",f.activeTab)}),this.columnOptions=[];for(var h=0;h<this.trackColumns.length;h++)this.columnOptions.push({label:this.trackColumns[h],value:this.trackColumns[h]});this.events.push(this._state.subscribe("tracks.route.changed",function(t){console.log("route change event triggered "),f.filterTrackList()})),this.events.push(this._state.subscribe("keys.loaded",function(t){f.keyList=f.keys.list.map(function(t){return{label:t.name,value:t._id}})})),this.events.push(this._state.subscribe("tags.loaded",function(t){f.tagList=f.tags.list.map(function(t){return{label:t.name,value:t._id}})})),this.events.push(this._state.subscribe("genres.loaded",function(t){f.genresList=f.genres.list.map(function(t){return{label:t.name,value:t.id}})}));var y=1;this.events.push(this._state.subscribe("download.purchase",function(){f.currency.getCurrencies().subscribe(function(t){f.currency.list=t.Currencies,f.selectedCurrency=f.currency.list.find(function(t){return t._id==f.currency.selectedCurrency._id}),console.log(f.selectedCurrency),f.getDownloadQueueForCurrency([])})})),this.events.push(this._state.subscribe("currency.changed",function(t){f.setCurrency(t)})),this.events.push(this._state.subscribe("tracks.getPurchaseableList",function(){f.tracks.getTracks(f.selectedCurrencyId,{},1).subscribe(function(t){f.tracks.isUpdating=!1,f.tracks.currentPage=t.Tracks.currentPage,f.tracks.totalPages=t.Tracks.totalPages,f.tracks.totalRecords=t.Tracks.total,1==y?f.tracks.list=t.Tracks.results:f.tracks.list=f.tracks.list.concat(t.Tracks.results)})})),this.events.push(this._state.subscribe("crateEditor.toggle",function(){f.showCrateEditor=!f.showCrateEditor})),this.events.push(this._state.subscribe("trackList.columnsChanged",function(t){console.log(t),f.trackColumnsSelected=t.selectedColumns})),this.events.push(this._state.subscribe("library.retrieve",function(t){f.tracks.list=[],f.tracksSelected=[],f._state.notifyDataChanged("spinner.show",{}),f.tracks.getLibrary(f.selectedCurrencyId,f.trackListFilters,f.trackListFilters.currentPage).subscribe(function(t){if(f.tracks.list=t.Tracks.results,t.restrictions)switch(t.restrictions){case"no-valid-transactions":f.trackListRestrictions="You have not purchased a package in more than 30 days. To access your library, please purchase a new package."}f._state.notifyDataChanged("spinner.hide",{})})})),this.events.push(this._state.subscribe("player.play",function(){f.isPlayerPlaying=!0})),this.events.push(this._state.subscribe("player.pause",function(){f.isPlayerPlaying=!1})),this.events.push(this._state.subscribe("player.toggle",function(t){f.trackCurrentlyLoaded=t})),this.events.push(this._state.subscribe("currency.balanceUpdate",function(t){f.selectedCurrency.creditBalance=t}))}return t.prototype.ngOnDestroy=function(){this.tabChange.unsubscribe(),console.log("the events that we will unsubscribe from",this.events);for(var t=0;t<this.events.length;t++)this._state.unsubscribe(this.events[t].event,this.events[t].callback);this.events=[]},t.prototype.ngOnInit=function(){var t,e=this,n=window.location.hostname.split("."),r=n.length;t="crooklynclan"==n[r-2]&&"net"==n[r-1]?"production":"sandbox",paypal.Button.render({env:t,payment:function(t,n){var r="/api/v1/members/package/"+e.selectedPackageId+"/createPayment";paypal.request.post(r).then(function(e){t(e.id)}).catch(function(t){n(t)})},onAuthorize:function(t){console.log("onAuthorize",t);var n="/api/v1/members/package/"+e.selectedPackageId+"/executePayment";e._state.notifyDataChanged("spinner.show",{}),paypal.request.post(n,{paymentID:t.paymentID,payerID:t.payerID,agreementID:t.paymentToken}).then(function(t){console.log("paypal data success",t),t.Purchase.success&&(e._state.notifyDataChanged("spinner.hide",{}),e.packagePurchaseModal.hide(),e._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Credits Purchased",detail:"Thank you for purchasing."}),e.currency.getCurrencies().subscribe(function(t){e.currency.list=t.Currencies,e.selectedCurrencyCreditBalance=e.currency.list.filter(function(t){return t._id==e.selectedCurrencyId})[0].creditBalance}))}).catch(function(t){console.log("paypal error",t),e._state.notifyDataChanged("growlNotifications.update",{severity:"error",summary:"Error Completing Payment",detail:t})})}},"#paypal-button")},t.prototype.ngAfterViewInit=function(){this.setCurrency(this.currency.selectedCurrency)},t.prototype.setCurrency=function(t){var e=this,n=t._id;n?(this.selectedCurrencyId=n,this.selectedCurrency=t,this.currency.getCurrencies().subscribe(function(t){e.currency.list=t.Currencies,e.selectedCurrencyCreditBalance=e.currency.list.filter(function(t){return t._id==e.selectedCurrencyId})[0].creditBalance,e.clearCurrentCrate(),e.trackListRestrictions=null})):console.log("cannot find a currency id"),this.editors.getCurrencyEditors(t._id).subscribe(function(t){e.currencyEditors=t.CurrencyEditors.map(function(t){return{label:t.stageName,value:t._id}})}),this.currency.getCollections(t._id).subscribe(function(t){e.collections=t.Collections}),this.currency.getCharts(t._id).subscribe(function(t){e.charts.allTimeRankings=[].concat(t.Charts).sort(function(t,e){return t.allTimeRanking<e.allTimeRanking?-1:t.allTimeRanking>e.allTimeRanking?1:0}),e.charts.currentMonthRankings=[].concat(t.Charts).sort(function(t,e){return t.currentMonthRanking<e.currentMonthRanking?-1:t.currentMonthRanking>e.currentMonthRanking?1:0}),e.charts.lastMonthRankings=[].concat(t.Charts).sort(function(t,e){return t.lastMonthRanking<e.lastMonthRanking?-1:t.lastMonthRanking>e.lastMonthRanking?1:0})}),this.currency.getCrates(t._id).subscribe(function(t){e.crates=t.Crates.map(function(t){return"collection"==t.type&&(t.description=t.editorOwner.stageName+"\r\n\r\n\r\n"+t.description),t})})},t.prototype.outputSettings=function(){},t.prototype.columnSort=function(t){},t.prototype.startSearch=function(){},t.prototype.loadTracksLazy=function(t){},t.prototype.getLibraryForCurrency=function(){this._state.notifyDataChanged("library.retrieve",function(){})},t.prototype.getPurchaseableTrackList=function(){this._state.notifyDataChanged("tracks.getPurchaseableList",function(){})},t.prototype.refreshTable=function(){},t.prototype.adjustTableHeight=function(){if(this.trackTable&&this.storeControls){var t=this.trackTable.el.nativeElement.querySelector(".ui-datatable-scrollable-header"),e=this.trackTable.el.nativeElement.querySelector(".ui-datatable-scrollable-body"),n=this.storeControls.nativeElement,r=n.offsetParent.clientHeight;if(t&&t.clientHeight){var a=t.clientHeight,i=n.clientHeight;if(this.showFilters)var o=r-i-a-300;else var o=r-i-a-50;this.tableScrollHeight=e.style.maxHeight=o+"px",this.tableScrollHeight=e.style.height=o+"px"}}if(this.transactionTable&&this.storeControls){var t=this.transactionTable.el.nativeElement.querySelector(".ui-datatable-scrollable-header"),e=this.transactionTable.el.nativeElement.querySelector(".ui-datatable-scrollable-body"),n=this.storeControls.nativeElement,r=n.offsetParent.clientHeight;if(t&&t.clientHeight){var a=t.clientHeight,i=n.clientHeight;if(this.showFilters)var o=r-i-a-290;else var o=r-i-a-40;this.tableScrollHeight=e.style.maxHeight=o+"px",this.tableScrollHeight=e.style.height=o+"px"}}if(this.sidebar){var r=this.sidebar.nativeElement.offsetParent.offsetParent.offsetParent.clientHeight,c=r-i;c-=40,this.sidebar.nativeElement.style.maxHeight=c+"px",this.sidebar.nativeElement.style.height=c+"px"}},t.prototype.ngDoCheck=function(){this.adjustTableHeight()},t.prototype.selectEditor=function(t){this.trackListFilters.editors=[t],this.selectedEditor=t,this.filterTrackList()},t.prototype.filterTrackList=function(t){var e=this;t=t||{},this.showingTopTracks=!1,t&&t.sortField&&(this.trackListFilters.sortField=t.sortField,this.trackListFilters.sortOrder=t.sortOrder),t&&t.rows&&(this.trackListFilters.rows=t.rows,0!=t.first?this.trackListFilters.currentPage=1+t.first/this.trackListFilters.rows:this.trackListFilters.currentPage=1),this.selectedCurrencyId&&(this._state.notifyDataChanged("spinner.show",{}),this.tracks.list=[],"download-queue"!=this.activeTab&&"library"!=this.activeTab&&this.tracks.getTracks(this.selectedCurrencyId,this.trackListFilters,this.trackListFilters.currentPage).subscribe(function(t){e.tracks.isUpdating=!1,e.tracks.currentPage=t.Tracks.currentPage,e.tracks.totalPages=t.Tracks.totalPages,e.tracks.totalRecords=t.Tracks.total,e.tracks.list=t.Tracks.results,e._state.notifyDataChanged("spinner.hide",{}),e._state.notifyDataChanged("spinner.show",{}),e.account.getDownloadQueueForCurrency(e.selectedCurrencyId,e.trackListFilters).subscribe(function(t){e.downloadQueue=t.DownloadQueue,e.removeAddToDownloadQueueButtonIfTrackAlreadyAdded(),e.dataLoading=!1,e._state.notifyDataChanged("spinner.hide",{})})}),"download-queue"==this.activeTab&&(this.tracks.list=[],this._state.notifyDataChanged("spinner.show",{}),this.account.getDownloadQueueForCurrency(this.selectedCurrencyId,this.trackListFilters).subscribe(function(t){e.tracks.currentPage=1,e.tracks.totalPages=1,e.tracks.totalRecords=t.DownloadQueue.tracks.length,e.tracks.list=t.DownloadQueue.tracks,e.tracksSelected=[],e.removeAddToDownloadQueueButtonIfTrackAlreadyAdded(),e._state.notifyDataChanged("spinner.hide",{})})),"library"==this.activeTab&&this._state.notifyDataChanged("library.retrieve",{}),"transactions"==this.activeTab&&this.account.getTransactionHistory().subscribe(function(t){e.transactions=t.Transactions}))},t.prototype.purchaseAndDownloadSelectedTracks=function(t){for(var e=this,n=0,r=0,a=0;a<this.tracksSelected.length;a++)this.selectedCurrency.purchasedTracks.indexOf(this.tracksSelected[a]._id)===-1?n++:r++;confirm("You are about to commit "+n+" new track(s) to your library at a cost of "+n+" credits. Do you wish to spend these credits? Any previously committed tracks will not be charged twice.")&&p.eachSeries(this.tracksSelected,function(n,r){e.bulkDownloadTrack(n,t,r)},function(t){t&&console.log(t),console.log("completed process"),e.getDownloadQueueForCurrency([])})},t.prototype.downloadTrackRequest=function(t,e,n){var r=this;return this.downloadTrackSetup(t).subscribe(function(t){if(console.log(t),t.err)t.err&&"insufficient-credits"==t.err&&(r.insufficientCredits=!0,r.currency.getPackages().subscribe(function(t){r.currencyPackages=t.Packages,r.packagePurchaseModal.show()}));else if(t.status&&"already-purchased"==t.status?r._state.notifyDataChanged("download.purchase",{}):t.creditsDeducted?(r.selectedCurrencyCreditBalance=t.creditBalance,r._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Track purchased and "+t.creditsDeducted+" credit has been deducted from your balance.",detail:""}),r._state.notifyDataChanged("download.purchase",{})):t.creditBalance==-1&&(r._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Track purchased.",detail:""}),r._state.notifyDataChanged("download.purchase",{})),e){var a=JSON.stringify({downloadId:t.download,trackId:t.track[0]}),i=new c.Headers({"Content-Type":"application/json"}),o=new c.RequestOptions({headers:i,url:"/api/v1/members/download/get"});console.log("prep for download",a,i,o),r.http.post("/api/v1/members/download/get",a,o).map(function(t){return t.json()}).catch(r.handleError).subscribe(function(t){var e=document.createElement("a");e.setAttribute("style","display:none;"),e.href=t.url,document.body.appendChild(e),console.log("before click"),e.click(),console.log("after click"),document.body.removeChild(e),r._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Downloading track.",detail:""}),n&&n()},function(t){console.log("error on download url request",t)})}else n&&n()})},t.prototype.handleError=function(t){var e;if(t instanceof c.Response){var n=t.json()||"",r=n.error||JSON.stringify(n);e=t.status+" - "+(t.statusText||"")+" "+r}else e=t.message?t.message:t.toString();return console.error(e),a.Observable.throw(e)},t.prototype.downloadTrack=function(t,e){this.selectedCurrency.purchasedTracks.indexOf(t._id)===-1&&this.selectedCurrencyCreditBalance!==-1?confirm("Do you wish to purchase this track at the cost of 1 credit?")&&this.downloadTrackRequest(t,e):this.downloadTrackRequest(t,e)},t.prototype.bulkDownloadTrack=function(t,e,n){this.downloadTrackRequest(t,e,n)},t.prototype.addCollectionToMyCrates=function(t){var e=this;this.currency.addCollectionToMyCrates(t).subscribe(function(t){e.currency.getCrates(e.selectedCurrencyId).subscribe(function(t){e.crates=t.Crates.map(function(t){return"collection"==t.type&&(t.description=t.editorOwner.stageName+"\r\n\r\n\r\n"+t.description),t}),e._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Saved Collection to Crates",detail:""})})})},t.prototype.loadCollection=function(t){var e=this;this._state.notifyDataChanged("spinner.show",{}),this.trackListFilters.currentPage=this.trackListFilters.currentPage||1,this.currency.getCollection(this.selectedCurrencyId,t,this.trackListFilters.rows,this.trackListFilters.currentPage).subscribe(function(n){e.showingTopTracks=!0,e.tracks.currentPage=parseInt(n.Collection.currentPage)||1,e.tracks.totalPages=n.Collection.totalPages,e.trackListFilters.currentPage=1,e.showFilters=!1,e.tracks.totalRecords=n.Collection.tracks.length,e.tracks.list=n.Collection.tracks,e.selectedCollectionId=t,e._state.notifyDataChanged("spinner.hide",{})})},t.prototype.downloadTrackSetup=function(t){var e;e=t?[t]:this.tracksToPurchase;var n=JSON.stringify(e),r=new c.Headers({"Content-Type":"application/json"}),a=new c.RequestOptions({headers:r});return this.http.post("/api/v1/members/currency/"+this.selectedCurrencyId+"/purchase",n,a).map(function(t){return t.json()})},t.prototype.packagePurchaseModalShow=function(){var t=this;this.currency.getPackages().subscribe(function(e){t.currencyPackages=e.Packages,t.packagePurchaseModal.show()})},t.prototype.purchaseCreditPackage=function(t,e){var n=JSON.stringify({}),r=new c.Headers({"Content-Type":"application/json"}),a=new c.RequestOptions({headers:r});this.http.post("/api/v1/members/package/"+this.packagePurchase.selectedPackageId+"/purchase",n,a).map(function(t){return t.json()}).subscribe(function(t){console.log(t),t.err})},t.prototype.selectAllTracks=function(){this.tracksSelected.length==this.tracks.list.length?this.tracksSelected=[]:this.tracksSelected=this.tracks.list},t.prototype.togglePlayPause=function(t){var e={name:t.name||"[title not set]",version:t.version||"[version not set]",artistPrimaryName:t.artistPrimaryName||"[artist not set]",artistsFeaturedPrimaryName:t.artistsFeaturedPrimaryName,_id:t._id,url:t.publishedLowBitRateFile.url,waveformUrl:t.waveformImageSnippetFileUrl,fileType:t.fileType};this._state.notifyDataChanged("player.toggle",e)},t.prototype.hideModal=function(){this.packagePurchaseModal.hide()},t.prototype.onDeleteConfirm=function(t){window.confirm("Are you sure you want to delete?")?t.confirm.resolve():t.confirm.reject()},t.prototype.getDownloadQueueForCurrency=function(t){var e=this;this.account.getDownloadQueueForCurrency(this.selectedCurrencyId,this.trackListFilters).subscribe(function(t){e.downloadQueue=t.DownloadQueue,e.removeAddToDownloadQueueButtonIfTrackAlreadyAdded(),"download-queue"==e.activeTab&&(e.tracks.list=t.DownloadQueue.tracks)})},t.prototype.removeAddToDownloadQueueButtonIfTrackAlreadyAdded=function(){if(this.downloadQueue&&this.downloadQueue.tracks){for(var t=[],e=0;e<this.downloadQueue.tracks.length;e++){var n=this.downloadQueue.tracks[e];if(t.push(n._id),n.tracksInSameReleases){var r=n.tracksInSameReleases;t=t.concat(r.map(function(t){return t._id}))}}this.tracks&&this.tracks.list&&this.tracks.list.length>0&&(this.tracks.list=this.tracks.list.map(function(e){return t.indexOf(e._id)!==-1?(e.addedToDownloadQueue=!0,e):(e.addedToDownloadQueue=!1,e)}))}},t.prototype.removeTrackFromDownloadQueue=function(t){var e=this;this._state.notifyDataChanged("spinner.show",{}),this.account.removeTrackFromDownloadQueueForCurrency(t,this.selectedCurrencyId).subscribe(function(n){if("download-queue"==e.activeTab)e.tracks.list=n.DownloadQueue.tracks;else for(var r=0;r<n.DownloadQueue.tracks.length;r++){var a=e.tracks.list.findIndex(function(e){var n=!!(e.releases&&e.releases.length>0)&&e.releases[0];return n?e._id==t._id||e.releases.indexOf(n)!==-1:e._id==t._id});e.tracks.list[a].addedToDownloadQueue=!1}e._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Track Removed frome Download Queue",detail:t.formattedName}),e._state.notifyDataChanged("spinner.hide",{})})},t.prototype.addTrackToDownloadQueue=function(t){var e=this;this._state.notifyDataChanged("spinner.show",{}),this.account.addTrackToDownloadQueueForCurrency(t,this.selectedCurrencyId).subscribe(function(n){var r=!!(t.releases&&t.releases.length>0)&&t.releases[0],a=e.tracks.list.filter(function(e){return r?e._id==t._id||e.releases.indexOf(r)!==-1:e._id==t._id});console.log(a);for(var i=0;i<a.length;i++)a[i].addedToDownloadQueue=!0;e._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Track Added to Download Queue",detail:t.formattedName}),e._state.notifyDataChanged("spinner.hide",{})})},t.prototype.createCrate=function(t){var e=this,n=Object.assign({},this.trackListFilters);this.currentlyAppliedCrate=Object.assign({},this.currentlyAppliedCrate,this.trackListFilters,n),t&&delete this.currentlyAppliedCrate._id,this.currency.createCrate(this.selectedCurrencyId,this.currentlyAppliedCrate).subscribe(function(t){e.trackListFilters._id=t.Crate._id,e.currency.getCrates(e.selectedCurrencyId).subscribe(function(t){e.crates=t.Crates.map(function(t){return"collection"==t.type&&(t.description=t.editorOwner.stageName+"\r\n\r\n\r\n"+t.description),t}),e._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"New crate saved",detail:""})})})},t.prototype.updateCrate=function(){var t=this;this.currency.saveCrate(this.selectedCurrencyId,this.trackListFilters).subscribe(function(e){t.trackListFilters=Object.assign(t.trackListFilters,e.Crate),t.currency.getCrates(t.selectedCurrencyId).subscribe(function(e){t.crates=e.Crates.map(function(t){return"collection"==t.type&&(t.description=t.editorOwner.stageName+"\r\n\r\n\r\n"+t.description),t}),t._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Crate updated",detail:""})})})},t.prototype.applyCrate=function(t){var e=this;"crate"==t.type?(this._state.notifyDataChanged("spinner.show",{}),this.selectedCollectionId=t._id,this.currency.getCrate(this.selectedCurrencyId,t._id).subscribe(function(t){e.trackListFilters=Object.assign({},e.trackListFilters,t.Crate,{currentPage:1}),e.filterTrackList(),e._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Crate applied",detail:""})})):(this._state.notifyDataChanged("spinner.show",{}),this.currency.getCollection(this.selectedCurrencyId,t._id).subscribe(function(n){e.selectedCollectionId=t._id,e.tracks.currentPage=1,e.tracks.totalPages=1,e.tracks.totalRecords=n.Collection.tracks.length,e.tracks.list=n.Collection.tracks,e.trackListFilters=Object.assign(e.trackListFilters,n.Collection,{currentPage:1}),e._state.notifyDataChanged("spinner.hide",{}),e._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Crate applied",detail:""})}))},t.prototype.removeCrate=function(t){var e=this;"crate"==t.type?(this._state.notifyDataChanged("spinner.show",{}),this.currency.removeCrate(this.selectedCurrencyId,t._id).subscribe(function(n){e.trackListFilters._id&&e.trackListFilters._id==t._id&&e.clearCurrentCrate(),e._state.notifyDataChanged("spinner.show",{}),e.currency.getCrates(e.selectedCurrencyId).subscribe(function(t){e.crates=t.Crates.map(function(t){return"collection"==t.type&&(t.description=t.editorOwner.stageName+"\r\n\r\n\r\n"+t.description),t}),e._state.notifyDataChanged("spinner.hide",{}),e._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Crate removed",detail:""})})})):(this._state.notifyDataChanged("spinner.show",{}),this.currency.removeCollectionFromMyCrates(t._id).subscribe(function(t){e.currency.getCrates(e.selectedCurrencyId).subscribe(function(t){e.crates=t.Crates.map(function(t){return"collection"==t.type&&(t.description=t.editorOwner.stageName+"\r\n\r\n\r\n"+t.description),t}),e.trackListFilters=Object.assign(e.trackListFilters,t.Crate),e._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Collection removed",detail:""}),e._state.notifyDataChanged("spinner.hide",{})})}))},t.prototype.isTrackColumnSelected=function(t){return this.trackColumnsSelected.indexOf(t)!==-1},t.prototype.getCrates=function(){var t=this;this.currency.getCrates(this.selectedCurrencyId).subscribe(function(e){t.trackListFilters=Object.assign(t.trackListFilters,e.Crate),t.filterTrackList(),t._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Crate applied",detail:""})})},t.prototype.clearCurrentCrate=function(){this.trackListFilters={minYear:1950,maxYear:(new Date).getFullYear(),editors:[],artistName:"",startBpm:0,endBpm:250,keys:[],tags:[],genres:[],trackName:"",sortField:"publishDate",sortOrder:-1,rows:25,_id:null,name:null},this.selectedCollectionId=null,this.filterTrackList()},t.prototype.toggleFilterPanel=function(){this.showFilters=!this.showFilters},t.prototype.applyCurrencyHoverColor=function(t){t.target.style.borderLeftColor=this.currency.selectedCurrency.color},t.prototype.removeCurrencyHoverColor=function(t,e){console.log(e,this.selectedCollectionId),e!=this.selectedCollectionId&&(t.target.style.borderLeftColor="transparent")},t.prototype.removeCurrencyHoverColorEditor=function(t,e){e!=this.selectedEditor&&(t.target.style.borderLeftColor="transparent")},__decorate([r.ViewChild("packagePurchaseModal"),__metadata("design:type","function"==typeof(e="undefined"!=typeof u.ModalDirective&&u.ModalDirective)&&e||Object)],t.prototype,"packagePurchaseModal",void 0),__decorate([r.ViewChild("trackTable"),__metadata("design:type",Object)],t.prototype,"trackTable",void 0),__decorate([r.ViewChild("storeControls"),__metadata("design:type",Object)],t.prototype,"storeControls",void 0),__decorate([r.ViewChild("transactionTable"),__metadata("design:type",Object)],t.prototype,"transactionTable",void 0),__decorate([r.ViewChild("sidebar"),__metadata("design:type",Object)],t.prototype,"sidebar",void 0),t=__decorate([r.Component({selector:"tracks",styles:[n(1584)],template:n(1599)}),__metadata("design:paramtypes",["function"==typeof(f="undefined"!=typeof s.TrackService&&s.TrackService)&&f||Object,"function"==typeof(h="undefined"!=typeof i.GlobalState&&i.GlobalState)&&h||Object,"function"==typeof(y="undefined"!=typeof l.Router&&l.Router)&&y||Object,"function"==typeof(g="undefined"!=typeof c.Http&&c.Http)&&g||Object,"function"==typeof(m="undefined"!=typeof l.ActivatedRoute&&l.ActivatedRoute)&&m||Object,"function"==typeof(v="undefined"!=typeof s.Currency&&s.Currency)&&v||Object,"function"==typeof(k="undefined"!=typeof s.Account&&s.Account)&&k||Object,"function"==typeof(b="undefined"!=typeof o.AppState&&o.AppState)&&b||Object,"function"==typeof(C="undefined"!=typeof s.EditorService&&s.EditorService)&&C||Object,"function"==typeof(w="undefined"!=typeof s.KeyService&&s.KeyService)&&w||Object,"function"==typeof(T="undefined"!=typeof s.Genres&&s.Genres)&&T||Object,"function"==typeof(x="undefined"!=typeof s.TagService&&s.TagService)&&x||Object])],t);var e,f,h,y,g,m,v,k,b,C,w,T,x}();e.TrackList=f},1561:function(t,e,n){"use strict";var r=n(0),a=function(){function t(){}return t=__decorate([r.Component({selector:"tracks",template:"<router-outlet></router-outlet>"}),__metadata("design:paramtypes",[])],t)}();e.Tracks=a},1569:function(t,e){"use strict";var n=function(){function t(t,e,n,r,a,i,o,c,s,l){void 0===n&&(n=null),void 0===r&&(r=null),void 0===a&&(a=null),void 0===i&&(i=null),void 0===o&&(o=null),void 0===c&&(c=null),void 0===s&&(s=null),void 0===l&&(l=null),this.selectedPackageId=t,this.selectedPackageCurrencyId=e,this.cardNumber=n,this.cardExpMonth=r,this.cardExpYear=a,this.expiryMonth=i,this.expiryYear=o,this.cardCVV=c,this.cardName=s,this.cardZIP=l}return t}();e.PackagePurchase=n},1570:function(t,e,n){"use strict";var r=n(18),a=n(1561),i=n(1560),o=n(715),c=[{path:"",component:a.Tracks,canActivate:[o.AuthGuard],children:[{path:"",redirectTo:"/pages/tracks/crates",pathMatch:"full"},{path:":view",component:i.TrackList}]}];e.routing=r.RouterModule.forChild(c)},1571:function(t,e,n){(function(t,n){(function(t,n){n(e)})(this,function(e){"use strict";function r(t,e){e|=0;for(var n=Math.max(t.length-e,0),r=Array(n),a=0;a<n;a++)r[a]=t[e+a];return r}function a(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function i(t){setTimeout(t,0)}function o(t){return function(e){var n=r(arguments,1);t(function(){e.apply(null,n)})}}function c(t){return le(function(e,n){var r;try{r=t.apply(this,e)}catch(t){return n(t)}a(r)&&"function"==typeof r.then?r.then(function(t){s(n,null,t)},function(t){s(n,t.message?t:new Error(t))}):n(null,r)})}function s(t,e,n){try{t(e,n)}catch(t){pe(l,t)}}function l(t){throw t}function u(t){return fe&&"AsyncFunction"===t[Symbol.toStringTag]}function d(t){return u(t)?c(t):t}function p(t){return function(e){var n=r(arguments,1),a=le(function(n,r){var a=this;return t(e,function(t,e){d(t).apply(a,n.concat(e))},r)});return n.length?a.apply(this,n):a}}function f(t){var e=ke.call(t,Ce),n=t[Ce];try{t[Ce]=void 0;var r=!0}catch(t){}var a=be.call(t);return r&&(e?t[Ce]=n:delete t[Ce]),a}function h(t){return Te.call(t)}function y(t){return null==t?void 0===t?_e:xe:(t=Object(t),Le&&Le in t?f(t):h(t))}function g(t){if(!a(t))return!1;var e=y(t);return e==Ie||e==Pe||e==Se||e==De}function m(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Fe}function v(t){return null!=t&&m(t.length)&&!g(t)}function k(){}function b(t){return function(){if(null!==t){var e=t;t=null,e.apply(this,arguments)}}}function C(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function w(t){return null!=t&&"object"==typeof t}function T(t){return w(t)&&y(t)==Ae}function x(){return!1}function _(t,e){return e=null==e?Ve:e,!!e&&("number"==typeof t||We.test(t))&&t>-1&&t%1==0&&t<e}function L(t){return w(t)&&m(t.length)&&!!bn[y(t)]}function S(t){return function(e){return t(e)}}function I(t,e){var n=He(t),r=!n&&Re(t),a=!n&&!r&&Ue(t),i=!n&&!r&&!a&&Sn(t),o=n||r||a||i,c=o?C(t.length,String):[],s=c.length;for(var l in t)!e&&!Pn.call(t,l)||o&&("length"==l||a&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||_(l,s))||c.push(l);return c}function P(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||Dn;return t===n}function D(t,e){return function(n){return t(e(n))}}function F(t){if(!P(t))return Fn(t);var e=[];for(var n in Object(t))Mn.call(t,n)&&"constructor"!=n&&e.push(n);return e}function j(t){return v(t)?I(t):F(t)}function M(t){var e=-1,n=t.length;return function(){return++e<n?{value:t[e],key:e}:null}}function O(t){var e=-1;return function(){var n=t.next();return n.done?null:(e++,{value:n.value,key:e})}}function A(t){var e=j(t),n=-1,r=e.length;return function(){var a=e[++n];return n<r?{value:t[a],key:a}:null}}function E(t){if(v(t))return M(t);var e=Oe(t);return e?O(e):A(t)}function B(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function N(t){return function(e,n,r){function a(t,e){if(s-=1,t)c=!0,r(t);else{if(e===je||c&&s<=0)return c=!0,r(null);i()}}function i(){for(;s<t&&!c;){var e=o();if(null===e)return c=!0,void(s<=0&&r(null));s+=1,n(e.value,e.key,B(a))}}if(r=b(r||k),t<=0||!e)return r(null);var o=E(e),c=!1,s=0;i()}}function R(t,e,n,r){N(e)(t,d(n),r)}function H(t,e){return function(n,r,a){return t(n,e,r,a)}}function Q(t,e,n){function r(t,e){t?n(t):++i!==o&&e!==je||n(null)}n=b(n||k);var a=0,i=0,o=t.length;for(0===o&&n(null);a<o;a++)e(t[a],a,B(r))}function z(t){return function(e,n,r){return t(An,e,d(n),r)}}function q(t,e,n,r){r=r||k,e=e||[];var a=[],i=0,o=d(n);t(e,function(t,e,n){var r=i++;o(t,function(t,e){a[r]=e,n(t)})},function(t){r(t,a)})}function $(t){return function(e,n,r,a){return t(N(n),e,d(r),a)}}function Y(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function U(t){return function(e,n,r){for(var a=-1,i=Object(e),o=r(e),c=o.length;c--;){var s=o[t?c:++a];if(n(i[s],s,i)===!1)break}return e}}function V(t,e){return t&&zn(t,e,j)}function W(t,e,n,r){for(var a=t.length,i=n+(r?1:-1);r?i--:++i<a;)if(e(t[i],i,t))return i;return-1}function K(t){return t!==t}function G(t,e,n){for(var r=n-1,a=t.length;++r<a;)if(t[r]===e)return r;return-1}function J(t,e,n){return e===e?G(t,e,n):W(t,K,n)}function Z(t,e){for(var n=-1,r=null==t?0:t.length,a=Array(r);++n<r;)a[n]=e(t[n],n,t);return a}function X(t){return"symbol"==typeof t||w(t)&&y(t)==$n}function tt(t){if("string"==typeof t)return t;if(He(t))return Z(t,tt)+"";if(X(t))return Vn?Vn.call(t):"";var e=t+"";return"0"==e&&1/t==-Yn?"-0":e}function et(t,e,n){var r=-1,a=t.length;e<0&&(e=-e>a?0:a+e),n=n>a?a:n,n<0&&(n+=a),a=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(a);++r<a;)i[r]=t[r+e];return i}function nt(t,e,n){
var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:et(t,e,n)}function rt(t,e){for(var n=t.length;n--&&J(e,t[n],0)>-1;);return n}function at(t,e){for(var n=-1,r=t.length;++n<r&&J(e,t[n],0)>-1;);return n}function it(t){return t.split("")}function ot(t){return Xn.test(t)}function ct(t){return t.match(mr)||[]}function st(t){return ot(t)?ct(t):it(t)}function lt(t){return null==t?"":tt(t)}function ut(t,e,n){if(t=lt(t),t&&(n||void 0===e))return t.replace(vr,"");if(!t||!(e=tt(e)))return t;var r=st(t),a=st(e),i=at(r,a),o=rt(r,a)+1;return nt(r,i,o).join("")}function dt(t){return t=t.toString().replace(wr,""),t=t.match(kr)[2].replace(" ",""),t=t?t.split(br):[],t=t.map(function(t){return ut(t.replace(Cr,""))})}function pt(t,e){var n={};V(t,function(t,e){function r(e,n){var r=Z(a,function(t){return e[t]});r.push(n),d(t).apply(null,r)}var a,i=u(t),o=!i&&1===t.length||i&&0===t.length;if(He(t))a=t.slice(0,-1),t=t[t.length-1],n[e]=a.concat(a.length>0?r:t);else if(o)n[e]=t;else{if(a=dt(t),0===t.length&&!i&&0===a.length)throw new Error("autoInject task functions require explicit parameters.");i||a.pop(),n[e]=a.concat(r)}}),qn(n,e)}function ft(){this.head=this.tail=null,this.length=0}function ht(t,e){t.length=1,t.head=t.tail=e}function yt(t,e,n){function r(t,e,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(l.started=!0,He(t)||(t=[t]),0===t.length&&l.idle())return pe(function(){l.drain()});for(var r=0,a=t.length;r<a;r++){var i={data:t[r],callback:n||k};e?l._tasks.unshift(i):l._tasks.push(i)}pe(l.process)}function a(t){return function(e){o-=1;for(var n=0,r=t.length;n<r;n++){var a=t[n],i=J(c,a,0);i>=0&&c.splice(i),a.callback.apply(a,arguments),null!=e&&l.error(e,a.data)}o<=l.concurrency-l.buffer&&l.unsaturated(),l.idle()&&l.drain(),l.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var i=d(t),o=0,c=[],s=!1,l={_tasks:new ft,concurrency:e,payload:n,saturated:k,unsaturated:k,buffer:e/4,empty:k,drain:k,error:k,started:!1,paused:!1,push:function(t,e){r(t,!1,e)},kill:function(){l.drain=k,l._tasks.empty()},unshift:function(t,e){r(t,!0,e)},remove:function(t){l._tasks.remove(t)},process:function(){if(!s){for(s=!0;!l.paused&&o<l.concurrency&&l._tasks.length;){var t=[],e=[],n=l._tasks.length;l.payload&&(n=Math.min(n,l.payload));for(var r=0;r<n;r++){var u=l._tasks.shift();t.push(u),e.push(u.data)}o+=1,c.push(t[0]),0===l._tasks.length&&l.empty(),o===l.concurrency&&l.saturated();var d=B(a(t));i(e,d)}s=!1}},length:function(){return l._tasks.length},running:function(){return o},workersList:function(){return c},idle:function(){return l._tasks.length+o===0},pause:function(){l.paused=!0},resume:function(){l.paused!==!1&&(l.paused=!1,pe(l.process))}};return l}function gt(t,e){return yt(t,1,e)}function mt(t,e,n,r){r=b(r||k);var a=d(n);xr(t,function(t,n,r){a(e,t,function(t,n){e=n,r(t)})},function(t){r(t,e)})}function vt(){var t=Z(arguments,d);return function(){var e=r(arguments),n=this,a=e[e.length-1];"function"==typeof a?e.pop():a=k,mt(t,e,function(t,e,a){e.apply(n,t.concat(function(t){var e=r(arguments,1);a(t,e)}))},function(t,e){a.apply(n,[t].concat(e))})}}function kt(t,e,n,r){var a=[];t(e,function(t,e,r){n(t,function(t,e){a=a.concat(e||[]),r(t)})},function(t){r(t,a)})}function bt(t){return function(e,n,r){return t(xr,e,d(n),r)}}function Ct(t){return t}function wt(t,e){return function(n,r,a,i){i=i||k;var o,c=!1;n(r,function(n,r,i){a(n,function(r,a){r?i(r):t(a)&&!o?(c=!0,o=e(!0,n),i(null,je)):i()})},function(t){t?i(t):i(null,c?o:e(!1))})}}function Tt(t,e){return e}function xt(t){return function(e){var n=r(arguments,1);n.push(function(e){var n=r(arguments,1);"object"==typeof console&&(e?console.error&&console.error(e):console[t]&&Y(n,function(e){console[t](e)}))}),d(e).apply(null,n)}}function _t(t,e,n){function a(t){if(t)return n(t);var e=r(arguments,1);e.push(i),c.apply(this,e)}function i(t,e){return t?n(t):e?void o(a):n(null)}n=B(n||k);var o=d(t),c=d(e);i(null,!0)}function Lt(t,e,n){n=B(n||k);var a=d(t),i=function(t){if(t)return n(t);var o=r(arguments,1);return e.apply(this,o)?a(i):void n.apply(null,[null].concat(o))};a(i)}function St(t,e,n){Lt(t,function(){return!e.apply(this,arguments)},n)}function It(t,e,n){function r(t){return t?n(t):void o(a)}function a(t,e){return t?n(t):e?void i(r):n(null)}n=B(n||k);var i=d(e),o=d(t);o(a)}function Pt(t){return function(e,n,r){return t(e,r)}}function Dt(t,e,n){An(t,Pt(d(e)),n)}function Ft(t,e,n,r){N(e)(t,Pt(d(n)),r)}function jt(t){return u(t)?t:le(function(e,n){var r=!0;e.push(function(){var t=arguments;r?pe(function(){n.apply(null,t)}):n.apply(null,t)}),t.apply(this,e),r=!1})}function Mt(t){return!t}function Ot(t){return function(e){return null==e?void 0:e[t]}}function At(t,e,n,r){var a=new Array(e.length);t(e,function(t,e,r){n(t,function(t,n){a[e]=!!n,r(t)})},function(t){if(t)return r(t);for(var n=[],i=0;i<e.length;i++)a[i]&&n.push(e[i]);r(null,n)})}function Et(t,e,n,r){var a=[];t(e,function(t,e,r){n(t,function(n,i){n?r(n):(i&&a.push({index:e,value:t}),r())})},function(t){t?r(t):r(null,Z(a.sort(function(t,e){return t.index-e.index}),Ot("value")))})}function Bt(t,e,n,r){var a=v(e)?At:Et;a(t,e,d(n),r||k)}function Nt(t,e){function n(t){return t?r(t):void a(n)}var r=B(e||k),a=d(jt(t));n()}function Rt(t,e,n,r){r=b(r||k);var a={},i=d(n);R(t,e,function(t,e,n){i(t,e,function(t,r){return t?n(t):(a[e]=r,void n())})},function(t){r(t,a)})}function Ht(t,e){return e in t}function Qt(t,e){var n=Object.create(null),a=Object.create(null);e=e||Ct;var i=d(t),o=le(function(t,o){var c=e.apply(null,t);Ht(n,c)?pe(function(){o.apply(null,n[c])}):Ht(a,c)?a[c].push(o):(a[c]=[o],i.apply(null,t.concat(function(){var t=r(arguments);n[c]=t;var e=a[c];delete a[c];for(var i=0,o=e.length;i<o;i++)e[i].apply(null,t)})))});return o.memo=n,o.unmemoized=t,o}function zt(t,e,n){n=n||k;var a=v(e)?[]:{};t(e,function(t,e,n){d(t)(function(t,i){arguments.length>2&&(i=r(arguments,1)),a[e]=i,n(t)})},function(t){n(t,a)})}function qt(t,e){zt(An,t,e)}function $t(t,e,n){zt(N(e),t,n)}function Yt(t,e){if(e=b(e||k),!He(t))return e(new TypeError("First argument to race must be an array of functions"));if(!t.length)return e();for(var n=0,r=t.length;n<r;n++)d(t[n])(e)}function Ut(t,e,n,a){var i=r(t).reverse();mt(i,e,n,a)}function Vt(t){var e=d(t);return le(function(t,n){return t.push(function(t,e){if(t)n(null,{error:t});else{var a;a=arguments.length<=2?e:r(arguments,1),n(null,{value:a})}}),e.apply(this,t)})}function Wt(t,e,n,r){Bt(t,e,function(t,e){n(t,function(t,n){e(t,!n)})},r)}function Kt(t){var e;return He(t)?e=Z(t,Vt):(e={},V(t,function(t,n){e[n]=Vt.call(this,t)})),e}function Gt(t){return function(){return t}}function Jt(t,e,n){function r(t,e){if("object"==typeof e)t.times=+e.times||i,t.intervalFunc="function"==typeof e.interval?e.interval:Gt(+e.interval||o),t.errorFilter=e.errorFilter;else{if("number"!=typeof e&&"string"!=typeof e)throw new Error("Invalid arguments for async.retry");t.times=+e||i}}function a(){s(function(t){t&&l++<c.times&&("function"!=typeof c.errorFilter||c.errorFilter(t))?setTimeout(a,c.intervalFunc(l)):n.apply(null,arguments)})}var i=5,o=0,c={times:i,intervalFunc:Gt(o)};if(arguments.length<3&&"function"==typeof t?(n=e||k,e=t):(r(c,t),n=n||k),"function"!=typeof e)throw new Error("Invalid arguments for async.retry");var s=d(e),l=1;a()}function Zt(t,e){zt(xr,t,e)}function Xt(t,e,n){function r(t,e){var n=t.criteria,r=e.criteria;return n<r?-1:n>r?1:0}var a=d(e);En(t,function(t,e){a(t,function(n,r){return n?e(n):void e(null,{value:t,criteria:r})})},function(t,e){return t?n(t):void n(null,Z(e.sort(r),Ot("value")))})}function te(t,e,n){var r=d(t);return le(function(a,i){function o(){var e=t.name||"anonymous",r=new Error('Callback function "'+e+'" timed out.');r.code="ETIMEDOUT",n&&(r.info=n),s=!0,i(r)}var c,s=!1;a.push(function(){s||(i.apply(null,arguments),clearTimeout(c))}),c=setTimeout(o,e),r.apply(null,a)})}function ee(t,e,n,r){for(var a=-1,i=ra(na((e-t)/(n||1)),0),o=Array(i);i--;)o[r?i:++a]=t,t+=n;return o}function ne(t,e,n,r){var a=d(n);Nn(ee(0,t,1),e,a,r)}function re(t,e,n,r){arguments.length<=3&&(r=n,n=e,e=He(t)?[]:{}),r=b(r||k);var a=d(n);An(t,function(t,n,r){a(e,t,n,r)},function(t){r(t,e)})}function ae(t,e){var n,a=null;e=e||k,Mr(t,function(t,e){d(t)(function(t,i){n=arguments.length>2?r(arguments,1):i,a=t,e(!t)})},function(){e(a,n)})}function ie(t){return function(){return(t.unmemoized||t).apply(null,arguments)}}function oe(t,e,n){n=B(n||k);var a=d(e);if(!t())return n(null);var i=function(e){if(e)return n(e);if(t())return a(i);var o=r(arguments,1);n.apply(null,[null].concat(o))};a(i)}function ce(t,e,n){oe(function(){return!t.apply(this,arguments)},e,n)}var se,le=function(t){return function(){var e=r(arguments),n=e.pop();t.call(this,e,n)}},ue="function"==typeof setImmediate&&setImmediate,de="object"==typeof process&&"function"==typeof process.nextTick;se=ue?setImmediate:de?process.nextTick:i;var pe=o(se),fe="function"==typeof Symbol,he="object"==typeof t&&t&&t.Object===Object&&t,ye="object"==typeof self&&self&&self.Object===Object&&self,ge=he||ye||Function("return this")(),me=ge.Symbol,ve=Object.prototype,ke=ve.hasOwnProperty,be=ve.toString,Ce=me?me.toStringTag:void 0,we=Object.prototype,Te=we.toString,xe="[object Null]",_e="[object Undefined]",Le=me?me.toStringTag:void 0,Se="[object AsyncFunction]",Ie="[object Function]",Pe="[object GeneratorFunction]",De="[object Proxy]",Fe=9007199254740991,je={},Me="function"==typeof Symbol&&Symbol.iterator,Oe=function(t){return Me&&t[Me]&&t[Me]()},Ae="[object Arguments]",Ee=Object.prototype,Be=Ee.hasOwnProperty,Ne=Ee.propertyIsEnumerable,Re=T(function(){return arguments}())?T:function(t){return w(t)&&Be.call(t,"callee")&&!Ne.call(t,"callee")},He=Array.isArray,Qe="object"==typeof e&&e&&!e.nodeType&&e,ze=Qe&&"object"==typeof n&&n&&!n.nodeType&&n,qe=ze&&ze.exports===Qe,$e=qe?ge.Buffer:void 0,Ye=$e?$e.isBuffer:void 0,Ue=Ye||x,Ve=9007199254740991,We=/^(?:0|[1-9]\d*)$/,Ke="[object Arguments]",Ge="[object Array]",Je="[object Boolean]",Ze="[object Date]",Xe="[object Error]",tn="[object Function]",en="[object Map]",nn="[object Number]",rn="[object Object]",an="[object RegExp]",on="[object Set]",cn="[object String]",sn="[object WeakMap]",ln="[object ArrayBuffer]",un="[object DataView]",dn="[object Float32Array]",pn="[object Float64Array]",fn="[object Int8Array]",hn="[object Int16Array]",yn="[object Int32Array]",gn="[object Uint8Array]",mn="[object Uint8ClampedArray]",vn="[object Uint16Array]",kn="[object Uint32Array]",bn={};bn[dn]=bn[pn]=bn[fn]=bn[hn]=bn[yn]=bn[gn]=bn[mn]=bn[vn]=bn[kn]=!0,bn[Ke]=bn[Ge]=bn[ln]=bn[Je]=bn[un]=bn[Ze]=bn[Xe]=bn[tn]=bn[en]=bn[nn]=bn[rn]=bn[an]=bn[on]=bn[cn]=bn[sn]=!1;var Cn="object"==typeof e&&e&&!e.nodeType&&e,wn=Cn&&"object"==typeof n&&n&&!n.nodeType&&n,Tn=wn&&wn.exports===Cn,xn=Tn&&he.process,_n=function(){try{return xn&&xn.binding("util")}catch(t){}}(),Ln=_n&&_n.isTypedArray,Sn=Ln?S(Ln):L,In=Object.prototype,Pn=In.hasOwnProperty,Dn=Object.prototype,Fn=D(Object.keys,Object),jn=Object.prototype,Mn=jn.hasOwnProperty,On=H(R,1/0),An=function(t,e,n){var r=v(t)?Q:On;r(t,d(e),n)},En=z(q),Bn=p(En),Nn=$(q),Rn=H(Nn,1),Hn=p(Rn),Qn=function(t){var e=r(arguments,1);return function(){var n=r(arguments);return t.apply(null,e.concat(n))}},zn=U(),qn=function(t,e,n){function a(t,e){v.push(function(){s(t,e)})}function i(){if(0===v.length&&0===y)return n(null,h);for(;v.length&&y<e;){var t=v.shift();t()}}function o(t,e){var n=m[t];n||(n=m[t]=[]),n.push(e)}function c(t){var e=m[t]||[];Y(e,function(t){t()}),i()}function s(t,e){if(!g){var a=B(function(e,a){if(y--,arguments.length>2&&(a=r(arguments,1)),e){var i={};V(h,function(t,e){i[e]=t}),i[t]=a,g=!0,m=Object.create(null),n(e,i)}else h[t]=a,c(t)});y++;var i=d(e[e.length-1]);e.length>1?i(h,a):i(a)}}function l(){for(var t,e=0;C.length;)t=C.pop(),e++,Y(u(t),function(t){0===--w[t]&&C.push(t)});if(e!==f)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}function u(e){var n=[];return V(t,function(t,r){He(t)&&J(t,e,0)>=0&&n.push(r)}),n}"function"==typeof e&&(n=e,e=null),n=b(n||k);var p=j(t),f=p.length;if(!f)return n(null);e||(e=f);var h={},y=0,g=!1,m=Object.create(null),v=[],C=[],w={};V(t,function(e,n){if(!He(e))return a(n,[e]),void C.push(n);var r=e.slice(0,e.length-1),i=r.length;return 0===i?(a(n,e),void C.push(n)):(w[n]=i,void Y(r,function(c){if(!t[c])throw new Error("async.auto task `"+n+"` has a non-existent dependency `"+c+"` in "+r.join(", "));o(c,function(){i--,0===i&&a(n,e)})}))}),l(),i()},$n="[object Symbol]",Yn=1/0,Un=me?me.prototype:void 0,Vn=Un?Un.toString:void 0,Wn="\\ud800-\\udfff",Kn="\\u0300-\\u036f\\ufe20-\\ufe23",Gn="\\u20d0-\\u20f0",Jn="\\ufe0e\\ufe0f",Zn="\\u200d",Xn=RegExp("["+Zn+Wn+Kn+Gn+Jn+"]"),tr="\\ud800-\\udfff",er="\\u0300-\\u036f\\ufe20-\\ufe23",nr="\\u20d0-\\u20f0",rr="\\ufe0e\\ufe0f",ar="["+tr+"]",ir="["+er+nr+"]",or="\\ud83c[\\udffb-\\udfff]",cr="(?:"+ir+"|"+or+")",sr="[^"+tr+"]",lr="(?:\\ud83c[\\udde6-\\uddff]){2}",ur="[\\ud800-\\udbff][\\udc00-\\udfff]",dr="\\u200d",pr=cr+"?",fr="["+rr+"]?",hr="(?:"+dr+"(?:"+[sr,lr,ur].join("|")+")"+fr+pr+")*",yr=fr+pr+hr,gr="(?:"+[sr+ir+"?",ir,lr,ur,ar].join("|")+")",mr=RegExp(or+"(?="+or+")|"+gr+yr,"g"),vr=/^\s+|\s+$/g,kr=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,br=/,/,Cr=/(=.+)?(\s*)$/,wr=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;ft.prototype.removeLink=function(t){return t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev,t.prev=t.next=null,this.length-=1,t},ft.prototype.empty=function(){for(;this.head;)this.shift();return this},ft.prototype.insertAfter=function(t,e){e.prev=t,e.next=t.next,t.next?t.next.prev=e:this.tail=e,t.next=e,this.length+=1},ft.prototype.insertBefore=function(t,e){e.prev=t.prev,e.next=t,t.prev?t.prev.next=e:this.head=e,t.prev=e,this.length+=1},ft.prototype.unshift=function(t){this.head?this.insertBefore(this.head,t):ht(this,t)},ft.prototype.push=function(t){this.tail?this.insertAfter(this.tail,t):ht(this,t)},ft.prototype.shift=function(){return this.head&&this.removeLink(this.head)},ft.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},ft.prototype.toArray=function(){for(var t=Array(this.length),e=this.head,n=0;n<this.length;n++)t[n]=e.data,e=e.next;return t},ft.prototype.remove=function(t){for(var e=this.head;e;){var n=e.next;t(e)&&this.removeLink(e),e=n}return this};var Tr,xr=H(R,1),_r=function(){return vt.apply(null,r(arguments).reverse())},Lr=z(kt),Sr=bt(kt),Ir=function(){var t=r(arguments),e=[null].concat(t);return function(){var t=arguments[arguments.length-1];return t.apply(this,e)}},Pr=z(wt(Ct,Tt)),Dr=$(wt(Ct,Tt)),Fr=H(Dr,1),jr=xt("dir"),Mr=H(Ft,1),Or=z(wt(Mt,Mt)),Ar=$(wt(Mt,Mt)),Er=H(Ar,1),Br=z(Bt),Nr=$(Bt),Rr=H(Nr,1),Hr=function(t,e,n,r){r=r||k;var a=d(n);Nn(t,e,function(t,e){a(t,function(n,r){return n?e(n):e(null,{key:r,val:t})})},function(t,e){for(var n={},a=Object.prototype.hasOwnProperty,i=0;i<e.length;i++)if(e[i]){var o=e[i].key,c=e[i].val;a.call(n,o)?n[o].push(c):n[o]=[c]}return r(t,n)})},Qr=H(Hr,1/0),zr=H(Hr,1),qr=xt("log"),$r=H(Rt,1/0),Yr=H(Rt,1);Tr=de?process.nextTick:ue?setImmediate:i;var Ur=o(Tr),Vr=function(t,e){var n=d(t);return yt(function(t,e){n(t[0],e)},e,1)},Wr=function(t,e){var n=Vr(t,e);return n.push=function(t,e,r){if(null==r&&(r=k),"function"!=typeof r)throw new Error("task callback must be a function");if(n.started=!0,He(t)||(t=[t]),0===t.length)return pe(function(){n.drain()});e=e||0;for(var a=n._tasks.head;a&&e>=a.priority;)a=a.next;for(var i=0,o=t.length;i<o;i++){var c={data:t[i],priority:e,callback:r};a?n._tasks.insertBefore(a,c):n._tasks.push(c)}pe(n.process)},delete n.unshift,n},Kr=z(Wt),Gr=$(Wt),Jr=H(Gr,1),Zr=function(t,e){e||(e=t,t=null);var n=d(e);return le(function(e,r){function a(t){n.apply(null,e.concat(t))}t?Jt(t,a,r):Jt(a,r)})},Xr=z(wt(Boolean,Ct)),ta=$(wt(Boolean,Ct)),ea=H(ta,1),na=Math.ceil,ra=Math.max,aa=H(ne,1/0),ia=H(ne,1),oa=function(t,e){function n(e){var n=d(t[i++]);e.push(B(a)),n.apply(null,e)}function a(a){return a||i===t.length?e.apply(null,arguments):void n(r(arguments,1))}if(e=b(e||k),!He(t))return e(new Error("First argument to waterfall must be an array of functions"));if(!t.length)return e();var i=0;n([])},ca={applyEach:Bn,applyEachSeries:Hn,apply:Qn,asyncify:c,auto:qn,autoInject:pt,cargo:gt,compose:_r,concat:Lr,concatSeries:Sr,constant:Ir,detect:Pr,detectLimit:Dr,detectSeries:Fr,dir:jr,doDuring:_t,doUntil:St,doWhilst:Lt,during:It,each:Dt,eachLimit:Ft,eachOf:An,eachOfLimit:R,eachOfSeries:xr,eachSeries:Mr,ensureAsync:jt,every:Or,everyLimit:Ar,everySeries:Er,filter:Br,filterLimit:Nr,filterSeries:Rr,forever:Nt,groupBy:Qr,groupByLimit:Hr,groupBySeries:zr,log:qr,map:En,mapLimit:Nn,mapSeries:Rn,mapValues:$r,mapValuesLimit:Rt,mapValuesSeries:Yr,memoize:Qt,nextTick:Ur,parallel:qt,parallelLimit:$t,priorityQueue:Wr,queue:Vr,race:Yt,reduce:mt,reduceRight:Ut,reflect:Vt,reflectAll:Kt,reject:Kr,rejectLimit:Gr,rejectSeries:Jr,retry:Jt,retryable:Zr,seq:vt,series:Zt,setImmediate:pe,some:Xr,someLimit:ta,someSeries:ea,sortBy:Xt,timeout:te,times:aa,timesLimit:ne,timesSeries:ia,transform:re,tryEach:ae,unmemoize:ie,until:ce,waterfall:oa,whilst:oe,all:Or,any:Xr,forEach:Dt,forEachSeries:Mr,forEachLimit:Ft,forEachOf:An,forEachOfSeries:xr,forEachOfLimit:R,inject:mt,foldl:mt,foldr:Ut,select:Br,selectLimit:Nr,selectSeries:Rr,wrapSync:c};e.default=ca,e.applyEach=Bn,e.applyEachSeries=Hn,e.apply=Qn,e.asyncify=c,e.auto=qn,e.autoInject=pt,e.cargo=gt,e.compose=_r,e.concat=Lr,e.concatSeries=Sr,e.constant=Ir,e.detect=Pr,e.detectLimit=Dr,e.detectSeries=Fr,e.dir=jr,e.doDuring=_t,e.doUntil=St,e.doWhilst=Lt,e.during=It,e.each=Dt,e.eachLimit=Ft,e.eachOf=An,e.eachOfLimit=R,e.eachOfSeries=xr,e.eachSeries=Mr,e.ensureAsync=jt,e.every=Or,e.everyLimit=Ar,e.everySeries=Er,e.filter=Br,e.filterLimit=Nr,e.filterSeries=Rr,e.forever=Nt,e.groupBy=Qr,e.groupByLimit=Hr,e.groupBySeries=zr,e.log=qr,e.map=En,e.mapLimit=Nn,e.mapSeries=Rn,e.mapValues=$r,e.mapValuesLimit=Rt,e.mapValuesSeries=Yr,e.memoize=Qt,e.nextTick=Ur,e.parallel=qt,e.parallelLimit=$t,e.priorityQueue=Wr,e.queue=Vr,e.race=Yt,e.reduce=mt,e.reduceRight=Ut,e.reflect=Vt,e.reflectAll=Kt,e.reject=Kr,e.rejectLimit=Gr,e.rejectSeries=Jr,e.retry=Jt,e.retryable=Zr,e.seq=vt,e.series=Zt,e.setImmediate=pe,e.some=Xr,e.someLimit=ta,e.someSeries=ea,e.sortBy=Xt,e.timeout=te,e.times=aa,e.timesLimit=ne,e.timesSeries=ia,e.transform=re,e.tryEach=ae,e.unmemoize=ie,e.until=ce,e.waterfall=oa,e.whilst=oe,e.all=Or,e.allLimit=Ar,e.allSeries=Er,e.any=Xr,e.anyLimit=ta,e.anySeries=ea,e.find=Pr,e.findLimit=Dr,e.findSeries=Fr,e.forEach=Dt,e.forEachSeries=Mr,e.forEachLimit=Ft,e.forEachOf=An,e.forEachOfSeries=xr,e.forEachOfLimit=R,e.inject=mt,e.foldl=mt,e.foldr=Ut,e.select=Br,e.selectLimit=Nr,e.selectSeries=Rr,e.wrapSync=c,Object.defineProperty(e,"__esModule",{value:!0})})}).call(e,n(42),n(372)(t))},1584:function(t,e){t.exports="#track-list-component .track-list i.fa{font-size:1.3rem}#track-list-component .track-list td{border:none;vertical-align:middle;text-align:center}#track-list-component .ui-multiselect-panel .ui-multiselect-item{display:inline-block;width:49%;float:left;text-align:center;margin:5px 0.5%}#track-list-component .ui-multiselect-panel .ui-multiselect-item label{padding-left:0px}#track-list-component .ui-multiselect-panel .ui-multiselect-item .ui-chkbox-box{display:none}#track-list-component .ui-multiselect .ui-multiselect-label{width:250px}#track-list-component .ui-datatable th.ui-state-default{background:black;color:white}#track-list-component .ui-datatable th.ui-state-default{vertical-align:middle;padding:15px 0px;font-size:1.0rem;border:0}@media (max-width: 1397px){#track-list-component .ui-datatable th.ui-state-default{font-size:0.8rem}}#track-list-component .tag-item{margin-bottom:0px}#track-list-component .bubble-container{display:inline-block;border:solid 1px;border-radius:9px;padding:8px 10px;text-transform:uppercase;margin:0px 5px}#track-list-component .search{text-shadow:none;color:#ffffff;font-size:13px;line-height:25px;vertical-align:middle;transition:all 0.5s ease;white-space:nowrap;overflow:hidden;width:100%;max-width:25%;padding:3px 10px}#track-list-component .search label{cursor:pointer}#track-list-component .search i{width:16px;display:inline-block;cursor:pointer;padding-left:1px;font-size:16px;margin-right:13px}#track-list-component .search input{background:none;border:none;outline:none;width:95%;padding:0;margin:0 0 0 -3px;height:auto}#track-list-component #track-list-features{padding-bottom:10px}#track-list-component #track-list-features input{text-transform:uppercase;text-align:center}#track-list-component #track-list-features .ui-datatable tbody>tr.ui-widget-content{height:100px}#track-list-component .btn{text-transform:uppercase}#track-list-component .btn.btn-link{border:solid 1px #ddd;color:white;border-radius:9px}#track-list-component .btn.btn-link:hover{border-color:#999}#track-list-component .text-purple{color:#903f8c}.modal{top:150px;z-index:9999999999}.modal.fade.in{background-color:rgba(0,0,0,0.8)}.modal .modal-dialog{margin-top:0px}.modal .modal-body{overflow:auto}.modal .modal-header .fa-play-circle,.modal .modal-header .fa-pause-circle{float:right;font-size:1.5rem;font-weight:bold;line-height:1;color:white;text-shadow:0 1px 0 #fff;margin-top:-2px;margin-right:5px}.modal .modal-header .save-button{float:right;font-size:1rem;line-height:1;color:white;margin-right:5px}.modal .modal-header .save-button .fa-save{padding:0px 3px}.modal-content{background-color:#000000;color:white;border:white 1px solid}.modal-content .close{opacity:1}.modal-content .close span{color:white}.modal-content select{background-color:black;width:100%;padding:0px;height:40px}.crate-editor{-webkit-transition:height 0.2ms ease-in-out;-moz-transition:height 0.2ms ease-in-out;-ms-transition:height 0.2ms ease-in-out;-o-transition:height 0.2ms ease-in-out;transition:height 0.2ms ease-in-out;height:0;visibility:hidden}.crate-editor.show{height:auto;visibility:visible}.form-control.column-filter{font-size:12px;padding:5px 5px}p-radiobutton{display:block}.nav.nav-tabs{display:flex}.nav.nav-tabs .nav-item{text-align:center;flex:1}.nav.nav-tabs .nav-item .nav-link{padding:5px 0}.nav.nav-tabs.nav-stacked.crate-list{margin-top:15px}.nav.nav-tabs.nav-stacked.crate-list li{padding:5px}.nav.nav-tabs.nav-stacked.crate-list li.active{border:solid 1px white}.nav.nav-tabs.nav-stacked.crate-list li.nav-item{text-align:left}.nav.nav-tabs.nav-stacked.crate-list li.nav-item .float-right{float:right}.nav .nav-item+.nav-item{margin-left:0}.filters-panel{transition:opacity 300ms, height 300ms;overflow:hidden}.filters-panel.hide{height:0px}.filters-panel.show{height:250px}.sidebar-title{margin-top:15px}.nav.nav-tabs.nav-stacked{display:block}.nav.nav-tabs.nav-stacked li{cursor:pointer;border:none;display:block;float:none}.collection-item{opacity:0.7;margin-top:10px;border-left:solid 5px transparent;padding-left:10px;cursor:pointer}.collection-item:hover{opacity:1.0}.collection-item.active{opacity:1.0}.action-button{padding:0;opacity:0.7}.action-button:hover{opacity:1.0}.version-subtitle{color:#9e4d4d}.collection-actions{text-align:right;margin-top:10px}.crate-button{margin-bottom:2px}.subtabs{margin-top:2px}.tracks-main-panel{display:table;height:100%}.tracks-main-panel .track-panel-sidebar{display:table-cell;height:calc(100% - 15px);overflow-y:scroll;margin-top:15px}\n"},1599:function(t,e){t.exports='<div class="track-list-container">\n  <div class="row">\n    <div class="col-md-12 store-controls" #storeControls>\n      <store-selector></store-selector>\n\n      <div class="row subtabs">\n        <div class="col-md-9">\n\n          <ul class="nav nav-tabs">\n            <li role="presentation" class="nav-item" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}"><a class="nav-link" [routerLink]="[\'/pages/tracks/crates\']">Charts/Crates</a></li>\n            <li role="presentation" class="nav-item" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}"><a class="nav-link" [routerLink]="[\'/pages/tracks/collections\']">Featured  Collections</a></li>\n            <li role="presentation" class="nav-item" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}"><a class="nav-link" [routerLink]="[\'/pages/tracks/download-queue\']">My Download Queue</a></li>\n            <li role="presentation" class="nav-item" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}"><a class="nav-link" [routerLink]="[\'/pages/tracks/library\']">My Library</a></li>\n            <li role="presentation" class="nav-item" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}"><a class="nav-link" [routerLink]="[\'/pages/tracks/transactions\']">My Transactions</a></li>\n\n          </ul>\n\n        </div>\n        <div class="col-md-3">\n          <button class="btn btn-warning" *ngIf="activeTab != \'transactions\'" (click)="toggleFilterPanel()" [hidden]="showingTopTracks"><i class="fa fa-filter"></i> &nbsp;Search/Filter</button>\n          <button class="btn btn-warning" *ngIf="activeTab != \'transactions\'" (click)="clearCurrentCrate()" [hidden]="!showingTopTracks">Show All Tracks</button>\n          <span>Credits: </span>\n          <span class="tag tag-success" *ngIf="selectedCurrencyCreditBalance > 0">{{selectedCurrencyCreditBalance}}</span>\n          <span class="tag tag-success" *ngIf="selectedCurrencyCreditBalance == 0">0</span>\n          <span class="tag tag-success" *ngIf="selectedCurrencyCreditBalance == -1">&infin;</span>\n\n          <button class="btn btn-primary" (click)="packagePurchaseModalShow()" *ngIf="selectedCurrencyCreditBalance == 0">Buy More</button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-2">\n      <div *ngIf="activeTab == \'crates\' ">\n                  <div class="row">\n            <div class="col-md-12">\n                        <button class="btn btn-warning col-md-12" *ngIf="activeTab != \'transactions\'" (click)="clearCurrentCrate()" style="margin-top: 15px;">Show All Tracks</button>\n\n            </div>\n          </div>\n\n        <div class="sidebar" #sidebar style="overflow: hidden; overflow-y: scroll;">\n\n          <p-accordion>\n            <p-accordionTab header="Top Editors - This Month" [selected]="true">\n\n              <div class="row" *ngFor="let ranking of charts.currentMonthRankings; let i = index;">\n                <div class="col-md-12 collection-item" (click)="selectEditor(ranking.editor._id);" [ngStyle]="{\'border-left-color\': (selectedEditor == ranking.editor._id) ? this.currency.selectedCurrency.color : \'transparent\' }" [ngClass]="{\'active\': (selectedEditor == ranking.editor._id ) }"\n                  (mouseenter)="applyCurrencyHoverColor($event)" (mouseleave)="removeCurrencyHoverColorEditor($event, ranking.editor._id)">\n                  <strong>{{i + 1}}. {{ranking.editor.stageName}}</strong><br/>\n\n                </div>\n\n              </div>\n\n            </p-accordionTab>\n\n            <!-- <p-accordionTab header="Top Editors - Last Month">\n              <div class="row" *ngFor="let ranking of charts.lastMonthRankings; let i = index;">\n                <div class="col-md-12 collection-item" (click)="selectEditor(ranking.editor._id);" [ngStyle]="{\'border-left-color\': (selectedEditor == ranking.editor._id) ? this.currency.selectedCurrency.color : \'transparent\' }" [ngClass]="{\'active\': (selectedEditor == ranking.editor._id.toString() ) }"\n                  (mouseenter)="applyCurrencyHoverColor($event)" (mouseleave)="removeCurrencyHoverColorEditor($event, ranking.editor._id)">\n                  <strong>{{i + 1}}. {{ranking.editor.stageName}}</strong><br/>\n\n                </div>\n\n              </div>\n\n            </p-accordionTab> -->\n\n            <p-accordionTab header="Top Editors - All Time">\n              <div class="row" *ngFor="let ranking of charts.allTimeRankings; let i = index;">\n                <div class="col-md-12 collection-item" (click)="selectEditor(ranking.editor._id);" [ngStyle]="{\'border-left-color\': (selectedEditor == ranking.editor._id) ? this.currency.selectedCurrency.color : \'transparent\' }" [ngClass]="{\'active\': selectedEditor == ranking.editor._id.toString() }"\n                  (mouseenter)="applyCurrencyHoverColor($event)" (mouseleave)="removeCurrencyHoverColorEditor($event, ranking.editor._id)">\n                  <strong>{{i + 1}}. {{ranking.editor.stageName}}</strong><br/>\n\n                </div>\n\n              </div>\n            </p-accordionTab>\n            <p-accordionTab header="Top Tracks Lists">\n              <div class="row">\n                <div class="col-md-12 collection-item" (click)="loadCollection(\'top-current-month\')" [ngStyle]="{\'border-left-color\': (selectedCollectionId == \'top-current-month\') ? this.currency.selectedCurrency.color : \'transparent\' }" [ngClass]="{\'active\': selectedCollectionId == \'top-current-month\' }"\n                  (mouseenter)="applyCurrencyHoverColor($event)" (mouseleave)="removeCurrencyHoverColor($event, \'top-current-month\')">\n                  <strong>Top Tracks - This Month</strong><br/>\n\n                </div>\n\n              </div>\n              <!-- <div class="row">\n                <div class="col-md-12 collection-item" (click)="loadCollection(\'top-last-month\')" [ngStyle]="{\'border-left-color\': (selectedCollectionId == \'top-last-month\') ? this.currency.selectedCurrency.color : \'transparent\' }" [ngClass]="{\'active\': selectedCollectionId == \'top-last-month\' }"\n                  (mouseenter)="applyCurrencyHoverColor($event)" (mouseleave)="removeCurrencyHoverColor($event, \'top-last-month\')">\n                  <strong>Top Tracks - Last Month</strong><br/>\n\n                </div>\n              </div> -->\n              <div class="row">\n                <div class="col-md-12 collection-item" (click)="loadCollection(\'top-all-time\')" [ngStyle]="{\'border-left-color\': (selectedCollectionId == \'top-all-time\') ? this.currency.selectedCurrency.color : \'transparent\' }" [ngClass]="{\'active\': selectedCollectionId == \'top-all-time\' }"\n                  (mouseenter)="applyCurrencyHoverColor($event)" (mouseleave)="removeCurrencyHoverColor($event, \'top-all-time\')">\n                  <strong>Top Tracks - All Time</strong><br/>\n\n                </div>\n\n              </div>\n            </p-accordionTab>\n            <p-accordionTab header="My Crates">\n\n              <div class="row" *ngFor="let crate of crates">\n                <div *ngIf="crate.type == \'crate\'">\n\n\n                  <div class="col-md-8 collection-item" (click)="applyCrate(crate)" [ngStyle]="{\'border-left-color\': (selectedCollectionId == crate._id) ? this.currency.selectedCurrency.color : \'transparent\' }" [ngClass]="{\'active\': selectedCollectionId == crate._id }"\n                    (mouseenter)="applyCurrencyHoverColor($event)" (mouseleave)="removeCurrencyHoverColor($event, crate._id)">\n                    <strong>{{crate.name}}</strong><br/>\n\n                  </div>\n                  <div class="col-md-4 collection-actions">\n                    <a class="btn btn-lg action-button" *ngIf="crate.description" [tooltipster]="crate.description" tooltipsterPosition="top" tooltipsterEvent="hover"><i class="fa fa-info-circle tooltip-indicator"></i></a>\n\n                    <a class="btn btn-lg action-button" alt="Delete Crate" title="Delete Crate" (click)="removeCrate(crate)">\n                      <i class="fa fa-trash"></i>\n                    </a>\n\n                  </div>\n                </div>\n              </div>\n            </p-accordionTab>\n            <p-accordionTab header="Collections Followed">\n              <div class="row" *ngFor="let crate of crates">\n\n                <div *ngIf="crate.type == \'collection\'">\n\n\n                  <div class="col-md-7 collection-item" (click)="applyCrate(crate)" [ngStyle]="{\'border-left-color\': (selectedCollectionId == crate._id) ? this.currency.selectedCurrency.color : \'transparent\' }" [ngClass]="{\'active\': selectedCollectionId == crate._id }"\n                    (mouseenter)="applyCurrencyHoverColor($event)" (mouseleave)="removeCurrencyHoverColor($event, crate._id)">\n                    <strong>{{crate.name}}</strong><br/>\n\n                  </div>\n                  <div class="col-md-5 collection-actions">\n                    <a class="btn btn-lg action-button" *ngIf="crate.description" [tooltipster]="crate.description" tooltipsterPosition="top" tooltipsterEvent="hover"><i class="fa fa-info-circle tooltip-indicator"></i></a>\n\n                    <a class="btn btn-lg action-button" alt="Delete Crate" title="Delete Crate" (click)="removeCrate(crate)">\n                      <i class="fa fa-trash"></i>\n                    </a>\n                  </div>\n                </div>\n              </div>\n            </p-accordionTab>\n          </p-accordion>\n          <!--<div class="row">\n            <div class="col-md-8 collection-item" (click)="loadCollection(\'new-tracks-from-last-login\')" [ngStyle]="{\'border-left-color\': (selectedCollectionId == \'new-tracks-from-last-login\') ? this.currency.selectedCurrency.color : \'transparent\' }" [ngClass]="{\'active\': selectedCollectionId == \'new-tracks-from-last-login\' }"\n              (mouseenter)="applyCurrencyHoverColor($event)" (mouseleave)="removeCurrencyHoverColor($event, \'new-tracks-from-last-login\')">\n              <strong>New Tracks Since Last Login</strong><br/>\n\n            </div>\n            <div class="col-md-4 collection-actions">\n              <span class="tag tag-success float-right">0</span>\n            </div>\n          </div>-->\n\n\n\n        </div>\n      </div>\n      <div *ngIf="activeTab == \'collections\' ">\n        <h3 class="sidebar-title">Select Collection</h3>\n          <div class="row">\n            <div class="col-md-12">\n                        <button class="btn btn-warning col-md-12" *ngIf="activeTab != \'transactions\'" (click)="clearCurrentCrate()" style="margin-top: 15px;">Show All Tracks</button>\n\n            </div>\n          </div>\n        <div class="sidebar" #sidebar style="overflow: hidden; overflow-y: scroll;">\n          <div class="row" *ngFor="let collection of collections">\n            <div class="col-md-8 collection-item" (click)="loadCollection(collection._id)" [ngStyle]="{\'border-left-color\': (selectedCollectionId == collection._id) ? this.currency.selectedCurrency.color : \'transparent\' }" [ngClass]="{\'active\': selectedCollectionId == collection._id }"\n              (mouseenter)="applyCurrencyHoverColor($event)" (mouseleave)="removeCurrencyHoverColor($event, collection._id)">\n              <strong>{{collection.name}}</strong><br/>\n              <small><em>{{collection.editorOwner.stageName}}</em></small><br/>\n\n              <small>{{collection.updatedAt | date: \'longDate\' }}</small><br/>\n              <small>DJs Following: {{collection.followers}} </small>\n\n            </div>\n            <div class="col-md-4 collection-actions">\n              <a class="btn btn-lg action-button" [tooltipster]="collection.description" tooltipsterPosition="top" tooltipsterEvent="hover"><i class="fa fa-info-circle tooltip-indicator"></i></a>\n              <a class="btn btn-lg action-button" alt="Save to My Crates" title="Save to My Crates" (click)="addCollectionToMyCrates(collection._id)"><i class="fa fa-plus-circle"></i></a>\n\n            </div>\n          </div>\n\n        </div>\n\n      </div>\n      <div *ngIf="activeTab == \'download-queue\'">\n        <h3 class="sidebar-title">Actions</h3>\n                <button class="btn btn-primary" (click)="selectAllTracks()">Select All</button>  <br/>\n        <br/>\n\n        <button class="btn btn-primary" [disabled]="tracksSelected.length == 0" (click)="purchaseAndDownloadSelectedTracks(false)">Save To Library</button>\n        <br/>\n        <br/>\n        <button class="btn btn-primary" [disabled]="tracksSelected.length == 0" (click)="purchaseAndDownloadSelectedTracks(true)">Save & Download</button>\n\n      </div>\n    </div>\n\n    <div class="col-md-10">\n      <div class="filters-panel hide" [ngClass]="{\'show\': showFilters, \'hide\': !showFilters }">\n        <div class="row">\n          <div class="col-md-10">\n            <div class="row">\n              <div class="col-md-6">\n                <span>Title</span>\n                <div class="form-group">\n                  <input class="form-control column-filter" type="text" [(ngModel)]="trackListFilters.trackName" />\n                </div>\n              </div>\n              <div class="col-md-6">\n                <span>Artists</span>\n\n                <div class="form-group">\n                  <input class="form-control column-filter" type="text" [(ngModel)]="trackListFilters.artistName" />\n                </div>\n\n              </div>\n\n            </div>\n            <div class="row">\n              <div class="col-md-2">\n                <p>Editors</p>\n                <p-listbox [checkbox]="true" [multiple]="true" [options]="currencyEditors" [(ngModel)]="trackListFilters.editors" filter="filter" [style]="{\'height\':filterListBoxHeight, \'font-size\': filterListBoxFontSize }"></p-listbox>\n\n              </div>\n              <div class="col-md-2">\n                <p>BPM</p>\n\n                <div class="form-group">\n\n                  <input class="form-control column-filter" [(ngModel)]="trackListFilters.startBpm" type="number" step="1" min="0" maxlength="3" max="250" placeholder="Min" />\n                  <input class="form-control column-filter" [(ngModel)]="trackListFilters.endBpm" min="0" max="250" step="1" maxlength="3" placeholder="Max" />\n                </div>\n                <p>Year</p>\n                <div class="form-group">\n                  <input class="form-control column-filter" [(ngModel)]="trackListFilters.minYear" type="number" step="1" min="1950" maxlength="4" [max]="this.currentYear" placeholder="Min" />\n                  <input class="form-control column-filter" [(ngModel)]="trackListFilters.maxYear" min="1950" [max]="this.currentYear" step="1" maxlength="4" placeholder="Max" />\n                </div>\n\n\n              </div>\n              <div class="col-md-2">\n                <p>Keys</p>\n                <p-listbox [checkbox]="true" [multiple]="true" [options]="keyList" [(ngModel)]="trackListFilters.keys" filter="filter" [style]="{\'height\':filterListBoxHeight, \'font-size\': filterListBoxFontSize }"></p-listbox>\n\n              </div>\n              <div class="col-md-2">\n                <p>Tags</p>\n                <p-listbox [checkbox]="true" [multiple]="true" [options]="tagList" [(ngModel)]="trackListFilters.tags" filter="filter" [style]="{\'height\':filterListBoxHeight, \'font-size\': filterListBoxFontSize }"></p-listbox>\n\n              </div>\n              <div class="col-md-2">\n                <p>Genres</p>\n                <p-listbox [checkbox]="true" [multiple]="true" [options]="genresList" [(ngModel)]="trackListFilters.genres" filter="filter" [style]="{\'height\':filterListBoxHeight, \'font-size\': filterListBoxFontSize }"></p-listbox>\n\n              </div>\n              <div class="col-md-2">\n                <p>Show Columns</p>\n                <p-listbox [checkbox]="true" [multiple]="true" [options]="trackColumns" [(ngModel)]="trackColumnsSelected" [style]="{\'height\':filterListBoxHeight, \'font-size\': filterListBoxFontSize }" (ngModelChange)="refreshTable()"></p-listbox>\n\n              </div>\n\n            </div>\n\n          </div>\n          <div class="col-md-2">\n            <p>Manage Crates</p>\n            <input type="text" class="form-control" name="crateName" [(ngModel)]="trackListFilters.name" placeholder="Crate name" />\n            <button class="btn btn-sm col-md-12 btn-primary crate-button" *ngIf="activeTab != \'library\'" (click)="filterTrackList()">Apply Filters</button>\n            <button class="btn btn-sm col-md-12 btn-primary crate-button" *ngIf="activeTab == \'library\'" (click)="getLibraryForCurrency()">Apply Filters</button>\n\n            <button class="btn btn-sm col-md-12 btn-primary crate-button" (click)="clearCurrentCrate()">Reset</button>\n            <button class="btn btn-sm col-md-12 btn-primary crate-button" *ngIf="trackListFilters._id && activeTab != \'library\'" (click)="updateCrate()" [disabled]="!trackListFilters.name || trackListFilters.name.length == 0">Update Crate</button>\n            <button class="btn btn-sm col-md-12 btn-primary crate-button" *ngIf="trackListFilters._id && activeTab != \'library\'" (click)="createCrate(true)" [disabled]="!trackListFilters.name || trackListFilters.name.length == 0">Save As New Crate</button>\n\n            <button class="btn btn-sm col-md-12 btn-primary crate-button" *ngIf="!trackListFilters._id && activeTab != \'library\'" (click)="createCrate()" [disabled]="!trackListFilters.name || trackListFilters.name.length == 0">Save New Create</button>\n\n          </div>\n        </div>\n      </div>\n      <div class="row">\n        <div class="col-md-12" *ngIf="activeTab != \'transactions\'">\n\n          <p-dataTable #trackTable *ngIf="displayTable" class="table track-list" sortField="publishDate" sortOrder="-1" scrollable="true" [value]="tracks.list" expandableRows="true" [lazy]="true" [totalRecords]="tracks.totalRecords" [emptyMessage]="trackListRestrictions || \'No tracks found.\'"\n            scrollWidth="100%" [rows]="25" [paginator]="!showingTopTracks" [pageLinks]="10" (onLazyLoad)="filterTrackList($event)" [responsive]="true" [rowsPerPageOptions]="[10,25,50]">\n                        <p-column [style]="{\'width\' : \'25px\' }" [hidden]="activeTab != \'download-queue\'">\n\n              <template let-col let-track="rowData" pTemplate="body">\n              <p-checkbox name="tracks" [value]="track" [(ngModel)]="tracksSelected"></p-checkbox>\n\n            </template>\n\n            </p-column>\n\n                        <p-column header="Actions" [style]="{\'width\': \'140px\'}">\n\n              <template let-col let-track="rowData" pTemplate="body">\n                                  <div class="text-left" *ngIf="activeTab == \'download-queue\'">\n                    <i class="fa fa-play-circle bigger text-link" (click)="togglePlayPause(track)" *ngIf="(trackCurrentlyLoaded._id == track._id && !isPlayerPlaying) || trackCurrentlyLoaded._id != track._id"></i>\n                    <i class="fa fa-pause-circle bigger text-link" (click)="togglePlayPause(track)" *ngIf="(trackCurrentlyLoaded._id == track._id && isPlayerPlaying)" ></i>\n                    <i class="fa fa-trash text-link" (click)="removeTrackFromDownloadQueue(track)"></i>\n                    <i class="fa fa-cloud-download text-link" (click)="downloadTrack(track, true)"></i>\n                  </div>\n\n              <div class="text-left" *ngIf="activeTab != \'download-queue\' && activeTab != \'library\'">\n                <i class="fa fa-play-circle bigger text-link" (click)="togglePlayPause(track)" *ngIf="(trackCurrentlyLoaded._id == track._id && !isPlayerPlaying) || trackCurrentlyLoaded._id != track._id"></i>\n                <i class="fa fa-pause-circle bigger text-link" (click)="togglePlayPause(track)" *ngIf="(trackCurrentlyLoaded._id == track._id && isPlayerPlaying)" ></i>\n                <i class="fa text-link" [ngClass]="{\'fa-check-circle\': track.addedToDownloadQueue, \'fa-plus-circle\' : !track.addedToDownloadQueue }" (click)="addTrackToDownloadQueue(track)"></i>\n                \n                <i class="fa fa-cloud-download text-link" (click)="downloadTrack(track, true)"></i>\n                <i class="fa fa-list text-link" (click)="downloadTrack(track, false)"></i>\n\n              </div>\n                            <div class="text-left" *ngIf="activeTab == \'library\'">\n                <i class="fa fa-play-circle bigger text-link" (click)="togglePlayPause(track)" *ngIf="(trackCurrentlyLoaded._id == track._id && !isPlayerPlaying) || trackCurrentlyLoaded._id != track._id"></i>\n                <i class="fa fa-pause-circle bigger text-link" (click)="togglePlayPause(track)" *ngIf="(trackCurrentlyLoaded._id == track._id && isPlayerPlaying)" ></i>\n\n                <i class="fa fa-cloud-download text-link" (click)="downloadTrack(track, true)"></i>\n\n              </div>\n            </template>\n            </p-column>\n\n\n\n            <p-column *ngIf="isTrackColumnSelected(\'added\')" field="publishDate" [sortable]="!showingTopTracks" header="Added">\n              <template let-col let-track="rowData" pTemplate="body">\n              {{ track[col.field] | date: \'MM/dd/y\' }}\n            </template>\n            </p-column>\n            <p-column *ngIf="isTrackColumnSelected(\'editor\')" field="editorPrimaryName" filterMatchMode="in" [sortable]="!showingTopTracks" header="Editor" [style]="{\'width\': trackColumnWidths.editor + \'%\'}">\n            </p-column>\n            <p-column *ngIf="isTrackColumnSelected(\'artist\')" field="artistPrimaryName" [sortable]="!showingTopTracks" header="Artist" [style]="{\'width\': trackColumnWidths.artist + \'%\', \'text-align\':\'left\'}">\n\n              <template let-col let-track="rowData" pTemplate="body">\n              {{ track[col.field] }}<br/><span *ngIf="track.artistsFeaturedDisplayName" class="version-subtitle">{{ track.artistsFeaturedDisplayName }}</span>\n            </template>\n            </p-column>\n            <p-column *ngIf="isTrackColumnSelected(\'bpm\')" field="startBpm" [sortable]="!showingTopTracks" header="BPM" [style]="{\'width\': trackColumnWidths.bpm + \'%\' } ">\n            </p-column>\n            <p-column *ngIf="isTrackColumnSelected(\'key\')" [sortable]="!showingTopTracks" header="Key" [style]="{\'width\': trackColumnWidths.key + \'%\' } ">\n              <template let-col let-track="rowData" pTemplate="body">\n              <span *ngIf="track?.inKey?.camelotKey">{{track?.inKey?.camelotKey}}<br/>{{track?.inKey?.musicKey}}</span>\n              <span *ngIf="!track?.inKey">N/A</span>\n            </template>\n\n            </p-column>\n            <p-column field="name" header="Title" [sortable]="!showingTopTracks" [style]="{\'width\': trackColumnWidths.title + \'%\' , \'text-align\':\'left\'}">\n              <template let-col let-track="rowData" pTemplate="body">\n              {{ track[col.field] }}<br/><span class="version-subtitle">{{ track.version }}</span>\n            </template>\n            </p-column>\n            <p-column *ngIf="isTrackColumnSelected(\'tags\')" header="Tags" [style]="{\'overflow\': \'visible\'}">\n\n              <template let-col let-track="rowData" pTemplate="body">\n              \n              <p class="tag-item" *ngIf="track.cleanDirty" [style.color]="track.cleanDirty.color">{{track.cleanDirty.name}}</p>\n              <p class="tag-item" *ngIf="track.versionType" [style.color]="track.versionType.color">{{track.versionType.name}}</p>\n              <p class="tag-item" *ngIf="track.introType" [style.color]="track.introType.color">{{track.introType.name}}</p>\n              <p class="tag-item" *ngIf="track.outroType" [style.color]="track.outroType.color">{{track.outroType.name}}</p>\n              \n            </template>\n\n            </p-column>\n            <p-column *ngIf="isTrackColumnSelected(\'genres\')" header="Genres" [style]="{\'overflow\': \'visible\'}">\n\n              <template let-col let-track="rowData" pTemplate="body">\n              <p class="well tag-item" *ngFor="let genre of track.genres">{{genre.name}}</p>\n            </template>\n\n            </p-column>\n\n            <p-column *ngIf="isTrackColumnSelected(\'year\')" field="releaseYear" [sortable]="!showingTopTracks" header="Year" [style]="{\'width\': trackColumnWidths.releaseYear + \'%\'}">\n            </p-column>\n            <p-column *ngIf="isTrackColumnSelected(\'time\')" field="trackLength" [sortable]="!showingTopTracks" header="Time" [style]="{\'width\': trackColumnWidths.trackLength + \'%\'}">\n              <template let-col let-track="rowData" pTemplate="body">\n              \n              {{ track.trackLength | secondsToTime }}\n              \n            </template>\n            </p-column>\n                        <p-column expander="true" styleClass="col-icon" [style]="{\'width\' : \'25px\', \'text-align\':\'center\' }"></p-column>\n\n            <template let-track pTemplate="rowexpansion">\n            <div class="row">\n              <div class="col-md-12">\n                <p class="text-left" *ngIf="track.description"><strong>Description</strong></p>\n                <p class="text-left">{{track.description}}</p>\n              </div>\n              <div class="col-md-6" *ngIf="track.tracksInSameReleases && track.tracksInSameReleases.length > 0">\n                                  <p class="text-left"><strong>You Also Get</strong></p>\n\n                    <div class="text-left" *ngFor="let affiliatedTrack of track.tracksInSameReleases">\n                      <p>{{affiliatedTrack?.formattedName}}                 \n                      <i class="fa fa-play-circle bigger text-link" (click)="togglePlayPause(affiliatedTrack)" *ngIf="(trackCurrentlyLoaded._id == affiliatedTrack?._id && !isPlayerPlaying) || trackCurrentlyLoaded._id != affiliatedTrack?._id"></i>\n                      <i class="fa fa-pause-circle bigger text-link" (click)="togglePlayPause(affiliatedTrack)" *ngIf="(trackCurrentlyLoaded._id == affiliatedTrack?._id && isPlayerPlaying)" ></i>                \n                      <i class="fa fa-cloud-download text-link" (click)="downloadTrack(affiliatedTrack, true)"></i>\n</p>\n                </div>\n                    \n                \n                \n              </div>\n              <div class="col-md-6">\n                <p class="text-left"><strong>Original Works Included In This Edit Are</strong></p>\n                <p class="text-left" *ngFor="let originalWork of track.originalWorks">\n                  {{originalWork.displayName}}\n                </p>\n              </div>\n              <div class="col-md-6">\n                &nbsp;\n              </div>\n            </div>\n          </template>\n\n          </p-dataTable>\n        </div>\n        <div class="col-md-12" *ngIf="activeTab == \'transactions\'">\n          <p-dataTable #transactionTable class="table track-list" scrollable="true" [value]="transactions" expandableRows="true" [responsive]="true">\n            <p-column field="name" header="Package"></p-column>\n            <p-column field="basis" header="Basis"></p-column>\n            <p-column field="startTime" header="Purchase Date">\n              <template let-transaction="rowData" pTemplate="body">\n                            {{ transaction.startTime | date: \'medium\' }}\n                          </template>\n            </p-column>\n            <p-column field="endTime" header="Valid Until">\n              <template let-transaction="rowData" pTemplate="body">\n                            {{ transaction.endTime | date: \'medium\' }}\n                          </template>\n\n            </p-column>\n            <p-column field="price" header="Price">\n              <template let-transaction="rowData" pTemplate="body">\n                            {{ transaction.price | currency:\'USD\':true:\'1.2-2\' }}\n                          </template>\n            </p-column>\n            <p-column field="status" header="Payment Status">\n              <template let-transaction="rowData" pTemplate="body">\n                            {{ transaction.status }}\n                          </template>\n            </p-column>\n            <template let-transaction pTemplate="rowexpansion">\n            <div class="row">\n              <div class="col-md-12">\n                  <p *ngFor="let transactionItem of transaction.transactionItems">\n                    Package Item: {{ transactionItem.name }}<br/>\n                    Credits Included: {{ transactionItem.credits }}<br/>\n                  </p>\n                  <p>Transactions marked completed indicate payment has been received and credits have been applied to your account. Transactions marked pending mean payment has not cleared yet and credits have not yet been applied until we receive confirmation from PayPal. If you have any questions about this transaction, please email us at <a href="mailto:store@crooklynclan.net">store@crooklynclan.net</a>.</p>\n              </div>\n            </div>\n          </template>\n            <p-column expander="true" styleClass="col-icon" [style]="{\'width\' : \'25px\', \'text-align\':\'center\' }"></p-column>\n\n          </p-dataTable>\n        </div>\n      </div>\n      <!--<p-contextMenu #cm [model]="contextMenuItemsForTableColumns"></p-contextMenu>-->\n\n    </div>\n  </div>\n  <div bsModal #packagePurchaseModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" [config]="{backdrop: false}" aria-hidden="true">\n    <div class="modal-dialog modal-lg">\n      <div class="modal-content">\n        <div class="modal-header">\n          <button type="button" class="close" (click)="hideModal()" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n        </button>\n          <h4 class="modal-title">Buy more credits</h4>\n        </div>\n        <div class="modal-body">\n          <form (submit)="purchaseCreditPackage(packagePurchaseForm,$event)" #packagePurchaseForm="ngForm">\n            <div class="form-group">\n              <div *ngFor="let package of currencyPackages">\n                <p-radioButton name="selectedPackage" label="{{package.name}} {{package.credits}} for {{package.price | currency:\'USD\':true:\'1.2-2\' }}" [value]="package._id" [(ngModel)]="selectedPackageId"></p-radioButton>\n                <p>This package includes:</p>\n                <ul>\n                  <li *ngFor="let packageItem of package.packageItems">{{packageItem.name}}</li>\n                </ul>\n              </div>\n            </div>\n            <div [hidden]="!currencyPackages || !currencyPackages.length > 0 || !selectedPackageId" class="form-group">\n              <div id="paypal-button"></div>\n\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>';
}});