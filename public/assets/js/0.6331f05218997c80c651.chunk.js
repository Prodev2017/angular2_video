webpackJsonp([0],{1541:function(e,t,a){"use strict";var r=a(0),o=a(5),i=a(8),s=a(369),l=a(1563),n=a(1550),c=a(1549),d=a(1548),u=a(1546),p=a(1547),f=a(240),h=a(370),m=a(370),g=a(241),v=function(){function e(){}return e=__decorate([r.NgModule({imports:[o.CommonModule,i.FormsModule,i.ReactiveFormsModule,s.NgaModule,f.TabsModule,f.DatepickerModule,f.ModalModule,h.DataTableModule,h.OverlayPanelModule,g.FileUploadModule,h.InputSwitchModule,h.AutoCompleteModule,h.DragDropModule,h.CheckboxModule,h.AccordionModule,m.SharedModule,m.MultiSelectModule,m.ListboxModule,h.DropdownModule,m.ButtonModule,m.ToggleButtonModule,m.ContextMenuModule,l.routing],declarations:[p.EditorTracksComponent,n.Editors,d.Uploader,u.EditorProfile,c.WelcomeComponent]}),__metadata("design:paramtypes",[])],e)}();Object.defineProperty(t,"__esModule",{value:!0}),t.default=v},1546:function(e,t,a){"use strict";var r=a(0),o=a(8),i=a(714),s=a(241),l=a(45),n=a(26),c=function(){function e(e,t,a,r,l){this.account=e,this._state=t,this.authService=a,this._zone=l,this.submitted=!1,this.toggleTaxId=!1,this.addressSuggestions=[],this.account.profile=Object.assign(this.account.profile,this.authService.authResponse.profileData),this.account.profile.address=this.account.profile.address||{street1:null,suburb:null,state:null,postcode:null,country:null},this.form=r.group({firstName:[this.account.profile.name.first,o.Validators.compose([o.Validators.required])],lastName:[this.account.profile.name.last,o.Validators.compose([o.Validators.required])],email:[this.account.profile.email,o.Validators.compose([o.Validators.required,i.EmailValidator.validate])],passwords:r.group({password:[""],repeatPassword:[""]},{validator:o.Validators.compose([i.EqualPasswordsValidator.validate("password","repeatPassword"),i.IfHasLengthValidator.validate("password","repeatPassword")])}),stageName:[this.account.profile.stageName,o.Validators.compose([o.Validators.required])],payPalEmailAddress:[this.account.profile.payPalEmailAddress,o.Validators.compose([o.Validators.required,i.EmailValidator.validate])],yearStarted:[this.account.profile.yearStarted,o.Validators.compose([o.Validators.required,o.Validators.minLength(4),o.Validators.maxLength(4)])],addressText:[this.account.profile.addressText,o.Validators.compose([o.Validators.required])],taxId:[this.account.profile.taxId],biography:[this.account.profile.biography,o.Validators.compose([o.Validators.required])],facebookUrl:[this.account.profile.facebookUrl,o.Validators.compose([i.UrlValidator.validate])],twitterUrl:[this.account.profile.twitterUrl,o.Validators.compose([i.UrlValidator.validate])],youtubeUrl:[this.account.profile.youtubeUrl,o.Validators.compose([i.UrlValidator.validate])],soundcloudUrl:[this.account.profile.soundcloudUrl,o.Validators.compose([i.UrlValidator.validate])],instagramUrl:[this.account.profile.instagramUrl,o.Validators.compose([i.UrlValidator.validate])],hometown:[this.account.profile.hometown,o.Validators.compose([o.Validators.required])],currentLocation:[this.account.profile.currentLocation,o.Validators.compose([o.Validators.required])],googleUrl:[this.account.profile.googleUrl,o.Validators.compose([i.UrlValidator.validate])],linkedinUrl:[this.account.profile.linkedinUrl,o.Validators.compose([i.UrlValidator.validate])],youTubeFeaturedVideoUrl:[this.account.profile.youTubeFeaturedVideoUrl,o.Validators.compose([i.UrlValidator.validate])],youTubeFeaturedVideoDescription:[this.account.profile.youTubeFeaturedVideoDescription],soundCloudFeaturedTrackUrl1:[this.account.profile.soundCloudFeaturedTrackUrl1,o.Validators.compose([i.UrlValidator.validate])],soundCloudFeaturedTrackUrl1Description:[this.account.profile.soundCloudFeaturedTrackUrl1Description],soundCloudFeaturedTrackUrl2:[this.account.profile.soundCloudFeaturedTrackUrl2,o.Validators.compose([i.UrlValidator.validate])],soundCloudFeaturedTrackUrl2Description:[this.account.profile.soundCloudFeaturedTrackUrl2Description],soundCloudFeaturedTrackUrl3:[this.account.profile.soundCloudFeaturedTrackUrl3,o.Validators.compose([i.UrlValidator.validate])],soundCloudFeaturedTrackUrl3Description:[this.account.profile.soundCloudFeaturedTrackUrl3Description],photo:[this.account.profile.photo.url,o.Validators.compose([o.Validators.required])],logoSquare:[this.account.profile.logoSquare.url,o.Validators.compose([o.Validators.required])],logoLong:[this.account.profile.logoLong.url,o.Validators.compose([o.Validators.required])],backgroundImage:[this.account.profile.backgroundImage.url,o.Validators.compose([o.Validators.required])]}),this.firstName=this.form.controls.firstName,this.lastName=this.form.controls.lastName,this.email=this.form.controls.email,this.passwords=this.form.controls.passwords,this.password=this.passwords.controls.password,this.repeatPassword=this.passwords.controls.repeatPassword,this.stageName=this.form.controls.stageName,this.yearStarted=this.form.controls.yearStarted,this.payPalEmailAddress=this.form.controls.payPalEmailAddress,this.biography=this.form.controls.biography,this.facebookUrl=this.form.controls.facebookUrl,this.twitterUrl=this.form.controls.twitterUrl,this.youtubeUrl=this.form.controls.youtubeUrl,this.soundcloudUrl=this.form.controls.soundcloudUrl,this.googleUrl=this.form.controls.googleUrl,this.instagramUrl=this.form.controls.instagramUrl,this.linkedinUrl=this.form.controls.linkedinUrl,this.addressText=this.form.controls.addressText,this.hometown=this.form.controls.hometown,this.currentLocation=this.form.controls.currentLocation,this.photo=this.form.controls.photo,this.logoSquare=this.form.controls.logoSquare,this.logoLong=this.form.controls.logoLong,this.backgroundImage=this.form.controls.backgroundImage,this.soundCloudFeaturedTrackUrl1=this.form.controls.soundCloudFeaturedTrackUrl1,this.soundCloudFeaturedTrackUrl1Description=this.form.controls.soundCloudFeaturedTrackUrl1Description,this.soundCloudFeaturedTrackUrl2=this.form.controls.soundCloudFeaturedTrackUrl2,this.soundCloudFeaturedTrackUrl2Description=this.form.controls.soundCloudFeaturedTrackUrl2Description,this.soundCloudFeaturedTrackUrl3=this.form.controls.soundCloudFeaturedTrackUrl3,this.soundCloudFeaturedTrackUrl3Description=this.form.controls.soundCloudFeaturedTrackUrl3Description,this.photoUploader=new s.FileUploader({url:"/api/v1/members/account/update",autoUpload:!0,itemAlias:"photo_upload"}),this.logoSquareUploader=new s.FileUploader({url:"/api/v1/members/account/update",autoUpload:!0,itemAlias:"logoSquare_upload"}),this.logoLongUploader=new s.FileUploader({url:"/api/v1/members/account/update",autoUpload:!0,itemAlias:"logoLong_upload"}),this.backgroundImageUploader=new s.FileUploader({url:"/api/v1/members/account/update",autoUpload:!0,itemAlias:"backgroundImage_upload"})}return e.prototype.ngOnInit=function(){var e=this;this.photoUploader.onSuccessItem=function(t,a){var r=JSON.parse(a);e.account.profile=r.User,e.photo.setValue(e.account.profile.photo.url),e._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Photo Updated",detail:"Your changes have been saved."}),e._state.notifyDataChanged("profile.photo.updated",e.account.profile),e._state.notifyDataChanged("spinner.hide",{})},this.logoSquareUploader.onSuccessItem=function(t,a){var r=JSON.parse(a);e.account.profile=r.User,e.logoSquare.setValue(e.account.profile.logoSquare.url),e._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Square Logo Updated",detail:"Your changes have been saved."}),e._state.notifyDataChanged("spinner.hide",{})},this.logoLongUploader.onSuccessItem=function(t,a){var r=JSON.parse(a);e.account.profile=r.User,e.logoLong.setValue(e.account.profile.logoLong.url),e._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Long Logo Updated",detail:"Your changes have been saved."}),e._state.notifyDataChanged("spinner.hide",{})},this.backgroundImageUploader.onSuccessItem=function(t,a){var r=JSON.parse(a);e.account.profile=r.User,e.backgroundImage.setValue(e.account.profile.backgroundImage.url),e._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Background Image Updated",detail:"Your changes have been saved."}),e._state.notifyDataChanged("spinner.hide",{})},this.backgroundImageUploader.onAfterAddingFile=function(t,a){if("image/png"==t._file.type||"image/jpg"==t._file.type||"image/jpeg"==t._file.type)e._state.notifyDataChanged("spinner.show",{});else{var r=e.backgroundImageUploader.queue.findIndex(function(e){return e==t});e.backgroundImageUploader.queue[r].isError=!0,e.backgroundImageUploader.queue[r].isUploaded=!0,e.backgroundImageUploader.queue[r].isUploading=!1,e.backgroundImageUploader.queue[r].isReady=!1,e._state.notifyDataChanged("growlNotifications.update",{severity:"error",summary:"Invalid File Type",detail:"PNG or JPG files only."})}},this.logoLongUploader.onAfterAddingFile=function(t,a){if("image/png"==t._file.type||"image/jpg"==t._file.type||"image/jpeg"==t._file.type)e._state.notifyDataChanged("spinner.show",{});else{var r=e.logoLongUploader.queue.findIndex(function(e){return e==t});e.logoLongUploader.queue[r].isError=!0,e.logoLongUploader.queue[r].isUploaded=!0,e.logoLongUploader.queue[r].isUploading=!1,e.logoLongUploader.queue[r].isReady=!1,e._state.notifyDataChanged("growlNotifications.update",{severity:"error",summary:"Invalid File Type",detail:"PNG or JPG files only."})}},this.logoSquareUploader.onAfterAddingFile=function(t,a){if("image/png"==t._file.type||"image/jpg"==t._file.type||"image/jpeg"==t._file.type)e._state.notifyDataChanged("spinner.show",{});else{var r=e.logoSquareUploader.queue.findIndex(function(e){return e==t});e.logoSquareUploader.queue[r].isError=!0,e.logoSquareUploader.queue[r].isUploaded=!0,e.logoSquareUploader.queue[r].isUploading=!1,e.logoSquareUploader.queue[r].isReady=!1,e._state.notifyDataChanged("growlNotifications.update",{severity:"error",summary:"Invalid File Type",detail:"PNG or JPG files only."})}},this.photoUploader.onAfterAddingFile=function(t,a){if("image/png"==t._file.type||"image/jpg"==t._file.type||"image/jpeg"==t._file.type)e._state.notifyDataChanged("spinner.show",{});else{var r=e.photoUploader.queue.findIndex(function(e){return e==t});e.photoUploader.queue[r].isError=!0,e.photoUploader.queue[r].isUploaded=!0,e.photoUploader.queue[r].isUploading=!1,e.photoUploader.queue[r].isReady=!1,e._state.notifyDataChanged("growlNotifications.update",{severity:"error",summary:"Invalid File Type",detail:"PNG or JPG files only."})}}},e.prototype.toggleTaxIdField=function(){this.toggleTaxId=!this.toggleTaxId,this.taxId.setValue(null)},e.prototype.updateProfile=function(e){var t=this,a=[];Object.keys(this.form.controls);for(var r in this.form.controls)this.form.controls[r].valid||a.push(r);a.length>0&&!this.form.valid?this._state.notifyDataChanged("growlNotifications.update",{severity:"error",summary:"Missing or Incomplete Fields",detail:"Please ensure you have the correct values set for the following fields: "+a.join(", ")}):this.account.updateProfile(e).subscribe(function(e){t.account.profile=e,t._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Profile Updated",detail:"Your changes have been saved."})})},__decorate([r.ViewChild("addressAutocomplete"),__metadata("design:type","function"==typeof(t="undefined"!=typeof r.ElementRef&&r.ElementRef)&&t||Object)],e.prototype,"addressAutocomplete",void 0),e=__decorate([r.Component({selector:"editor-profile",encapsulation:r.ViewEncapsulation.None,template:a(1585),styles:[a(1572)]}),__metadata("design:paramtypes",["function"==typeof(c="undefined"!=typeof l.Account&&l.Account)&&c||Object,"function"==typeof(d="undefined"!=typeof n.GlobalState&&n.GlobalState)&&d||Object,"function"==typeof(u="undefined"!=typeof l.AuthService&&l.AuthService)&&u||Object,"function"==typeof(p="undefined"!=typeof o.FormBuilder&&o.FormBuilder)&&p||Object,"function"==typeof(f="undefined"!=typeof r.NgZone&&r.NgZone)&&f||Object])],e);var t,c,d,u,p,f}();t.EditorProfile=c},1547:function(e,t,a){"use strict";var r=a(0),o=a(26),i=a(68),s=a(37),l=a(45),n=a(18),c=function(){function e(e,t,a,r,o,i,s,l,n,c,d,u,p){var f=this;this.tracks=e,this._state=t,this.router=a,this.http=r,this.route=o,this.currency=i,this.account=s,this.appState=l,this.editors=n,this.keys=c,this.authService=d,this.genres=u,this.tags=p,this.query="",this.trackCurrentlyLoaded={},this.tracksToPurchase=[],this.currencyPackages=[],this.showCrateEditor=!1,this.tableHeight="60vh",this.activeStoreTab="Charts",this.currentYear=(new Date).getFullYear(),this.downloadQueue={tracks:[]},this.currentlyAppliedCrate={name:""},this.activeTab="crates",this.showFilters=!1,this.filterListBoxHeight="160px",this.filterListBoxFontSize="10px",this.accountingPeriods=[],this.toggleTrackSelection=!1,this.tracksSelected=[],this.collections=[],this.loaded=!1,this.accountingData={},this.events=[],this.newCollection={name:"",description:""},this.trackColumns=[{label:"Added",value:"added"},{label:"Editor",value:"editor"},{label:"Artist",value:"artist"},{label:"BPM",value:"bpm"},{label:"Key",value:"key"},{label:"Tags",value:"tags"},{label:"Genres",value:"genres"},{label:"Download Count",value:"downloadCountForPeriod"},{label:"Year",value:"year"},{label:"Time",value:"time"}],this.trackColumnsSelected=["added","editor","artist","bpm","key","tags","genres","year","time","downloadCountForPeriod"],this.loadedCollection={name:null,description:null,tracks:[],_id:null},this.currencyEditors=[],this.keyList=[],this.tagList=[],this.genresList=[],this.trackListFilters={minYear:1950,maxYear:(new Date).getFullYear(),editors:[],artistName:"",startBpm:0,endBpm:250,keys:[],tags:[],genres:[],trackName:"",sortField:"publishDate",sortOrder:1,rows:25,_id:null,name:null,accountingPeriod:null,type:"collection",description:null,tracks:[]},this.trackColumnWidths={added:13,editor:10,artist:12,bpm:5,key:5,title:15,tags:10,genres:10,releaseYear:5,trackLength:5,actions:5},this.dataLoading=!1,this.keys.getKeys(),this.tags.getTags(),this.genres.getGenres(),this.events.push(this._state.subscribe("keys.loaded",function(e){f.keyList=f.keys.list.map(function(e){return{label:e.name,value:e._id}})})),this.events.push(this._state.subscribe("tags.loaded",function(e){f.tagList=f.tags.list.map(function(e){return{label:e.name,value:e._id}})})),this.events.push(this._state.subscribe("genres.loaded",function(e){f.genresList=f.genres.list.map(function(e){return{label:e.name,value:e.id}})}));this.events.push(this._state.subscribe("currency.changed",function(e){f.setCurrency(e)})),this._state.notifyDataChanged("menu.activeLink",{title:"Track List"}),this.events.push(this._state.subscribe("trackList.columnsChanged",function(e){console.log(e),f.trackColumnsSelected=e.selectedColumns})),this.events.push(this._state.subscribe("player.play",function(){f.isPlayerPlaying=!0})),this.events.push(this._state.subscribe("player.pause",function(){f.isPlayerPlaying=!1})),this.events.push(this._state.subscribe("player.toggle",function(e){f.trackCurrentlyLoaded=e}))}return e.prototype.setCurrency=function(e){this._state.notifyDataChanged("spinner.show",{}),console.log("currency changed on editor track list"),this.loadTracksAndAccounting(e),this.updateCollections(e)},e.prototype.updateCollections=function(e){var t=this;this._state.notifyDataChanged("spinner.show",{}),this.account.getAccountData().subscribe(function(a){t.currency.getMyEditorCollections(e._id,a.User._id).subscribe(function(e){t.collections=e.Collections.map(function(e){return{label:e.name,value:e}}),t._state.notifyDataChanged("spinner.hide",{})})})},e.prototype.loadTracksAndAccounting=function(e){var t=this;this._state.notifyDataChanged("spinner.show",{});var a=e._id;this.selectedCurrencyId=a,this.selectedCurrency=e,a?this.currency.getAccountingPeriods(this.selectedCurrencyId).subscribe(function(e){t.accountingPeriods=e.AccountingPeriods.map(function(e){return{label:e.name,value:e}}),t.selectedAccountingPeriod=e.AccountingPeriods[0],t.trackListFilters.accountingPeriod=e.AccountingPeriods&&e.AccountingPeriods.length>0?e.AccountingPeriods[0]._id:null,t.filterTrackList()}):console.log("cannot find a currency id")},e.prototype.adjustTableHeight=function(){var e=90;if(this.trackTable){var t=this.trackTable.el.nativeElement.querySelector(".ui-datatable-scrollable-header"),a=this.trackTable.el.nativeElement.querySelector(".ui-datatable-scrollable-body"),r=this.trackTable.el.nativeElement.offsetParent.offsetParent.offsetParent.clientHeight;if(t&&t.clientHeight){var o=t.clientHeight;if(this.showFilters)var i=r-e-o-290;else var i=r-e-o-40;a.style.maxHeight=i+"px",a.style.height=i+"px"}}if(this.sidebar){var r=this.sidebar.nativeElement.offsetParent.offsetParent.offsetParent.clientHeight,s=r-e;s-=40,this.sidebar.nativeElement.style.maxHeight=s+"px",this.sidebar.nativeElement.style.height=s+"px"}},e.prototype.ngDoCheck=function(){this.adjustTableHeight()},e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.setCurrency(this.currency.selectedCurrency)},e.prototype.ngOnDestroy=function(){console.log("the events that we will unsubscribe from",this.events);for(var e=0;e<this.events.length;e++)this._state.unsubscribe(this.events[e].event,this.events[e].callback);this.events=[]},e.prototype.selectAccountingPeriod=function(){console.log(this.selectedAccountingPeriod),this.trackListFilters.accountingPeriod=this.selectedAccountingPeriod._id,this.filterTrackList()},e.prototype.clearCollectionFromView=function(){this.trackListFilters={minYear:1950,maxYear:(new Date).getFullYear(),editors:[],artistName:"",startBpm:0,endBpm:250,keys:[],tags:[],genres:[],trackName:"",sortField:"",sortOrder:1,rows:25,_id:null,name:null,accountingPeriod:null,type:"collection",description:null,tracks:[]},this.loadedCollection={name:null,description:null,tracks:[],_id:null},this.filterTrackList()},e.prototype.filterTrackList=function(e){var t=this;e=e||{},console.log("this is the event object",e),e&&e.sortField&&(this.trackListFilters.sortField=e.sortField,this.trackListFilters.sortOrder=e.sortOrder),e&&e.rows&&(this.trackListFilters.rows=e.rows,0!=e.first?this.trackListFilters.currentPage=1+e.first/this.trackListFilters.rows:this.trackListFilters.currentPage=1),this.selectedCurrencyId&&(this.tracksSelected&&this.tracksSelected.length>0?confirm("You currently have tracks selected. If you proceed, you will lose the selections you have made. Do you wish to proceed anyway?")&&(this.dataLoading=!0,this._state.notifyDataChanged("spinner.show",{}),this.account.getMyUploadedTracks(this.selectedCurrencyId,this.trackListFilters,this.trackListFilters.currentPage).subscribe(function(e){t.tracks.isUpdating=!1,t.tracks.currentPage=e.Tracks.currentPage,t.tracks.totalPages=e.Tracks.totalPages,t.tracks.totalRecords=e.Tracks.total,t.tracks.list=e.Tracks.results,t.accountingData=e.Accounting,t.tracksSelected=[],t._state.notifyDataChanged("spinner.hide",{})})):(this.dataLoading=!0,this._state.notifyDataChanged("spinner.show",{}),this.account.getMyUploadedTracks(this.selectedCurrencyId,this.trackListFilters,this.trackListFilters.currentPage).subscribe(function(e){t.tracks.isUpdating=!1,t.tracks.currentPage=e.Tracks.currentPage,t.tracks.totalPages=e.Tracks.totalPages,t.tracks.totalRecords=e.Tracks.total,t.tracks.list=e.Tracks.results,t.accountingData=e.Accounting,t._state.notifyDataChanged("spinner.hide",{})}))),this.showFilters=!1},e.prototype.togglePlayPause=function(e){var t={name:e.name||"[title not set]",version:e.version||"[version not set]",artistPrimaryName:e.artistPrimaryName||"[artist not set]",artistsFeaturedPrimaryName:e.artistsFeaturedPrimaryName,_id:e._id,url:e.publishedLowBitRateFile.url||e.hiBitRateFile.url,waveformUrl:e.waveformImageSnippetFileUrl,fileType:e.fileType};console.log(e),this._state.notifyDataChanged("player.toggle",t)},e.prototype.toggleFilterPanel=function(){this.showFilters=!this.showFilters},e.prototype.getCollection=function(e){var t=this;this._state.notifyDataChanged("spinner.show",{}),this.currency.getCollection(this.selectedCurrencyId,e).subscribe(function(e){t.tracks.currentPage=1,t.tracks.totalPages=1,t.tracks.totalRecords=e.Collection.tracks.length,t.tracks.list=e.Collection.tracks,t.loadedCollection=e.Collection,t.tracksSelected=[],t._state.notifyDataChanged("spinner.hide",{})})},e.prototype.isTrackColumnSelected=function(e){return this.trackColumnsSelected.indexOf(e)!==-1},e.prototype.createCollection=function(){var e=this,t=this.tracksSelected.map(function(e){return e._id});this.newCollection.tracks=t,this._state.notifyDataChanged("spinner.show",{}),this.currency.createCollection(this.selectedCurrencyId,this.newCollection).subscribe(function(t){e.loadedCollection=t.Collection,e.tracksSelected=[],e.newCollection={name:"",description:""},e.tracks.list=t.Collection.tracks,e.updateCollections(e.selectedCurrency),e._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Collection Created",detail:""}),e._state.notifyDataChanged("spinner.hide",{})})},e.prototype.removeTracksFromCollection=function(){for(var e=this,t=0;t<this.tracksSelected.length;t++){var a=this.tracks.list.findIndex(function(a){return e.tracksSelected[t]._id==a._id});this.tracks.list.splice(a,1)}this.tracksSelected=[],this.updateCollection()},e.prototype.removeCollection=function(e){var t=this;confirm("Are you sure you would like to delete this collection?")&&(this._state.notifyDataChanged("spinner.show",{}),this.currency.removeCollection(e,this.selectedCurrencyId).subscribe(function(e){t.loadedCollection={},t.selectedCollection={},t.updateCollections(t.selectedCurrency),t._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Collection Removed",detail:""}),t.clearCurrentCrate()}))},e.prototype.updateCollection=function(){var e=this;this.loadedCollection.tracks=this.tracks.list,this._state.notifyDataChanged("spinner.show",{}),this.currency.updateCollection(this.selectedCurrencyId,this.loadedCollection).subscribe(function(t){e._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Collection Updated",detail:""}),e.getCollection(e.loadedCollection._id),e._state.notifyDataChanged("spinner.hide",{})})},e.prototype.clearCurrentCrate=function(){this.trackListFilters={minYear:1950,maxYear:(new Date).getFullYear(),editors:[],artistName:"",startBpm:0,endBpm:250,keys:[],tags:[],genres:[],trackName:"",sortField:"publishDate",sortOrder:-1,rows:25,_id:null,name:null},this.selectedCollection={},this.filterTrackList()},e.prototype.addTracksToCollection=function(){var e=this,t=this.tracksSelected.map(function(e){return e._id}),a=this.loadedCollection.tracks.map(function(e){return e._id}),r=Object.assign({},this.loadedCollection);r.tracks=[].concat(t,a),this._state.notifyDataChanged("spinner.show",{}),this.currency.updateCollection(this.selectedCurrencyId,r).subscribe(function(t){e._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Collection Updated",detail:""}),e.getCollection(e.loadedCollection._id),e._state.notifyDataChanged("spinner.hide",{})})},__decorate([r.ViewChild("trackTable"),__metadata("design:type",Object)],e.prototype,"trackTable",void 0),__decorate([r.ViewChild("sidebar"),__metadata("design:type",Object)],e.prototype,"sidebar",void 0),e=__decorate([r.Component({selector:"editor-tracks",template:a(1586),styles:[a(1573)]}),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof l.TrackService&&l.TrackService)&&t||Object,"function"==typeof(c="undefined"!=typeof o.GlobalState&&o.GlobalState)&&c||Object,"function"==typeof(d="undefined"!=typeof n.Router&&n.Router)&&d||Object,"function"==typeof(u="undefined"!=typeof s.Http&&s.Http)&&u||Object,"function"==typeof(p="undefined"!=typeof n.ActivatedRoute&&n.ActivatedRoute)&&p||Object,"function"==typeof(f="undefined"!=typeof l.Currency&&l.Currency)&&f||Object,"function"==typeof(h="undefined"!=typeof l.Account&&l.Account)&&h||Object,"function"==typeof(m="undefined"!=typeof i.AppState&&i.AppState)&&m||Object,"function"==typeof(g="undefined"!=typeof l.EditorService&&l.EditorService)&&g||Object,"function"==typeof(v="undefined"!=typeof l.KeyService&&l.KeyService)&&v||Object,"function"==typeof(y="undefined"!=typeof l.AuthService&&l.AuthService)&&y||Object,"function"==typeof(k="undefined"!=typeof l.Genres&&l.Genres)&&k||Object,"function"==typeof(b="undefined"!=typeof l.TagService&&l.TagService)&&b||Object])],e);var t,c,d,u,p,f,h,m,g,v,y,k,b}();t.EditorTracksComponent=c},1548:function(e,t,a){"use strict";var r=a(0),o=a(26),i=a(68),s=a(718),l=a(717),n=a(45),c=a(241),d=a(1562),u=a(242),p=a(95),f=function(){function e(e,t,a,r,o,i,s,l,n,c){var d=this;this._state=e,this.uploadService=t,this.currency=a,this.tags=r,this.genres=o,this.appState=i,this.zone=s,this.releases=l,this.publishService=n,this.authService=c,this.trackCurrentlyLoaded={},this.releasesList=[],this.isPlayerPlaying=!1,this.currentProgress=0,this.expandedRows=[],this.isSubmitAllInProgress=!1,this.tracksAndReleasesReady=!1,this.dropzoneColorByCurrency="#000000",this.dropzoneActive=!1,this.tracksToSubmit=[],this.releasesToSubmit=[],this.tracksReadyToPublishCount=0,this.publishButtonDisabled=!1,this.events=[],this.events.push(this._state.subscribe("releases.updated",function(e){d.checkTrackAndReleasesValidity(),d.updateTracksByValidationStatus()})),this.events.push(this._state.subscribe("track.updatingFinished",function(e){d.checkTrackAndReleasesValidity(),d.updateTracksByValidationStatus()})),this.events.push(this._state.subscribe("releases.created",function(e){d.addSelectedTracksToRelease(e.release)})),this.events.push(this._state.subscribe("videojs.progressChanged",function(e){d.addSelectedTracksToRelease(e.release)})),this.events.push(this._state.subscribe("player.play",function(){d.isPlayerPlaying=!0})),this.events.push(this._state.subscribe("player.pause",function(){d.isPlayerPlaying=!1})),this.events.push(this._state.subscribe("player.toggle",function(e){d.trackCurrentlyLoaded=e})),this.events.push(this._state.subscribe("currency.changed",function(e){console.log("currency changed on uploader"),d.setupUploaderForCurrency(e)}))}return e.prototype.addSelectedTracksToRelease=function(e){var t=this;this.tracksToSubmit=this.tracksToSubmit.filter(function(e){return e.crooklynClanv1AutoMigrated&&t._state.notifyDataChanged("growlNotifications.update",{severity:"error",summary:"Cannot Add v1 Migrated Track to Release",detail:e.formattedName+" cannot be added to a release because it is a migrated track from v1."}),!e.crooklynClanv1AutoMigrated}),this.tracksToSubmit.forEach(function(a){t.assignTrackToRelease(a,e)}),this.tracksToSubmit=[]},e.prototype.unselectAllTracks=function(){this.tracksToSubmit=[]},e.prototype.adjustTableHeight=function(){var e=document.querySelector(".uploader-tabs > .tab-content .tab-pane.active .ui-datatable-scrollable-header");if(e){var t=e.getBoundingClientRect().height+e.getBoundingClientRect().top,a=document.querySelector(".fixed-height-body"),r=a.getBoundingClientRect().top,o=a.getBoundingClientRect().height,i=r+o,s=i-t-30;this.tableBody&&(this.tableScrollHeight=this.tableBody.el.nativeElement.querySelector(".ui-datatable-scrollable-body").style.maxHeight=s+"px",this.tableScrollHeight=this.tableBody.el.nativeElement.querySelector(".ui-datatable-scrollable-body").style.height=s+"px"),this.migrationTrackTable&&(this.tableScrollHeight=this.migrationTrackTable.el.nativeElement.querySelector(".ui-datatable-scrollable-body").style.maxHeight=s+"px",this.tableScrollHeight=this.migrationTrackTable.el.nativeElement.querySelector(".ui-datatable-scrollable-body").style.height=s+"px"),this.releasesDataTable&&(this.tableScrollHeight=this.releasesDataTable.el.nativeElement.querySelector(".ui-datatable-scrollable-body").style.maxHeight=s+"px",this.tableScrollHeight=this.releasesDataTable.el.nativeElement.querySelector(".ui-datatable-scrollable-body").style.height=s+"px")}this.readyTracksTable&&(this.tableScrollHeight=this.readyTracksTable.el.nativeElement.querySelector(".ui-datatable-scrollable-body").style.maxHeight=s+"px",this.tableScrollHeight=this.readyTracksTable.el.nativeElement.querySelector(".ui-datatable-scrollable-body").style.height=s+"px")},e.prototype.ngDoCheck=function(){this.adjustTableHeight()},e.prototype.ngOnDestroy=function(){console.log("the events that we will unsubscribe from",this.events);for(var e=0;e<this.events.length;e++)this._state.unsubscribe(this.events[e].event,this.events[e].callback);this.events=[],clearInterval(this.pollingProcessId)},e.prototype.runAudioFileUploaderConfiguration=function(){var e=this;this.fileUploader.onAfterAddingFile=function(t){var a=new FileReader;a.onload=function(){var r=e.fileUploader.getIndexOfItem(t);if(t._file.trackIdToReplace&&(e.fileUploader.queue[r].alias="replace_track_for_"+t._file.trackIdToReplace||"file"),"audio/mp3"!=t._file.type)e.fileUploader.queue[r].isError=!0,e.fileUploader.queue[r].isReady=!1,e.fileUploader.queue[r].isUploaded=!0,e.fileUploader.queue[r].isUploading=!1,e.fileUploader.queue[r].errorMessage="Invalid file type: must be an MP3",e.uploadService.rejectedTracks.results.push({originalFileName:t._file.name,message:{title:e.fileUploader.queue[r].errorMessage}}),e._state.notifyDataChanged("growlNotifications.update",{severity:"error",summary:"Track Rejected",detail:t._file.name+": "+e.fileUploader.queue[r].errorMessage});else{var o,i=d.mp3Parser.readTags(new DataView(a.result));if(i&&i.length>0)for(var s=0;s<i.length;s++)i[s].header.bitrate&&(o=i[s].header.bitrate);i&&i.length>0&&o<320?(e.fileUploader.queue[r].isError=!0,e.fileUploader.queue[r].isReady=!1,e.fileUploader.queue[r].isUploaded=!0,e.fileUploader.queue[r].isUploading=!1,e.fileUploader.queue[r].errorMessage="Bit rate is below the 320Kbps minimum.",e.uploadService.rejectedTracks.results.push({originalFileName:t._file.name,message:{title:e.fileUploader.queue[r].errorMessage}}),e._state.notifyDataChanged("growlNotifications.update",{severity:"error",summary:"Track Rejected",detail:t._file.name+": "+e.fileUploader.queue[r].errorMessage})):0==i.length?(e.fileUploader.queue[r].isError=!0,e.fileUploader.queue[r].isReady=!1,e.fileUploader.queue[r].isUploaded=!0,e.fileUploader.queue[r].isUploading=!1,e.fileUploader.queue[r].errorMessage="Invalid MP3 file",e.uploadService.rejectedTracks.push({originalFileName:t._file.name,message:{title:e.fileUploader.queue[r].errorMessage}}),e._state.notifyDataChanged("growlNotifications.update",{severity:"error",summary:"Track Rejected",detail:t._file.name+": "+e.fileUploader.queue[r].errorMessage})):(e.fileUploader.queue[r].url="/api/v1/members/track/createPreview?currencyId="+e.selectedCurrencyId,e.uploadService.trackList.results.push(e.fileUploader.queue[r]),e.updateTracksByValidationStatus(),e.fileUploader.queue[r].upload())}},a.readAsArrayBuffer(t.some)},this.fileUploader.onProgressItem=function(t,a){e.zone.run(function(){var r=e.uploadService.trackList.results.indexOf(t);e.uploadService.trackList.results[r].actualProgress=a})},this.fileUploader.onCompleteItem=function(t,a,r,o){0==e.fileUploader.getNotUploadedItems().length;var i=JSON.parse(a);if(i.error)e.uploadService.rejectedTracks.results.push(i);else{var s=i.Track,l=e.uploadService.trackList.results.indexOf(t);e.uploadService.trackList.results[l]=s;for(var n in s)e.uploadService.trackValidationRequirements.hasOwnProperty(n)&&e.uploadService.validateTrackField(n,s[n],l);e.uploadService.updateTrackValidationStatus(l),e.checkTrackAndReleasesValidity(),e.updateTracksByValidationStatus(),e._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Track Uploaded Successfully",detail:s.originalFileName})}},this.fileUploader.uploadAll=function(){var t=e.fileUploader.getNotUploadedItems().filter(function(e){return!e.isUploading});if(t.length){t.map(function(e){return e._prepareToUploading()});for(var a=0;a<t.length;a++)t[a].upload(),e.fileUploader.isUploading=!1}}},e.prototype.runVideoFileUploaderConfiguration=function(){var e=this;this.videoFileUploader.onAfterAddingFile=function(t){
var a=new FileReader;a.onload=function(){var a=e.videoFileUploader.getIndexOfItem(t);if(t._file.trackIdToReplace&&(e.videoFileUploader.queue[a].alias="replace_track_for_"+t._file.trackIdToReplace||"file"),"video/mp4"!=t._file.type)e.videoFileUploader.queue[a].isError=!0,e.videoFileUploader.queue[a].isReady=!1,e.videoFileUploader.queue[a].isUploaded=!0,e.videoFileUploader.queue[a].isUploading=!1,e.videoFileUploader.queue[a].errorMessage="Invalid file type: must be an MP4 video",e.uploadService.rejectedTracks.results.push({originalFileName:t._file.name,message:{title:e.videoFileUploader.queue[a].errorMessage}}),e._state.notifyDataChanged("growlNotifications.update",{severity:"error",summary:"Track Rejected",detail:t._file.name+": "+e.videoFileUploader.queue[a].errorMessage});else{var r,o=1048576,i=t.some.size,s=0,l=null,n=(new Date,new MP4Box(!1));n.onError=function(e){console.log("mp4box failed to parse data.")};var c=function(e,t){t.fileStart=s,e.appendBuffer(t)},d=function(e){return null!=e.target.error?void console.log("Read error: "+e.target.error):(c(n,e.target.result),s+=e.target.result.byteLength,s>=i?void n.flush():void l(s,o,t.some))},l=function(e,t,a){var r=new FileReader,o=a.slice(e,t+e);r.onload=d,r.readAsArrayBuffer(o)};l(s,o,t.some),n.onReady=function(o){console.log("mp4box info",o),o&&o.audioTracks&&0===o.audioTracks.length?(e.videoFileUploader.queue[a].isError=!0,e.videoFileUploader.queue[a].isReady=!1,e.videoFileUploader.queue[a].isUploaded=!0,e.videoFileUploader.queue[a].isUploading=!1,e.videoFileUploader.queue[a].errorMessage="Video track does not have an audio track.",e.uploadService.rejectedTracks.results.push({originalFileName:t._file.name,message:{title:e.videoFileUploader.queue[a].errorMessage}}),e._state.notifyDataChanged("growlNotifications.update",{severity:"error",summary:"Track Rejected",detail:t._file.name+": "+e.videoFileUploader.queue[a].errorMessage})):o&&o.audioTracks&&o.audioTracks[0]&&o.audioTracks[0].bitrate<3e5?(e.videoFileUploader.queue[a].isError=!0,e.videoFileUploader.queue[a].isReady=!1,e.videoFileUploader.queue[a].isUploaded=!0,e.videoFileUploader.queue[a].isUploading=!1,e.videoFileUploader.queue[a].errorMessage="Audio bitrate is below the 320Kbps minimum.",e.uploadService.rejectedTracks.results.push({originalFileName:t._file.name,message:{title:e.videoFileUploader.queue[a].errorMessage}}),e._state.notifyDataChanged("growlNotifications.update",{severity:"error",summary:"Track Rejected",detail:t._file.name+": "+e.videoFileUploader.queue[a].errorMessage})):o&&o.videoTracks&&o.videoTracks[0]&&o.videoTracks[0].bitrate<2e6?(e.videoFileUploader.queue[a].isError=!0,e.videoFileUploader.queue[a].isReady=!1,e.videoFileUploader.queue[a].isUploaded=!0,e.videoFileUploader.queue[a].isUploading=!1,e.videoFileUploader.queue[a].errorMessage="Video bitrate is below the 2000Kbps minimum.",e.uploadService.rejectedTracks.push({originalFileName:t._file.name,message:{title:e.videoFileUploader.queue[a].errorMessage}}),e._state.notifyDataChanged("growlNotifications.update",{severity:"error",summary:"Track Rejected",detail:t._file.name+": "+e.videoFileUploader.queue[a].errorMessage})):o&&o.videoTracks&&o.videoTracks[0]&&(o.videoTracks[0].track_height<540||o.videoTracks[0].track_width<960)?(e.videoFileUploader.queue[a].isError=!0,e.videoFileUploader.queue[a].isReady=!1,e.videoFileUploader.queue[a].isUploaded=!0,e.videoFileUploader.queue[a].isUploading=!1,e.videoFileUploader.queue[a].errorMessage="Video frame must be at least 960px by 540px.",e.uploadService.rejectedTracks.results.push({originalFileName:t._file.name,message:{title:e.videoFileUploader.queue[a].errorMessage}}),e._state.notifyDataChanged("growlNotifications.update",{severity:"error",summary:"Track Rejected",detail:t._file.name+": "+e.videoFileUploader.queue[a].errorMessage})):r&&0==r.length?(e.videoFileUploader.queue[a].isError=!0,e.videoFileUploader.queue[a].isReady=!1,e.videoFileUploader.queue[a].isUploaded=!0,e.videoFileUploader.queue[a].isUploading=!1,e.videoFileUploader.queue[a].errorMessage="Invalid MP4 file",e.uploadService.rejectedTracks.results.push({originalFileName:t._file.name,message:{title:e.videoFileUploader.queue[a].errorMessage}}),e._state.notifyDataChanged("growlNotifications.update",{severity:"error",summary:"Track Rejected",detail:t._file.name+": "+e.videoFileUploader.queue[a].errorMessage})):(e.videoFileUploader.queue[a].url="/api/v1/members/track/createVideoPreview?currencyId="+e.selectedCurrencyId,e.uploadService.trackList.results.push(e.videoFileUploader.queue[a]),e.updateTracksByValidationStatus(),e.videoFileUploader.queue[a].upload())}}},a.readAsArrayBuffer(t.some)},this.videoFileUploader.onProgressItem=function(t,a){e.zone.run(function(){var r=e.uploadService.trackList.results.indexOf(t);e.uploadService.trackList.results[r].actualProgress=a})},this.videoFileUploader.onCompleteItem=function(t,a,r,o){0==e.videoFileUploader.getNotUploadedItems().length;var i=JSON.parse(a);if(i.error)e.uploadService.rejectedTracks.push(i);else{var s=i.Track,l=e.uploadService.trackList.results.indexOf(t);e.uploadService.trackList.results[l]=s;for(var n in s)e.uploadService.trackValidationRequirements.hasOwnProperty(n)&&e.uploadService.validateTrackField(n,s[n],l);e.uploadService.updateTrackValidationStatus(l),e.checkTrackAndReleasesValidity(),e.updateTracksByValidationStatus(),e._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Track Uploaded Successfully",detail:s.originalFileName})}},this.videoFileUploader.uploadAll=function(){var t=e.videoFileUploader.getNotUploadedItems().filter(function(e){return!e.isUploading});if(t.length){t.map(function(e){return e._prepareToUploading()});for(var a=0;a<t.length;a++)t[a].upload(),e.videoFileUploader.isUploading=!1}}},e.prototype.ngOnInit=function(){var e=this;this.tags.getTags(),this.genres.getGenres(),this.pollingProcessId=setInterval(function(){e.pollForProcessingStatus()},1e4)},e.prototype.ngAfterViewInit=function(){this.setupUploaderForCurrency(this.currency.selectedCurrency)},e.prototype.setupUploaderForCurrency=function(e){this.authService.authResponse.profileData.currencies.length>0&&(this._state.notifyDataChanged("spinner.show",{}),this.selectedCurrencyId=e._id,this.selectedCurrencySlug=e.slug,this.selectedCurrency=e,this.trackEditor.selectedCurrency=this.selectedCurrency,this.loadDraftTracksForCurrency(this.selectedCurrencyId,1),this.getDraftReleases(),"video-vault"!=this.selectedCurrencySlug&&(this.fileUploader=new c.FileUploader({url:"/api/v1/members/track/createPreview?currencyId="+e.currencyId}),this.runAudioFileUploaderConfiguration(),this.selectedUploader=this.fileUploader),"video-vault"==this.selectedCurrencySlug&&(this.videoFileUploader=new c.FileUploader({url:"/api/v1/members/track/createVideoPreview?currencyId="+e.currencyId}),this.runVideoFileUploaderConfiguration(),this.selectedUploader=this.videoFileUploader))},e.prototype.getCurrencyFileUploader=function(){return"audio-vault"==this.selectedCurrencySlug?this.fileUploader:this.videoFileUploader},e.prototype.changePage=function(e,t){if(console.log(e,t),"draftMigrationTrackList"==t){e.first/e.rows+1}},e.prototype.updateTracksByValidationStatus=function(){this.uploadService.updateTracksByValidationStatus()},e.prototype.loadDraftTracksForCurrency=function(e,t){var a=this;this._state.notifyDataChanged("spinner.show",{}),this.uploadService.selectedCurrencyId=e,this.uploadService.getDraftTracks(e,t).subscribe(function(e){a.uploadService.trackList=e.Tracks||[];for(var t=0;t<a.uploadService.trackList.results.length;t++)a.uploadService.updateTrackValidationStatus(t);return a.checkTrackAndReleasesValidity(),a.updateTracksByValidationStatus(),a._state.notifyDataChanged("spinner.hide",{}),!1})},e.prototype.loadDraftMigrationTracksForCurrency=function(e,t){var a=this;this.uploadService.getDraftMigrationTracks(e,t).subscribe(function(e){a.uploadService.draftMigrationTrackList=e.Tracks||[];for(var t=0;t<a.uploadService.draftMigrationTrackList.results.length;t++)for(var r in a.uploadService.draftMigrationTrackList.results[t])a.uploadService.trackValidationRequirements.hasOwnProperty(r)&&(a.uploadService.validateTrackField(r,a.uploadService.draftMigrationTrackList.results[t][r],t),a.uploadService.updateTrackValidationStatus(t));a.checkTrackAndReleasesValidity(),a.updateTracksByValidationStatus()})},e.prototype.getTracksNeedingEditing=function(){return this.uploadService.tracksNotReadyToPublish.filter(function(e){return!e.validation.isTrackValid})},e.prototype.pollForProcessingStatus=function(){var e=this;if(console.log("polling for processing status"),this.uploadService&&this.uploadService.trackList&&this.uploadService.trackList.results&&this.uploadService.trackList.results.length>0){console.log("got draft tracks to go through");var t=this.uploadService.trackList.results.filter(function(e){return!e.draftTrackUploadedToS3&&e._id&&!e.crooklynClanv1AutoMigrated&&"draft"==e.status}).map(function(e){return e._id});console.log("tracks not marked as uploaded yet",t.length);for(var a=0;a<t.length;a++)this.uploadService.getTrack(t[a]).subscribe(function(t){if(1==t.Track.draftTrackUploadedToS3&&t.Track.hiBitRateFile){var a=e.uploadService.trackList.results.findIndex(function(e){return e._id.toString()==t.Track._id.toString()});e.uploadService.trackList.results[a].draftTrackUploadedToS3=t.Track.draftTrackUploadedToS3,e.uploadService.trackList.results[a].hiBitRateFile=t.Track.hiBitRateFile,e.updateTracksByValidationStatus()}})}},e.prototype.getApprovedTracks=function(){return this.uploadService.tracksNotReadyToPublish.filter(function(e){return e.validation.isTrackValid})},e.prototype.lengthCounter=function(e){return e.length},e.prototype.showTrackEditor=function(e){var t=this.uploadService.trackList.results.findIndex(function(t){return t._id.toString()==e._id.toString()});this.trackEditor.trackIndexCurrentlyEditing=t,this.trackEditor.activeList=this.activeList,this.trackEditor.selectedCurrency=this.selectedCurrency,this.trackEditor.setupUploaderForCurrency(this.selectedCurrency),this.trackEditor.modal.show(),this._state.notifyDataChanged("track.editor.show",{})},e.prototype.showReleaseEditor=function(e){var t=this.releases.draftList.indexOf(e);this.releaseEditor.releaseIndexCurrentlyEditing=t,this.releaseEditor.releaseId=e._id,this.releaseEditor.selectedCurrency=this.selectedCurrency,this.releases.draftList[t].validation=this.releases.validateRelease(t,this.selectedCurrency),this._state.notifyDataChanged("release.editor.show",this.selectedCurrency),this.releaseEditor.modal.show()},e.prototype.createRelease=function(){this.releaseEditor.releaseIndexCurrentlyEditing=null,this.releaseEditor.selectedCurrency=this.selectedCurrency,this.releaseEditor.configureSnippetUploader(this.releaseEditor.selectedCurrency),this.releaseEditor.modal.show()},e.prototype.submitAllApprovedTracksAndReleases=function(){var e=this,t=this.uploadService.tracksNotReadyToPublish.filter(function(e){return e.validation.isTrackValid}),a=this.releases.draftList.filter(function(e){return e.validation&&e.validation.isReleaseValid});this.publishService.publishTracksAndReleases(t,a).subscribe(function(t){e._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Content Submitted",detail:"Thank you for submitting your tracks and/or releases! They will be processed and available in The Vault shortly. We will send you an email notification once it is completed."}),e.loadDraftTracksForCurrency(e.selectedCurrencyId,1),e.getDraftReleases()})},e.prototype.submitSelectedApprovedTracksAndReleases=function(){var e=this;this.publishButtonDisabled=!0;this.tracksToSubmit.filter(function(e){return e.validation.isTrackValid}),this.releasesToSubmit.filter(function(e){return e.validation&&e.validation.isReleaseValid});this._state.notifyDataChanged("spinner.show",{}),this.publishService.publishTracksAndReleases(this.tracksToSubmit,this.releasesToSubmit).subscribe(function(t){e.publishButtonDisabled=!1;for(var a=0;a<e.tracksToSubmit.length;a++){var r=e.uploadService.tracksReadyToPublish.results.indexOf(e.tracksToSubmit[a]);e.uploadService.tracksReadyToPublish.results.splice(r,1)}for(var a=0;a<e.releasesToSubmit.length;a++){var r=e.releases.draftList.indexOf(e.releasesToSubmit[a]);e.releases.draftList.splice(r,1)}e.tracksToSubmit=[],e.releasesToSubmit=[],e._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Content Submitted",detail:"Thank you for submitting your tracks and/or releases! They will be processed and available in The Vault shortly. We will send you an email notification once it is completed."}),e.loadDraftTracksForCurrency(e.selectedCurrencyId,1),e.getDraftReleases(),e._state.notifyDataChanged("spinner.hide",{})})},e.prototype.logIt=function(e){},e.prototype.submitApprovedTrack=function(e){var t=this,a=this.uploadService.tracksNotReadyToPublish.results.indexOf(e);this.uploadService.tracksNotReadyToPublish.results[a].isSubmitting=!0,this.uploadService.submitValidatedTrack(e).subscribe(function(a){t._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Track Submitted Successfully",detail:a.Track.name});var r=t.uploadService.tracksNotReadyToPublish.results.indexOf(e);t.uploadService.tracksNotReadyToPublish.results.splice(r,1);var o=t.uploadService.tracksNotReadyToPublish.results.filter(function(e){return e.validation.isTrackValid});0==o.length&&t.releases.draftList.length>0?t.publishAllReleases():0==o.length&&0==t.releases.draftList.length&&(t.isSubmitAllInProgress=!1)})},e.prototype.showDatepicker=function(e,t){var a=this.uploadService.tracksNotReadyToPublish.results.indexOf(t);this.datePickerTopPosition=e.srcElement.parentElement.parentElement.parentElement.offsetTop+e.srcElement.parentElement.parentElement.parentElement.offsetHeight,this.uploadService.tracksNotReadyToPublish[a].showDatepicker=!0},e.prototype.updateTrackPublishDate=function(e,t){var a=this.uploadService.tracksNotReadyToPublish.results.indexOf(e);this.uploadService[t].results[a].publishDate=e.publishDate,this.uploadService.updateField("publishDate",this.uploadService.tracksNotReadyToPublish.results[a].publishDate,a,t),this.uploadService[t].results[a].showDatepicker=!1},e.prototype.removeTrack=function(e){var t=this;this._state.notifyDataChanged("spinner.show",{});var a=this.uploadService.trackList.results.findIndex(function(t){return e._id.toString()==t._id.toString()});a!==-1?this.uploadService.removeTrack(a).subscribe(function(r){if(r.success){var o=e.originalFileName;t._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Track Deleted",detail:o}),a=t.uploadService.trackList.results.findIndex(function(t){return e._id.toString()==t._id.toString()}),t.uploadService.trackList.results.splice(a,1),t.updateTracksByValidationStatus(),t._state.notifyDataChanged("spinner.hide",{})}}):this._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Track Cannot Be Deleted",detail:"This track is either a migrated track or can no longer be found to delete."})},e.prototype.togglePlayPause=function(e){var t={name:e.name||"[title not set]",version:e.version||"[version not set]",artistPrimaryName:e.artistPrimaryName||"[artist not set]",artistsFeaturedPrimaryName:e.artistsFeaturedPrimaryName,_id:e._id,url:e.hiBitRateFile.url,waveformUrl:e.waveformImageFileUrl,fileType:e.fileType};this._state.notifyDataChanged("player.toggle",t)},e.prototype.getTagName=function(e){for(var t=0;t<this.tags.list.length;t++)if(this.tags.list[t]._id===e)return this.tags.list[t].name},e.prototype.getDraftReleases=function(){var e=this;return this.releases.getTracksByDraftRelease(this.selectedCurrencyId).subscribe(function(t){e._state.notifyDataChanged("releases.updated",{releases:t.Releases}),e.releases.draftList=t.Releases;for(var a=0;a<e.releases.draftList.length;a++)e.releases.draftList[a].validation=e.releases.validateRelease(a,e.selectedCurrency);e.checkTrackAndReleasesValidity()})},e.prototype.allTracksArePublished=function(e){var t=!0;return e.tracks.forEach(function(e){t=t&&e.enabled&&"published"==e.status}),t},e.prototype.removeRelease=function(e){var t=this,a=this.releases.draftList.indexOf(e);if(this._state.notifyDataChanged("spinner.show",{}),this.releases.draftList[a].tracks.length>0){var r=this.releasesToSubmit.indexOf(e);this.releases.removeRelease(e).subscribe(function(o){if(o.success){r!==-1&&(t.releasesToSubmit=t.releasesToSubmit.splice(r,1));for(var i=0;i<t.releases.draftList[a].tracks.length;i++){var s=t.releases.draftList[a].tracks[i];t.removeTrackFromRelease(s,e)}t._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Release Deleted",detail:e.name}),t.releases.getTracksByDraftRelease(t.selectedCurrencyId).subscribe(function(e){t.releases.draftList=e.Releases;for(var a=0;a<t.releases.draftList.length;a++)t.releases.draftList[a].validation=t.releases.validateRelease(a,t.selectedCurrency);t.checkTrackAndReleasesValidity(),t._state.notifyDataChanged("releases.updated",{releases:e.Releases}),t._state.notifyDataChanged("spinner.hide",{})})}})}else this._state.notifyDataChanged("spinner.show",{}),this.releases.removeRelease(e).subscribe(function(a){a.success&&(t._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Release Deleted",detail:e.name}),t.releases.getTracksByDraftRelease(t.selectedCurrencyId).subscribe(function(e){t.releases.draftList=e.Releases;for(var a=0;a<t.releases.draftList.length;a++)t.releases.draftList[a].validation=t.releases.validateRelease(a,t.selectedCurrency);t.checkTrackAndReleasesValidity(),t._state.notifyDataChanged("releases.updated",{releases:e.Releases}),t._state.notifyDataChanged("spinner.hide",{})}))})},e.prototype.publishRelease=function(e){var t=this,a=this.releases.draftList.indexOf(e);e.validation&&e.validation.isReleaseValid&&(this.releases.draftList[a].isSubmitting=!0,this.releases.publishRelease(e).subscribe(function(a){t._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Release Published",detail:e.name}),t.checkTrackAndReleasesValidity(),1==t.releases.draftList.length&&(t.isSubmitAllInProgress=!1),t.getDraftReleases()}))},e.prototype.publishAllReleases=function(){if(this.releases.draftList&&this.releases.draftList.length>0){this.isSubmitAllInProgress=!0;for(var e=0;e<this.releases.draftList.length;e++){var t=this.releases.draftList[e];this.publishRelease(t)}}},e.prototype.dragTrackToReleaseStart=function(e,t){this.draggedTrack=t},e.prototype.assignTrackToRelease=function(e,t){var a=this,r=this.uploadService.trackList.results.findIndex(function(t){return e._id.toString()==t._id.toString()}),o=(this.tracksToSubmit.indexOf(e),this.releases.draftList.find(function(e,a){return t._id==e._id})),i=this.releases.draftList.indexOf(o);this.uploadService.updateTrackRelease(r,t._id).subscribe(function(e){a._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Track Added to Release",detail:e.Track.name+" added to "+t.name}),a.releases.getRelease(t._id).subscribe(function(e){a.releases.draftList[i]=e;var t=a.expandedRows.find(function(t,a){return e._id==t._id}),r=a.expandedRows.indexOf(t);r!=-1&&(a.expandedRows[r]=e),a.releases.draftList[i].validation=a.releases.validateRelease(i,a.selectedCurrency),a._state.notifyDataChanged("releases.updated",{release:e})})})},e.prototype.dragTrackToReleaseEnd=function(e){this.draggedTrack={}},e.prototype.removeTrackFromRelease=function(e,t){var a,r=this,o=this.releases.draftList.indexOf(t),a=this.uploadService.trackList.results.findIndex(function(t){return t._id.toString()==e._id.toString()});this._state.notifyDataChanged("spinner.show",{}),this.uploadService.removeTrackFromRelease(a).subscribe(function(e){if(r._state.notifyDataChanged("growlNotifications.update",{severity:"info",summary:"Track Removed from Release",detail:e.Track.name+" removed from "+t.name}),"undefined"!=typeof r.releases.draftList[o]){r.releases.draftList[o].tracks=r.releases.draftList[o].tracks.filter(function(t){return t._id!==e.Track._id});var a=r.expandedRows.find(function(e,t){return r.releases.draftList[o]._id==e._id}),i=r.expandedRows.indexOf(a);i!=-1&&(r.expandedRows[i]=r.releases.draftList[o]),r._state.notifyDataChanged("releases.updated",{release:r.releases.draftList[o]}),r.releases.draftList[o].validation=r.releases.validateRelease(o,r.selectedCurrency),r._state.notifyDataChanged("spinner.hide",{})}})},e.prototype.getReleaseValidationColor=function(e){return e.validation.isReleaseValid?"inherit":"#d9534f"},e.prototype.checkTrackAndReleasesValidity=function(){var e=this.uploadService.tracksNotReadyToPublish.results.filter(function(e){return!(!e.validation||!e.validation.isTrackValid)}),t=this.releases.draftList.filter(function(e){return!(!e.validation||!e.validation.isReleaseValid)});e.length>0&&this.releases.draftList.length>0&&t.length==this.releases.draftList.length||e.length>0&&0==this.releases.draftList.length?this.tracksAndReleasesReady=!0:this.tracksAndReleasesReady=!1},e.prototype.setCurrencyBackgroundColor=function(e){e.target.style.backgroundImage="radial-gradient(circle farthest-corner at 50% 50%,"+this.currency.selectedCurrency.color+", #000)"},e.prototype.removeCurrencyBackgroundColor=function(e){e.target.style.backgroundImage="radial-gradient(circle farthest-corner at 50% 50%,#000000, #000)"},e.prototype.triggerFileOverStateFileUploader=function(e,t){this.updateDropzoneColorFileUploader(e,t)},e.prototype.updateDropzoneColorFileUploader=function(e,t){e?(t.style.backgroundImage="radial-gradient(circle farthest-corner at 50% 50%,"+this.currency.selectedCurrency.color+", #000)",t.style.fontSize="5vw"):(t.style.backgroundImage="radial-gradient(circle farthest-corner at 50% 50%,#000000, #000)",t.style.fontSize="3vw")},e.prototype.triggerFileOverStateReleaseEditor=function(e,t){this.updateDropzoneColorReleaseEditor(e,t)},e.prototype.updateDropzoneColorReleaseEditor=function(e,t){e?(t.style.backgroundImage="radial-gradient(circle farthest-corner at 50% 50%,"+this.currency.selectedCurrency.color+", #000)",t.style.fontSize="1.1vw"):(t.style.backgroundImage="radial-gradient(circle farthest-corner at 50% 50%,#000000, #000)",t.style.fontSize="1vw")},e.prototype.submitSelectedTracksAndReleases=function(){},e.prototype.selectAllTracks=function(){this.tracksToSubmit=p.clone(this.uploadService.tracksReadyToPublish.results)},__decorate([r.ViewChild(s.TrackEditor),__metadata("design:type","function"==typeof(t="undefined"!=typeof s.TrackEditor&&s.TrackEditor)&&t||Object)],e.prototype,"trackEditor",void 0),__decorate([r.ViewChild("dataTable"),__metadata("design:type",Object)],e.prototype,"tableBody",void 0),__decorate([r.ViewChild("readyTracksTable"),__metadata("design:type",Object)],e.prototype,"readyTracksTable",void 0),__decorate([r.ViewChild("releasesDataTable"),__metadata("design:type",Object)],e.prototype,"releasesDataTable",void 0),__decorate([r.ViewChild("migrationTrackTable"),__metadata("design:type",Object)],e.prototype,"migrationTrackTable",void 0),__decorate([r.ViewChild(l.ReleaseEditor),__metadata("design:type","function"==typeof(f="undefined"!=typeof l.ReleaseEditor&&l.ReleaseEditor)&&f||Object)],e.prototype,"releaseEditor",void 0),e=__decorate([r.Component({selector:"uploader",template:a(1587),styles:[a(1574)]}),__metadata("design:paramtypes",["function"==typeof(h="undefined"!=typeof o.GlobalState&&o.GlobalState)&&h||Object,"function"==typeof(m="undefined"!=typeof n.UploadService&&n.UploadService)&&m||Object,"function"==typeof(g="undefined"!=typeof u.Currency&&u.Currency)&&g||Object,"function"==typeof(v="undefined"!=typeof n.TagService&&n.TagService)&&v||Object,"function"==typeof(y="undefined"!=typeof n.Genres&&n.Genres)&&y||Object,"function"==typeof(k="undefined"!=typeof i.AppState&&i.AppState)&&k||Object,"function"==typeof(b="undefined"!=typeof r.NgZone&&r.NgZone)&&b||Object,"function"==typeof(C="undefined"!=typeof n.Releases&&n.Releases)&&C||Object,"function"==typeof(T="undefined"!=typeof n.Publish&&n.Publish)&&T||Object,"function"==typeof(w="undefined"!=typeof n.AuthService&&n.AuthService)&&w||Object])],e);var t,f,h,m,g,v,y,k,b,C,T,w}();t.Uploader=f},1549:function(e,t,a){"use strict";var r=a(0),o=function(){function e(){}return e.prototype.ngOnInit=function(){},e=__decorate([r.Component({selector:"welcome",template:a(1588),styles:[a(1575)]}),__metadata("design:paramtypes",[])],e)}();t.WelcomeComponent=o},1550:function(e,t,a){"use strict";var r=a(0),o=a(18),i=function(){function e(e,t){this.router=e,this._router=t}return e.prototype.ngOnInit=function(){this.activePath=this._router.snapshot.children[0].url[0].path},e.prototype.changeRoute=function(e){this.router.navigate(["/pages/editors/"+e])},e=__decorate([r.Component({selector:"editors",template:a(1589)}),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof o.Router&&o.Router)&&t||Object,"function"==typeof(i="undefined"!=typeof o.ActivatedRoute&&o.ActivatedRoute)&&i||Object])],e);var t,i}();t.Editors=i},1562:function(e,t,a){"use strict";t.mp3Parser=a(371)},1563:function(e,t,a){"use strict";var r=a(18),o=a(1550),i=a(1549),s=a(1548),l=a(1546),n=a(1547),c=a(715),d=a(716),u=[{path:"",component:o.Editors,canActivate:[c.AuthGuard,d.EditorGuard],children:[{path:"",redirectTo:"welcome",component:i.WelcomeComponent},{path:"welcome",component:i.WelcomeComponent},{path:"uploader",component:s.Uploader},{path:"profile",component:l.EditorProfile},{path:"tracks",component:n.EditorTracksComponent},{path:"**",redirectTo:"welcome",component:i.WelcomeComponent}]}];t.routing=r.RouterModule.forChild(u)},1572:function(e,t){e.exports=".my-drop-zone{border:dashed 1px white;padding:10px;text-align:center;margin-bottom:10px}.img-preview{max-height:250px;margin:auto;display:block}.editor-profile-container{overflow-y:scroll;height:67vh;max-height:67vh}.has-success .img-preview{border:1px solid #a2db59}.has-error .img-preview{border:1px solid #fa758e}.block-center{float:none;margin:auto}\n"},1573:function(e,t){e.exports="#track-list-component .track-list i.fa{font-size:1.3rem}#track-list-component .track-list td{border:none;vertical-align:middle;text-align:center}#track-list-component .ui-multiselect-panel .ui-multiselect-item{display:inline-block;width:49%;float:left;text-align:center;margin:5px 0.5%}#track-list-component .ui-multiselect-panel .ui-multiselect-item label{padding-left:0px}#track-list-component .ui-multiselect-panel .ui-multiselect-item .ui-chkbox-box{display:none}#track-list-component .ui-multiselect .ui-multiselect-label{width:250px}#track-list-component .ui-datatable th.ui-state-default{background:black;color:white}#track-list-component .ui-datatable th.ui-state-default{vertical-align:middle;padding:15px 0px;font-size:1.0rem;border:0}@media (max-width: 1397px){#track-list-component .ui-datatable th.ui-state-default{font-size:0.8rem}}#track-list-component .tag-item{margin-bottom:0px}#track-list-component .bubble-container{display:inline-block;border:solid 1px;border-radius:9px;padding:8px 10px;text-transform:uppercase;margin:0px 5px}#track-list-component .search{text-shadow:none;color:#ffffff;font-size:13px;line-height:25px;vertical-align:middle;transition:all 0.5s ease;white-space:nowrap;overflow:hidden;width:100%;max-width:25%;padding:3px 10px}#track-list-component .search label{cursor:pointer}#track-list-component .search i{width:16px;display:inline-block;cursor:pointer;padding-left:1px;font-size:16px;margin-right:13px}#track-list-component .search input{background:none;border:none;outline:none;width:95%;padding:0;margin:0 0 0 -3px;height:auto}#track-list-component #track-list-features{padding-bottom:10px}#track-list-component #track-list-features input{text-transform:uppercase;text-align:center}#track-list-component #track-list-features .ui-datatable tbody>tr.ui-widget-content{height:100px}#track-list-component .btn{text-transform:uppercase}#track-list-component .btn.btn-link{border:solid 1px #ddd;color:white;border-radius:9px}#track-list-component .btn.btn-link:hover{border-color:#999}#track-list-component .text-purple{color:#903f8c}.modal{top:150px;z-index:9999999999}.modal.fade.in{background-color:rgba(0,0,0,0.8)}.modal .modal-dialog{margin-top:0px}.modal .modal-body{overflow:auto}.modal .modal-header .fa-play-circle,.modal .modal-header .fa-pause-circle{float:right;font-size:1.5rem;font-weight:bold;line-height:1;color:white;text-shadow:0 1px 0 #fff;margin-top:-2px;margin-right:5px}.modal .modal-header .save-button{float:right;font-size:1rem;line-height:1;color:white;margin-right:5px}.modal .modal-header .save-button .fa-save{padding:0px 3px}.modal-content{background-color:#000000;color:white;border:white 1px solid}.modal-content .close{opacity:1}.modal-content .close span{color:white}.modal-content select{background-color:black;width:100%;padding:0px;height:40px}.crate-editor{-webkit-transition:height 0.2ms ease-in-out;-moz-transition:height 0.2ms ease-in-out;-ms-transition:height 0.2ms ease-in-out;-o-transition:height 0.2ms ease-in-out;transition:height 0.2ms ease-in-out;height:0;visibility:hidden}.crate-editor.show{height:auto;visibility:visible}.form-control.column-filter{font-size:12px;padding:5px 5px}p-radiobutton{display:block}.nav-tabs .nav-item+.nav-item{margin-left:0}.nav.nav-tabs{display:flex}.nav.nav-tabs .nav-item{text-align:center;flex:1;padding:5px 0px}.filters-panel{transition:opacity 300ms, height 300ms;overflow:hidden}.filters-panel.hide{height:0px}.filters-panel.show{height:250px}.nav.nav-tabs.nav-stacked{display:block}.nav.nav-tabs.nav-stacked li{cursor:pointer;border:none;display:block;float:none}.version-subtitle{color:#9e4d4d}\n"},1574:function(e,t){e.exports='#dropzone{-webkit-transition:color 400ms ease, background-image 800ms ease, font-size 400ms ease, -webkit-transform 717ms ease;transition:color 400ms ease, background-image 800ms ease, font-size 400ms ease, -webkit-transform 717ms ease;transition:color 400ms ease, background-image 800ms ease, font-size 400ms ease, transform 717ms ease;transition:color 400ms ease, background-image 800ms ease, font-size 400ms ease, transform 717ms ease, -webkit-transform 717ms ease;color:#fff;text-align:center;width:100%;height:100%;-webkit-transition:color 400ms ease, background-image 800ms ease, font-size 400ms ease, -webkit-transform 717ms ease;transition:color 400ms ease, background-image 800ms ease, font-size 400ms ease, -webkit-transform 717ms ease;transition:color 400ms ease, background-image 800ms ease, font-size 400ms ease, transform 717ms ease;transition:color 400ms ease, background-image 800ms ease, font-size 400ms ease, transform 717ms ease, -webkit-transform 717ms ease;font-size:3vw}.dropzone{-webkit-transition:color 400ms ease, background-image 800ms ease, font-size 400ms ease, -webkit-transform 717ms ease;transition:color 400ms ease, background-image 800ms ease, font-size 400ms ease, -webkit-transform 717ms ease;transition:color 400ms ease, background-image 800ms ease, font-size 400ms ease, transform 717ms ease;transition:color 400ms ease, background-image 800ms ease, font-size 400ms ease, transform 717ms ease, -webkit-transform 717ms ease;color:#fff;text-align:center}.dropzone .dropzone-text{-webkit-transition:color 400ms ease, background-image 800ms ease, font-size 400ms ease, -webkit-transform 717ms ease;transition:color 400ms ease, background-image 800ms ease, font-size 400ms ease, -webkit-transform 717ms ease;transition:color 400ms ease, background-image 800ms ease, font-size 400ms ease, transform 717ms ease;transition:color 400ms ease, background-image 800ms ease, font-size 400ms ease, transform 717ms ease, -webkit-transform 717ms ease;font-size:3vw}.dropzone{-webkit-transition:font-size 400ms ease, -webkit-transform 717ms ease;transition:font-size 400ms ease, -webkit-transform 717ms ease;transition:font-size 400ms ease, transform 717ms ease;transition:font-size 400ms ease, transform 717ms ease, -webkit-transform 717ms ease;color:#fff;text-align:center;padding:4vh 0px;position:relative}.dropzone .dropzone-text{width:100%;height:100%;background:#000;display:table-cell;vertical-align:middle;font-size:3vw}.dropzone:after{position:absolute;z-index:2;opacity:0;position:absolute;content:\'\';top:0;left:0;width:100%;height:100%;transition:opacity 0.5s ease-out;z-index:2;opacity:0}.dropzone:hover .dropzone-text{background:rgba(0,0,0,0.1);font-size:5vw}.dropzone:after:hover{opacity:1}.tab-pane.active{position:relative}.add-tracks-to-release{padding:0.25em 0.4em;line-height:1;font-size:75%}.tag.tag-link{border:solid 1px white}.table tbody tr:nth-child(odd){background-color:#0e1020}.table tbody tr:nth-child(even){background-color:#1f0a0a}.table th,.table td{font-size:16px;padding:0.75rem 7px !important;border:solid 1px white}select{background-color:black;font-size:16px}.scrollable-table{height:70vh}.table{table-layout:fixed}.text-container{width:70%}.icon-container{width:10%}.table>thead>tr>th:first-child{text-align:left !important}.table>tbody>tr>td:first-child{text-align:left !important}select::-webkit-input-placeholder{color:white}select::-moz-placeholder{color:white}select:-ms-input-placeholder{color:white}select:-moz-placeholder{color:white}select option[disabled],select option:disabled,select option:selected,select option[selected]{color:white}.submit-track{-webkit-transition:color 400ms ease, background-image 800ms ease, font-size 400ms ease, -webkit-transform 717ms ease;transition:color 400ms ease, background-image 800ms ease, font-size 400ms ease, -webkit-transform 717ms ease;transition:color 400ms ease, background-image 800ms ease, font-size 400ms ease, transform 717ms ease;transition:color 400ms ease, background-image 800ms ease, font-size 400ms ease, transform 717ms ease, -webkit-transform 717ms ease}.submit-track:hover{color:#8bd22f}.submit-track-in-progress{border:5px solid #f3f3f3;border-top:5px solid #8bd22f;border-radius:50%;width:30px;height:30px;animation:spin 2s linear infinite;margin:0 auto}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg)}}.bubble-container{background-color:transparent;display:inline-block;border:solid 1px;border-radius:9px;padding:8px 10px;text-transform:uppercase}.ui-cell-data i[class*="fa-"]{font-size:24px;padding:0px 5px;cursor:pointer;opacity:0.7}.ui-cell-data i[class*="fa-"]:hover{opacity:1.0}.my-drop-zone{border:dashed 1px white;padding:10px;text-align:center;margin-bottom:10px}.progress-bar{height:100%;background-color:red;-webkit-box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15);box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15);-webkit-transition:width .25s ease;-o-transition:width .25s ease;transition:width .25s ease}.progress{position:relative;overflow:hidden;height:24px;border-radius:25px;text-align:center;border:solid 1px transparent}.status-message{margin:auto;position:absolute;z-index:10;width:100%;max-width:100%;left:0px;padding:3px 0px}.track-information{line-height:24px;max-height:48px;overflow:hidden}.fa.bigger{padding:0px 5px;font-size:20px}.uploader-controller{display:flex;flex-direction:row}.uploader-controller .dropzone-container{align-content:stretch;display:flex;padding-bottom:15px}.uploader-controller .dropzone-container #dropzone{display:flex;align-items:center;justify-content:center;width:100%;height:100%}.actions-header{margin:0 12%}.text-dark{color:black}.justify-spacing{align-items:center;display:flex;justify-content:space-between}.select-checkbox{vertical-align:middle}.justify-spacing .center{align-items:center;display:flex;justify-content:space-between}.justify-spacing .center .tag{margin-left:5px}\n';
},1575:function(e,t){e.exports="iframe{width:100%;height:67vh;border:none;outline:none}\n"},1585:function(e,t){e.exports='<div class="editor-profile-container">\n  <div class="row">\n    <div class="col-md-6 block-center">\n\n      <h1 class="text-center">\n        My Editor Profile\n      </h1>\n\n      <form [formGroup]="form" (ngSubmit)="updateProfile(form.value)" class="form-horizontal ">\n\n        <div class="form-group row" [ngClass]="{\'has-error\': (!firstName.valid), \'has-success\': (firstName.valid)}">\n          <label for="firstName" class="col-sm-3 control-label">First Name</label>\n          <div class="col-sm-9">\n            <input [formControl]="firstName" type="text" class="form-control" id="firstName" placeholder="First Name">\n          </div>\n        </div>\n\n        <div class="form-group row" [ngClass]="{\'has-error\': (!lastName.valid), \'has-success\': (lastName.valid)}">\n          <label for="lastName" class="col-sm-3 control-label">Last Name</label>\n          <div class="col-sm-9">\n            <input [formControl]="lastName" type="text" class="form-control" id="lastName" placeholder="Last Name">\n          </div>\n        </div>\n\n        <div class="form-group row" [ngClass]="{\'has-error\': (!stageName.valid), \'has-success\': (stageName.valid)}">\n          <label for="stageName" class="col-sm-3 control-label">DJ / Performance Name</label>\n          <div class="col-sm-9">\n            <input [formControl]="stageName" type="text" class="form-control" id="stageName" placeholder="DJ / Performance Name">\n          </div>\n        </div>\n\n        <div class="form-group row" [ngClass]="{\'has-error\': (!email.valid), \'has-success\': (email.valid)}">\n          <label for="email" class="col-sm-3 control-label">Email</label>\n          <div class="col-sm-9">\n            <input [formControl]="email" type="email" class="form-control" id="email" placeholder="Email">\n          </div>\n        </div>\n\n        <div class="form-group row" [ngClass]="{\'has-error\': !passwords.valid && (password.touched || repeatPassword.touched), \'has-success\': passwords.valid && (password.touched || repeatPassword.touched)}">\n          <label for="inputPassword3" class="col-sm-3 control-label">Change Password</label>\n\n          <div class="col-sm-9">\n            <input [formControl]="password" type="password" class="form-control" id="inputPassword3" placeholder="Password">\n          </div>\n        </div>\n        <div class="form-group row" [ngClass]="{\'has-error\': !passwords.valid && (password.touched || repeatPassword.touched), \'has-success\': passwords.valid && (password.touched || repeatPassword.touched)}">\n          <label for="inputPassword4" class="col-sm-3 control-label">Repeat Password</label>\n\n          <div class="col-sm-9">\n            <input [formControl]="repeatPassword" type="password" class="form-control" id="inputPassword4" placeholder="Repeat">\n\n            <span *ngIf="!passwords.valid && (password.touched || repeatPassword.touched)" class="help-block sub-little-text">Password must be at least 8 characters and they must match.</span>\n          </div>\n        </div>\n\n        <div class="form-group row" [ngClass]="{\'has-error\': (!yearStarted.valid), \'has-success\': (yearStarted.valid)}">\n          <label for="yearStarted" class="col-sm-3 control-label">Year Started</label>\n          <div class="col-sm-9">\n            <input [formControl]="yearStarted" type="text" class="form-control" id="yearStarted" placeholder="Year Started">\n          </div>\n        </div>\n\n        <div class="form-group row" [ngClass]="{\'has-error\': (!hometown.valid), \'has-success\': (hometown.valid)}">\n          <label for="hometown" class="col-sm-3 control-label">Hometown</label>\n          <div class="col-sm-9">\n            <input [formControl]="hometown" type="text" class="form-control" id="hometown" placeholder="Hometown">\n          </div>\n        </div>\n\n        <div class="form-group row" [ngClass]="{\'has-error\': (!currentLocation.valid), \'has-success\': (currentLocation.valid)}">\n          <label for="currentLocation" class="col-sm-3 control-label">Current Location</label>\n          <div class="col-sm-9">\n            <input [formControl]="currentLocation" type="text" class="form-control" id="currentLocation" placeholder="Current Location">\n          </div>\n        </div>\n\n\n        <div class="form-group row" [ngClass]="{\'has-error\': (!payPalEmailAddress.valid), \'has-success\': (payPalEmailAddress.valid)}">\n          <label for="payPalEmailAddress" class="col-sm-3 control-label">PayPal Email Address</label>\n          <div class="col-sm-9">\n            <input [formControl]="payPalEmailAddress" type="text" class="form-control" id="payPalEmailAddress" placeholder="PayPal Email Address">\n          </div>\n        </div>\n\n\n        <div class="row form-group">\n\n          <label for="address" class="col-sm-3 control-label">Address</label>\n          <div class="col-md-9" [ngClass]="{\'has-error\': (!addressText.valid), \'has-success\': (addressText.valid)}">\n            <input #addressAutocomplete [formControl]="addressText" type="text" class="form-control" id="address" placeholder="Enter street address">\n          </div>\n\n        </div>\n        <div class="form-group row" *ngIf="account?.profile?.address?.country == \'United States\'">\n\n          <label for="taxId" class="col-sm-3 control-label">Tax ID (US only)</label>\n\n          <div class="col-sm-9" *ngIf="!account.profile.taxId">\n\n            For all United States-based editors, we require a completed IRS W-9 before we can issue payouts. We do not currently have a W-9 on file for your account. We will contact you shortly to complete one.\n\n          </div>\n\n          <div class="col-sm-9" *ngIf="account.profile.taxId">\n\n            W9 on File\n\n          </div>\n\n        </div>\n\n        <div class="form-group row" [ngClass]="{\'has-error\': (!biography.valid), \'has-success\': (biography.valid)}">\n          <label for="biography" class="col-sm-3 control-label">Biography</label>\n          <div class="col-sm-9">\n            <textarea [formControl]="biography" type="text" class="form-control" id="biography" placeholder="Your biography"></textarea>\n          </div>\n        </div>\n\n        <div class="row form-group">\n          <label for="biography" class="col-sm-3 control-label">Branding Images</label>\n\n          <div class="col-md-9">\n            <div class="row">\n\n              <div class="col-md-6" [ngClass]="{\'has-error\': (!logoSquare.valid), \'has-success\': (logoSquare.valid)}">\n                <div ng2FileDrop [uploader]="logoSquareUploader" class="well my-drop-zone">\n                  Drop square logo here (PNG or JPG)\n                </div>\n                <img class="img-preview img-fluid img-responsive" src="{{account.profile.logoSquare.url}}" *ngIf="account.profile.logoSquare?.url" />\n\n              </div>\n              <div class="col-md-6" [ngClass]="{\'has-error\': (!logoLong.valid), \'has-success\': (logoLong.valid)}">\n                <div ng2FileDrop [uploader]="logoLongUploader" class="well my-drop-zone">\n                  Drop long logo here (PNG or JPG)\n                </div>\n                <img class="img-preview img-fluid img-responsive" src="{{account.profile.logoLong.url}}" *ngIf="account.profile.logoLong?.url" />\n\n              </div>\n            </div>\n            <div class="row">\n              <div class="col-md-6" [ngClass]="{\'has-error\': (!backgroundImage.valid), \'has-success\': (backgroundImage.valid)}">\n                <div ng2FileDrop [uploader]="backgroundImageUploader" class="well my-drop-zone">\n                  Drop background image here (PNG or JPG)\n                </div>\n                <img class="img-preview img-fluid img-responsive" src="{{account.profile.backgroundImage.url}}" *ngIf="account.profile.backgroundImage?.url" />\n\n              </div>\n\n\n              <div class="col-md-6" [ngClass]="{\'has-error\': (!photo.valid), \'has-success\': (photo.valid)}">\n                <div ng2FileDrop [uploader]="photoUploader" class="well my-drop-zone">\n                  Drop photo here (PNG or JPG)\n                </div>\n                <img class="img-preview img-fluid img-responsive" src="{{account.profile.photo.url}}" *ngIf="account.profile.photo?.url" />\n\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class="form-group row" [ngClass]="{\'has-error\': (!facebookUrl.valid && facebookUrl.touched), \'has-success\': (facebookUrl.valid && facebookUrl.touched)}">\n          <label for="facebookUrl" class="col-sm-3 control-label">Facebook URL</label>\n          <div class="col-sm-9">\n            <input [formControl]="facebookUrl" type="text" class="form-control" id="facebookUrl" placeholder="Facebook URL">\n            <span *ngIf="!facebookUrl.valid" class="help-block sub-little-text">Please enter a valid URL, i.e. https://www.example.com.</span>\n\n          </div>\n\n        </div>\n        <div class="form-group row" [ngClass]="{\'has-error\': (!twitterUrl.valid && twitterUrl.touched), \'has-success\': (twitterUrl.valid && twitterUrl.touched)}">\n          <label for="twitterUrl" class="col-sm-3 control-label">Twitter URL</label>\n          <div class="col-sm-9">\n            <input [formControl]="twitterUrl" type="text" class="form-control" id="twitterUrl" placeholder="Twitter URL">\n            <span *ngIf="!twitterUrl.valid" class="help-block sub-little-text">Please enter a valid URL, i.e. https://www.example.com.</span>\n\n          </div>\n\n        </div>\n        <div class="form-group row" [ngClass]="{\'has-error\': (!instagramUrl.valid && instagramUrl.touched), \'has-success\': (instagramUrl.valid && instagramUrl.touched)}">\n          <label for="instagramUrl" class="col-sm-3 control-label">Instagram URL</label>\n          <div class="col-sm-9">\n            <input [formControl]="instagramUrl" type="text" class="form-control" id="instagramUrl" placeholder="Instagram URL">\n            <span *ngIf="!instagramUrl.valid" class="help-block sub-little-text">Please enter a valid URL, i.e. https://www.example.com.</span>\n\n          </div>\n        </div>\n        <div class="form-group row" [ngClass]="{\'has-error\': (!googleUrl.valid && googleUrl.touched), \'has-success\': (googleUrl.valid && googleUrl.touched)}">\n          <label for="googleUrl" class="col-sm-3 control-label">Google URL</label>\n          <div class="col-sm-9">\n            <input [formControl]="googleUrl" type="text" class="form-control" id="googleUrl" placeholder="Google+ URL">\n            <span *ngIf="!googleUrl.valid" class="help-block sub-little-text">Please enter a valid URL, i.e. https://www.example.com.</span>\n\n          </div>\n        </div>\n\n        <div class="form-group row" [ngClass]="{\'has-error\': (!linkedinUrl.valid && linkedinUrl.touched), \'has-success\': (linkedinUrl.valid && linkedinUrl.touched)}">\n          <label for="linkedinUrl" class="col-sm-3 control-label">LinkedIn URL</label>\n          <div class="col-sm-9">\n            <input [formControl]="linkedinUrl" type="text" class="form-control" id="linkedinUrl" placeholder="LinkedIn URL">\n            <span *ngIf="!linkedinUrl.valid" class="help-block sub-little-text">Please enter a valid URL, i.e. https://www.example.com.</span>\n\n          </div>\n        </div>\n\n        <div class="form-group row" [ngClass]="{\'has-error\': (!soundcloudUrl.valid && soundcloudUrl.touched), \'has-success\': (soundcloudUrl.valid && soundcloudUrl.touched)}">\n          <label for="soundcloudUrl" class="col-sm-3 control-label">Soundcloud URL</label>\n          <div class="col-sm-9">\n            <input [formControl]="soundcloudUrl" type="text" class="form-control" id="soundcloudUrl" placeholder="Soundcloud URL">\n            <span *ngIf="!soundcloudUrl.valid" class="help-block sub-little-text">Please enter a valid URL, i.e. https://www.example.com.</span>\n\n          </div>\n        </div>\n\n        <div class="form-group row" [ngClass]="{\'has-error\': (!soundCloudFeaturedTrackUrl1.valid && soundCloudFeaturedTrackUrl1.touched), \'has-success\': (soundCloudFeaturedTrackUrl1.valid && soundCloudFeaturedTrackUrl1.touched)}">\n          <label for="soundCloudFeaturedTrackUrl1" class="col-sm-3 control-label">SoundCloud URL #1</label>\n          <div class="col-sm-9">\n            <input [formControl]="soundCloudFeaturedTrackUrl1" type="text" class="form-control" id="soundCloudFeaturedTrackUrl1" placeholder="SoundCloud Featured URL 1">\n            <span *ngIf="!soundCloudFeaturedTrackUrl1.valid" class="help-block sub-little-text">Please enter a valid URL, i.e. https://www.example.com.</span>\n\n          </div>\n        </div>\n        <div class="form-group row" [ngClass]="{\'has-error\': (!soundCloudFeaturedTrackUrl1Description.valid && soundCloudFeaturedTrackUrl1Description.touched), \'has-success\': (soundCloudFeaturedTrackUrl1Description.valid && soundCloudFeaturedTrackUrl1Description.touched)}">\n\n          <label for="soundCloudFeaturedTrackUrl1Description" class="col-sm-3 control-label">Description</label>\n          <div class="col-sm-9">\n            <textarea [formControl]="soundCloudFeaturedTrackUrl1Description" class="form-control" id="soundCloudFeaturedTrackUrl1Description" placeholder="SoundCloud Featured URL 1 Description"></textarea>\n          </div>\n\n        </div>\n        <div class="form-group row" [ngClass]="{\'has-error\': (!soundCloudFeaturedTrackUrl2.valid && soundCloudFeaturedTrackUrl2.touched), \'has-success\': (soundCloudFeaturedTrackUrl2.valid && soundCloudFeaturedTrackUrl2.touched)}">\n          <label for="soundCloudFeaturedTrackUrl2" class="col-sm-3 control-label">SoundCloud URL #2</label>\n          <div class="col-sm-9">\n            <input [formControl]="soundCloudFeaturedTrackUrl2" type="text" class="form-control" id="soundCloudFeaturedTrackUrl2" placeholder="SoundCloud Featured URL 2">\n            <span *ngIf="!soundCloudFeaturedTrackUrl2.valid" class="help-block sub-little-text">Please enter a valid URL, i.e. https://www.example.com.</span>\n\n          </div>\n        </div>\n        <div class="form-group row" [ngClass]="{\'has-error\': (!soundCloudFeaturedTrackUrl2Description.valid && soundCloudFeaturedTrackUrl2Description.touched), \'has-success\': (soundCloudFeaturedTrackUrl2Description.valid && soundCloudFeaturedTrackUrl2.touched)}">\n\n          <label for="soundCloudFeaturedTrackUrl2Description" class="col-sm-3 control-label">Description</label>\n          <div class="col-sm-9">\n            <textarea [formControl]="soundCloudFeaturedTrackUrl2Description" class="form-control" id="soundCloudFeaturedTrackUrl2Description" placeholder="SoundCloud Featured URL 2 Description"></textarea>\n          </div>\n\n        </div>\n        <div class="form-group row" [ngClass]="{\'has-error\': (!soundCloudFeaturedTrackUrl3.valid && soundCloudFeaturedTrackUrl3.touched), \'has-success\': (soundCloudFeaturedTrackUrl3.valid && soundCloudFeaturedTrackUrl3.touched)}">\n          <label for="soundCloudFeaturedTrackUrl3" class="col-sm-3 control-label">SoundCloud URL #3</label>\n          <div class="col-sm-9">\n            <input [formControl]="soundCloudFeaturedTrackUrl3" type="text" class="form-control" id="soundCloudFeaturedTrackUrl3" placeholder="SoundCloud Featured URL 3">\n            <span *ngIf="!soundCloudFeaturedTrackUrl3.valid" class="help-block sub-little-text">Please enter a valid URL, i.e. https://www.example.com.</span>\n\n          </div>\n        </div>\n        <div class="form-group row" [ngClass]="{\'has-error\': (!soundCloudFeaturedTrackUrl3Description.valid && soundCloudFeaturedTrackUrl3Description.touched), \'has-success\': (soundCloudFeaturedTrackUrl3Description.valid && soundCloudFeaturedTrackUrl3Description.touched)}">\n\n          <label for="soundCloudFeaturedTrackUrl3Description" class="col-sm-3 control-label">Description</label>\n          <div class="col-sm-9">\n            <textarea [formControl]="soundCloudFeaturedTrackUrl3Description" class="form-control" id="soundCloudFeaturedTrackUrl3Description" placeholder="SoundCloud Featured URL 3 Description"></textarea>\n          </div>\n\n        </div>\n        <div class="form-group row">\n\n          <div class="col-sm-offset-2 col-sm-9">\n            <button type="submit" class="btn btn-default btn-auth">Update Profile</button>\n          </div>\n\n        </div>\n\n      </form>\n\n    </div>\n  </div>\n</div>'},1586:function(e,t){e.exports='<div class="track-list-container">\n  <div class="row">\n    <div class="col-md-12 store-controls">\n      <store-selector></store-selector>\n      <div class="row">\n        <div class="col-md-12">\n\n          <p-dropdown [options]="accountingPeriods" [(ngModel)]="selectedAccountingPeriod" [style]="{\'width\': \'auto\'}"></p-dropdown>\n          <button class="btn btn-primary" (click)="selectAccountingPeriod()">Show Period</button>\n          <button class="btn btn-warning" (click)="toggleFilterPanel()"><i class="fa fa-filter"></i>&nbsp;Search/Filter</button>\n          Earnings: {{ accountingData?.earnings | currency:\'USD\':true:\'1.2-2\' }} \n          Upload Count: {{ accountingData?.trackUploadCount }} \n          Currency Quota: {{ accountingData?.currencyUploadQuotaToQualifyForEarnings }} \n          Quota Met? {{ accountingData?.metQuota }} \n          Expected Payout: \n          <span *ngIf="accountingData?.metQuota">{{ accountingData?.earnings | currency:\'USD\':true:\'1.2-2\' }} </span>\n          <span *ngIf="!accountingData?.metQuota">$0.00 (quota not met)</span>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-12">\n      <div class="row">\n        <div class="col-md-2" style="margin-top: 15px;">\n\n          <p style="font-weight: 900;">Manage Collections</p>\n\n          <div #sidebar class="sidebar" style="overflow: hidden; overflow-y: scroll;">\n            <p>View Current Collection</p>\n            <p-dropdown [options]="collections" [(ngModel)]="selectedCollection" (onChange)="getCollection(selectedCollection._id)" [style]="{\'width\':\'150px\'}" filter="filter" placeholder="Select collection"></p-dropdown>\n              <p style="margin-top: 15px;" *ngIf="loadedCollection._id">Edit Collection</p>\n              <div class="form-group" *ngIf="loadedCollection._id && loadedCollection.name">\n              <input type="text" class="form-control" name="crateName" placeholder="Collection name" [(ngModel)]="loadedCollection.name" />\n            </div>\n            <div class="form-group" *ngIf="loadedCollection._id && loadedCollection.description">\n              <textarea  class="form-control" [innerText]="loadedCollection.description" placeholder="Enter collection description" [(ngModel)]="loadedCollection.description"></textarea>\n            </div>\n\n            <p><button class="btn btn-xs btn-primary" *ngIf="loadedCollection._id" (click)="clearCurrentCrate()">View My Tracks</button></p>\n            <p><button class="btn btn-xs btn-primary" *ngIf="loadedCollection._id" (click)="updateCollection()">Update Collection</button></p>\n            <p><button class="btn btn-xs btn-primary" *ngIf="loadedCollection._id" (click)="addTracksToCollection()">Add Selected Tracks To Collection</button></p>\n            <p><button class="btn btn-xs btn-danger" *ngIf="loadedCollection._id" (click)="removeTracksFromCollection()">Remove Selected Tracks From Collection</button></p>\n            <p><button class="btn btn-xs btn-danger" *ngIf="loadedCollection._id" (click)="removeCollection(loadedCollection._id)">Delete Collection</button></p>\n\n            <hr style="background-color: white; marign-left: 5%; margin-right: 5%;" />\n            \n            <p>Create a new collection:</p>\n            \n            <div class="form-group">\n              <input type="text" class="form-control" name="crateName" placeholder="Collection name" [(ngModel)]="newCollection.name" />\n            </div>\n            <div class="form-group">\n              <textarea  class="form-control" [innerText]="newCollection.description" placeholder="Enter collection description" [(ngModel)]="newCollection.description"></textarea>\n            </div>\n            \n            <button class="btn btn-primary" style="white-space: normal;" [disabled]="!newCollection.name || !newCollection.description || newCollection.name.length == 0 || newCollection.description.length == 0" (click)="createCollection()">Create Collection from Selected Tracks</button>\n          </div>\n\n        </div>\n        <div class="col-md-10">\n      <div class="filters-panel hide" [ngClass]="{\'show\': showFilters, \'hide\': !showFilters }">\n        <div class="row">\n          <div class="col-md-10">\n            <div class="row">\n              <div class="col-md-6">\n                <span>Title</span>\n                <div class="form-group">\n                  <input class="form-control column-filter" type="text" [(ngModel)]="trackListFilters.trackName" />\n                </div>\n              </div>\n              <div class="col-md-6">\n                <span>Artists</span>\n\n                <div class="form-group">\n                  <input class="form-control column-filter" type="text" [(ngModel)]="trackListFilters.artistName" />\n                </div>\n\n              </div>\n\n            </div>\n            <div class="row">\n              <div class="col-md-2">\n                <p>BPM</p>\n\n                <div class="form-group">\n\n                  <input class="form-control column-filter" [(ngModel)]="trackListFilters.startBpm" type="number" step="1" min="0" maxlength="3" max="250" placeholder="Min" />\n                  <input class="form-control column-filter" [(ngModel)]="trackListFilters.endBpm" min="0" max="250" step="1" maxlength="3" placeholder="Max" />\n                </div>\n                <p>Year</p>\n                <div class="form-group">\n                  <input class="form-control column-filter" [(ngModel)]="trackListFilters.minYear" type="number" step="1" min="1950" maxlength="4" [max]="this.currentYear" placeholder="Min" />\n                  <input class="form-control column-filter" [(ngModel)]="trackListFilters.maxYear" min="1950" [max]="this.currentYear" step="1" maxlength="4" placeholder="Max" />\n                </div>\n\n\n              </div>\n              <div class="col-md-2">\n                <p>Keys</p>\n                <p-listbox [checkbox]="true" [multiple]="true" [options]="keyList" [(ngModel)]="trackListFilters.keys" filter="filter" [style]="{\'height\':filterListBoxHeight, \'font-size\': filterListBoxFontSize }"></p-listbox>\n\n              </div>\n              <div class="col-md-2">\n                <p>Tags</p>\n                <p-listbox [checkbox]="true" [multiple]="true" [options]="tagList" [(ngModel)]="trackListFilters.tags" filter="filter" [style]="{\'height\':filterListBoxHeight, \'font-size\': filterListBoxFontSize }"></p-listbox>\n\n              </div>\n              <div class="col-md-2">\n                <p>Genres</p>\n                <p-listbox [checkbox]="true" [multiple]="true" [options]="genresList" [(ngModel)]="trackListFilters.genres" filter="filter" [style]="{\'height\':filterListBoxHeight, \'font-size\': filterListBoxFontSize }"></p-listbox>\n\n              </div>\n              <div class="col-md-2">\n                <p>Show Columns</p>\n                <p-listbox [checkbox]="true" [multiple]="true" [options]="trackColumns" [(ngModel)]="trackColumnsSelected" [style]="{\'height\':filterListBoxHeight, \'font-size\': filterListBoxFontSize }"></p-listbox>\n\n              </div>\n              <div class="col-md-2">\n                            <p><button class="btn btn-sm col-md-12 btn-primary crate-button" (click)="filterTrackList()">Apply</button></p>\n                           <p> <button class="btn btn-sm col-md-12 btn-primary crate-button" (click)="clearCurrentCrate()">Reset</button></p>\n\n              </div>\n\n            </div>\n\n          </div>\n        </div>\n      </div>\n\n          <p-dataTable #trackTable class="table track-list" sortField="publishDate" sortOrder="-1" scrollable="true" [value]="tracks.list" scrollWidth="100%" expandableRows="true" [lazy]="true" [totalRecords]="tracks.totalRecords" [rows]="25" [paginator]="true" [pageLinks]="10" (onLazyLoad)="filterTrackList($event)"\n            [responsive]="true" [rowsPerPageOptions]="[10,25,50]">\n                        <p-column>\n\n              <template let-col let-track="rowData" pTemplate="body">\n              <p-checkbox name="tracks" [value]="track" [(ngModel)]="tracksSelected"></p-checkbox>\n\n            </template>\n\n            </p-column>\n                        <p-column header="Actions" [style]="{\'width\': \'50px\'}">\n\n              <template let-col let-track="rowData" pTemplate="body">\n              <div class="text-left" *ngIf="track.status == \'published\'">\n                <i class="fa fa-play-circle bigger text-link" (click)="togglePlayPause(track)" *ngIf="(trackCurrentlyLoaded._id == track._id && !isPlayerPlaying) || trackCurrentlyLoaded._id != track._id"></i>\n                <i class="fa fa-pause-circle bigger text-link" (click)="togglePlayPause(track)" *ngIf="(trackCurrentlyLoaded._id == track._id && isPlayerPlaying)" ></i>\n              </div>\n            </template>\n            </p-column>\n\n\n\n            <p-column *ngIf="isTrackColumnSelected(\'added\')" field="publishDate" [sortable]="true" header="Added">\n              <template let-col let-track="rowData" pTemplate="body">\n              <span *ngIf="track.publishDate">{{ track[col.field] | date: \'MM/dd/y\' }}</span>\n              <span *ngIf="!track.publishDate">{{ track.createdAt | date: \'MM/dd/y\' }}</span>\n            </template>\n            </p-column>\n\n            <p-column *ngIf="isTrackColumnSelected(\'artist\')" field="artistPrimaryName" [sortable]="true" header="Artist" [style]="{\'width\': trackColumnWidths.artist + \'%\', \'text-align\' : \'left\' } ">\n\n              <template let-col let-track="rowData" pTemplate="body">\n              {{ track[col.field] || track.artistText }}<br/><span *ngIf="track.artistsFeaturedDisplayName || track.artistsFeaturedText" class="version-subtitle">{{ track.artistsFeaturedDisplayName || track.artistsFeaturedText }}</span>\n            </template>\n            </p-column>\n            <p-column *ngIf="isTrackColumnSelected(\'bpm\')" field="startBpm" [sortable]="true" header="BPM" [style]="{\'width\': trackColumnWidths.bpm + \'%\' } ">\n            </p-column>\n            <p-column *ngIf="isTrackColumnSelected(\'key\')" [sortable]="true" header="Key" [style]="{\'width\': trackColumnWidths.key + \'%\' } ">\n              <template let-col let-track="rowData" pTemplate="body">\n              <span *ngIf="track.inKey && track.inKey.camelotKey && track.inKey.musicKey">{{track.inKey?.camelotKey}}<br/>{{track.inKey?.musicKey}}</span><span *ngIf="!track.inKey || !track.inKey.camelotKey || !track.inKey.musicKey">N/A</span>\n            </template>\n\n            </p-column>\n            <p-column field="name" header="Title" [sortable]="true" [style]="{\'width\': trackColumnWidths.title + \'%\', \'text-align\' : \'left\' } ">\n              <template let-col let-track="rowData" pTemplate="body">\n              {{ track[col.field] }}<br/><span class="version-subtitle">{{ track.version }}</span>\n            </template>\n            </p-column>\n            <p-column *ngIf="isTrackColumnSelected(\'tags\')" header="Tags" [style]="{\'width\': trackColumnWidths.tags + \'%\' } ">\n\n              <template let-col let-track="rowData" pTemplate="body">\n              \n              <p class="tag-item" *ngIf="track.cleanDirty" [style.color]="track.cleanDirty.color">{{track.cleanDirty.name}}</p>\n              <p class="tag-item" *ngIf="track.versionType" [style.color]="track.versionType.color">{{track.versionType.name}}</p>\n              <p class="tag-item" *ngIf="track.introType" [style.color]="track.introType.color">{{track.introType.name}}</p>\n              <p class="tag-item" *ngIf="track.outroType" [style.color]="track.outroType.color">{{track.outroType.name}}</p>\n              \n            </template>\n\n            </p-column>\n            <p-column *ngIf="isTrackColumnSelected(\'genres\')" header="Genres" [style]="{\'width\': trackColumnWidths.genres + \'%\' } ">\n\n              <template let-col let-track="rowData" pTemplate="body">\n              <p class="well tag-item" *ngFor="let genre of track.genres">{{genre.name}}</p>\n            </template>\n\n            </p-column>\n\n            <p-column *ngIf="isTrackColumnSelected(\'year\')"  field="releaseYear" [sortable]="true" header="Year">\n            </p-column>\n\n            <p-column *ngIf="isTrackColumnSelected(\'downloadCountForPeriod\') || !loadedCollection._id"  field="downloadCountForPeriod" [sortable]="true"  header="DLs">\n            </p-column>\n\n            <p-column *ngIf="isTrackColumnSelected(\'time\')"  field="trackLength" [sortable]="true" header="Time">\n              <template let-col let-track="rowData" pTemplate="body">\n              \n              {{ track.trackLength | secondsToTime }}\n              \n            </template>\n            </p-column>\n            <p-column field="status" [sortable]="true" header="Status"></p-column>\n            <p-column expander="true" styleClass="col-icon" [style]="{\'width\' : \'25px\', \'text-align\':\'center\' }"></p-column>\n\n            <template let-track pTemplate="rowexpansion">\n            <div class="row">\n              <div class="col-md-12">\n                <p class="text-left" *ngIf="track.description"><strong>Description</strong></p>\n                <p class="text-left">{{track.description}}</p>\n              </div>\n              <div class="col-md-6" *ngIf="track.tracksInSameReleases && track.tracksInSameReleases.length > 0">\n                                  <p class="text-left"><strong>You Also Get</strong></p>\n\n                    <div class="text-left" *ngFor="let affiliatedTrack of track.tracksInSameReleases">\n                      <p>{{affiliatedTrack?.formattedName}}                 \n                      <i class="fa fa-play-circle bigger text-link" (click)="togglePlayPause(affiliatedTrack)" *ngIf="(trackCurrentlyLoaded._id == affiliatedTrack?._id && !isPlayerPlaying) || trackCurrentlyLoaded._id != affiliatedTrack?._id"></i>\n                      <i class="fa fa-pause-circle bigger text-link" (click)="togglePlayPause(affiliatedTrack)" *ngIf="(trackCurrentlyLoaded._id == affiliatedTrack?._id && isPlayerPlaying)" ></i>                \n</p>\n                </div>\n                    \n                \n                \n              </div>\n              <div class="col-md-6">\n                <p class="text-left"><strong>Original Works Included In This Edit Are</strong></p>\n                <p class="text-left" *ngFor="let originalWork of track.originalWorks">\n                  {{originalWork.displayName}}\n                </p>\n              </div>\n              <div class="col-md-6">\n                &nbsp;\n              </div>\n            </div>\n          </template>\n\n          </p-dataTable>\n        </div>\n      </div>\n      <!--<p-contextMenu #cm [model]="contextMenuItemsForTableColumns"></p-contextMenu>-->\n\n    </div>\n  </div>'},1587:function(e,t){e.exports='<div class="page-uploader" *ngIf="authService.authResponse.profileData.currencies.length == 0">\n  <p>You do not have access to upload to any store. Please contact <a href="mailto:store@crooklynclan.net">store@crooklynclan.net</a> for further details.</p>\n</div>\n<div class="page-uploader" *ngIf="authService.authResponse.profileData.currencies.length > 0">\n\n  <p-accordion>\n    <p-accordionTab header="Uploader Dropzone" [selected]="true">\n      <div class="row uploader-controller">\n        <div class="col-md-3">\n                <store-selector [editorUploader]="true"></store-selector>\n        </div>\n        <div class="col-md-9 dropzone-container">\n          <div ng2FileDrop id="dropzone" #bigDropzone [uploader]="selectedUploader" (fileOver)="triggerFileOverStateFileUploader($event, bigDropzone)">DROPZONE</div>\n\n        </div>\n      </div>\n    </p-accordionTab>\n  </p-accordion>\n\n  <div class="row">\n    <div class="col-md-12">\n      <tabset [justified]="true" *ngIf="selectedCurrencyId" class="uploader-tabs">\n                        <tab (click)="adjustTableHeight()" (select)="activeList=\'draftMigratedTracks\'" customClass="tab-heading-justify-spacing" *ngIf="uploadService.draftMigratedTracks?.results?.length > 0">\n          <template tabHeading>\n            <span><i class="glyphicon glyphicon-bell"></i> v1 Migrated <span class="tag tag-warning">{{uploadService.draftMigratedTracks.results.length}}</span></span>\n          </template>\n          <p-dataTable #migrationTrackTable scrollable="true" [value]="uploadService.draftMigratedTracks.results" [rows]="50" [paginator]="true"\n            [totalRecords]="uploadService.draftMigrationTrackList.total">\n            <p-column header="Track" styleClass="text-left" field="name"></p-column>\n                        <p-column header="v1 Product ID" styleClass="text-left" field="crooklynClanv1ProductID"></p-column>\n                <p-column styleClass="text-right" [style]="{\'width\':\'20%\'}">\n                  <template let-col let-track="rowData" pTemplate="body">\n\n                <div *ngIf="track._id">\n                      <i class="fa fa-play-circle bigger text-link" (click)="togglePlayPause(track)" *ngIf="(trackCurrentlyLoaded._id == track._id && !isPlayerPlaying) || trackCurrentlyLoaded._id != track._id"></i>\n                      <i class="fa fa-pause-circle bigger text-link" (click)="togglePlayPause(track)" *ngIf="(trackCurrentlyLoaded._id == track._id && isPlayerPlaying)" ></i>\n                      <i class="fa fa-pencil" title="Edit track" (click)="showTrackEditor(track)"></i>\n                </div>\n                </template>\n                </p-column>\n          </p-dataTable>\n\n          <p *ngIf="uploadService.draftMigratedTracks.results.length == 0">No tracks prepared for migration.</p>\n        </tab>\n        <tab (click)="adjustTableHeight()" customClass="tab-heading-justify-spacing">\n          <template tabHeading>\n            <span><i class="glyphicon glyphicon-bell"></i> Rejected <span class="tag tag-danger">{{uploadService.rejectedTracks.results.length}}</span></span>\n          </template>\n          <p-dataTable #dataTable *ngIf="uploadService.rejectedTracks.results.length > 0" scrollable="true" [value]="uploadService.rejectedTracks.results">\n            <p-column header="Track Filename" styleClass="text-left" field="originalFileName"></p-column>\n            <p-column header="Reason" styleClass="text-center" field="message">\n              <template let-col let-track="rowData" pTemplate="body">\n                {{ track[col.field]?.title }}\n              </template>\n            </p-column>\n          </p-dataTable>\n\n          <p *ngIf="uploadService.rejectedTracks.results.length == 0">No tracks have been rejected.</p>\n        </tab>\n        <tab [active]="true" (click)="uploadService.activeTrackList = \'needsEditing\'" (select)="activeList=\'tracksNotReadyToPublish\'" (click)="adjustTableHeight()" customClass="tab-heading-justify-spacing">\n          <template tabHeading>\n            <span><i class="glyphicon glyphicon-bell"></i> Needs Editing <span class="tag tag-warning">{{ uploadService.tracksNotReadyToPublish.results | listLength }}</span></span>\n          </template>\n\n          <p-dataTable #readyTracksTable *ngIf="lengthCounter(uploadService.tracksNotReadyToPublish.results) > 0" scrollable="true" resizableColumns="true" [value]="uploadService.tracksNotReadyToPublish.results">\n\n            <p-column header="Track Filename" styleClass="text-left" [sortable]="true" field="originalFileName">\n              <template let-col let-track="rowData" pTemplate="body">\n                {{ track?.originalFileName || track?.file?.name }}\n              </template>\n            </p-column>\n\n            <p-column header="Track Title" styleClass="text-center" field="name" [sortable]="true">\n              <template let-col let-track="rowData" pTemplate="body">\n                {{ track?.name || \'(not set)\' }}\n              </template>\n            </p-column>\n\n            <p-column header="Actions" styleClass="text-right">\n\n              <template let-col let-track="rowData" pTemplate="body">\n                <div *ngIf="track.isUploading || (!track.draftTrackUploadedToS3 && track._id)">\n                  <div class="progress" style="margin-bottom: 0;">\n                    <span class="status-message" *ngIf="track.actualProgress < 100">{{track.actualProgress}}%</span>\n                    <span class="status-message" *ngIf="track.actualProgress == 100 || (!track.draftTrackUploadedToS3 && track._id)">Processing...</span>\n\n                    <div class="progress-bar text-center" role="progressbar" [ngStyle]="{ \'width\': track.actualProgress + \'%\' }">\n                    </div>\n                  </div>\n                </div>\n                <div *ngIf="track._id && track.draftTrackUploadedToS3">\n                      <i class="fa fa-play-circle bigger text-link" (click)="togglePlayPause(track)" *ngIf="(trackCurrentlyLoaded._id == track._id && !isPlayerPlaying) || trackCurrentlyLoaded._id != track._id"></i>\n                      <i class="fa fa-pause-circle bigger text-link" (click)="togglePlayPause(track)" *ngIf="(trackCurrentlyLoaded._id == track._id && isPlayerPlaying)" ></i>\n                  <i class="fa fa-pencil" title="Edit track" (click)="showTrackEditor(track)"></i>\n                  <i class="fa fa-trash" title="Remove track" (click)="removeTrack(track)"></i>\n                </div>\n\n              </template>\n            </p-column>\n          </p-dataTable>\n\n          <p *ngIf="lengthCounter(uploadService.tracksNotReadyToPublish.results) == 0">No tracks are in need of editing.</p>\n        </tab>\n        <tab (click)="uploadService.activeTrackList = \'approved\'" (select)="activeList=\'tracksReadyToPublish\'" (click)="adjustTableHeight()" customClass="tab-heading-justify-spacing">\n          <template tabHeading>\n            <span>\n              <i class="glyphicon glyphicon-bell"></i> Publish Tracks & ZIPs <span class="tag tag-success">{{ uploadService.tracksReadyToPublishCount }}</span>\n            </span>\n          </template>\n          <div class="publish-tracks-and-zips">\n          <div class="row">\n\n            <div class="col-md-6 text-left">\n              <button class="btn btn-primary" (click)="selectAllTracks()">Select All</button>\n              <button class="btn btn-primary" [disabled]="tracksToSubmit.length == 0" (click)="unselectAllTracks()">Unselect All</button>\n              <button class="btn btn-primary" (click)="createRelease()" [disabled]="tracksToSubmit.length == 0">Create Release From Selected</button>\n\n            </div>\n\n            <div class="col-md-6 text-right">\n\n              <!-- button (click)="submitAllApprovedTracksAndReleases()" class="btn btn-success" [disabled]="isSubmitAllInProgress || !tracksAndReleasesReady">Submit All</button -->\n              <button (click)="submitSelectedApprovedTracksAndReleases()" [disabled]="publishButtonDisabled" class="btn btn-success" [disabled]="tracksToSubmit.length == 0 && releasesToSubmit.length == 0">Submit Selected</button>\n\n            </div>\n          </div>\n          <div class="row tables-container">\n            <div class="col-md-6">\n              <p-dataTable #dataTable scrollable="true" [value]="uploadService.tracksReadyToPublish.results" sortMode="multiple">\n                <p-column [style]="{\'width\':\'5%\'}" styleClass="text-center track-checkbox">\n                  <template let-col let-track="rowData" pTemplate="body">\n\n                        <p-checkbox name="tracks" [value]="track" [(ngModel)]="tracksToSubmit"></p-checkbox>\n                        </template>\n                </p-column>\n                <p-column header="Tracks Ready to Publish" [sortable]="true" field="formattedName" styleClass="text-left" [style]="{\'width\':\'75%\'}">\n                  <template let-col let-track="rowData" pTemplate type="body">\n                    <div class="text-left track-information">\n                      <span>{{track.formattedName}}</span>&nbsp;&nbsp;&nbsp;<small *ngIf="track.crooklynClanv1AutoMigrated" class="tag tag-warning text-dark">Migration Only <i class="fa fa-question-circle-o tooltip-indicator" tooltipster="This track was migrated from Crooklyn Clan v1. It cannot be added to any new releases and is only published for the purposes of being listed on this version of Crooklyn Clan. It will not be republished on v1."\n                    tooltipsterPosition="top" tooltipsterEvent="click"></i></small>\n                    </div>\n                  </template>\n                </p-column>\n                <p-column styleClass="text-right" [style]="{\'width\':\'20%\'}">\n                  <template let-col let-track="rowData" pTemplate="body">\n                      <i class="fa fa-play-circle bigger text-link"  *ngIf="(trackCurrentlyLoaded._id == track._id && !isPlayerPlaying) || trackCurrentlyLoaded._id != track._id" (click)="togglePlayPause(track)"></i>\n                      <i class="fa fa-pause-circle bigger text-link"  *ngIf="(trackCurrentlyLoaded._id == track._id && isPlayerPlaying)" (click)="togglePlayPause(track)"></i>\n                      <i class="fa fa-pencil" *ngIf="!track.isSubmitting" (click)="showTrackEditor(track)"></i>\n                      <i class="fa fa-trash" *ngIf="!track.crooklynClanv1AutoMigrated" title="Remove track" (click)="removeTrack(track)"></i>\n\n                      <!--i class="fa fa-arrows fa-2x" pDraggable="addtrackstorelease" (onDragStart)="dragTrackToReleaseStart($event,track)" (onDragEnd)="dragTrackToReleaseEnd($event)"></i -->\n\n                  </template>\n                </p-column>\n              </p-dataTable>\n\n            </div>\n            <div class="col-md-6">\n\n              <p-dataTable #releasesDataTable [value]="releases.draftList" scrollable="true" [expandedRows]="expandedRows" expandableRows="true" emptyMessage="No releases have been created yet.">\n                <p-column expander="true" styleClass="col-icon" [style]="{\'width\':\'4%\'}"></p-column>\n                <p-column styleClass="text-center" [style]="{\'width\':\'96%\'}" field="name" header="Releases" [sortable]="true">\n                  <template let-release="rowData" pTemplate="body">\n                    <div class="row">\n                      <div class="col-md-12 justify-spacing">\n\n                        <div class="left">\n                          <p-checkbox [disabled]="!release?.validation?.isReleaseValid" name="releases" [value]="release" class="text-left select-checkbox" [(ngModel)]="releasesToSubmit"></p-checkbox>\n                          <span class="tag tag-link">{{ release?.tracks.length }}</span>\n                          <button class="btn add-tracks-to-release" [ngClass]="{\'btn-success\': tracksToSubmit.length > 0,\n                          \'tag-link\': tracksToSubmit.length == 0 }" [disabled]="tracksToSubmit.length == 0" title="Add selected tracks to this release" (click)="addSelectedTracksToRelease(release)">+ {{ tracksToSubmit.length }}</button>\n\n                        </div>\n\n                        <div class="center">\n                          <span>{{release?.name}}</span>\n                        </div>\n\n                        <div class="right">\n                          <i class="fa fa-pencil" *ngIf="!release?.isSubmitting" (click)="showReleaseEditor(release)"></i>\n                          <i class="fa fa-trash " title="Remove release" (click)="removeRelease(release)"></i>\n                        </div>\n\n                      </div>\n                    </div>\n                  </template>\n                </p-column>\n\n                <template let-release pTemplate="rowexpansion">\n                  <!--div class="well dropzone" pDroppable="addtrackstorelease" #dropzoneReleaseContainer (onDrop)="dropTrackInRelease($event, release)" (onDragOver)="triggerFileOverStateReleaseEditor(true,dropzoneReleaseContainer)" (onDragLeave)="triggerFileOverStateReleaseEditor(false,dropzoneReleaseContainer)" (onDragEnter)="triggerFileOverStateReleaseEditor(true,dropzoneReleaseContainer)">\n                    DROP TRACKS HERE\n                  </div-->\n                  <div class="row" *ngFor="let track of release.tracks">\n                    <div class="col-md-8 text-left">{{ track.name }}</div>\n                    <div class="col-md-4 text-right">\n                      <i class="fa fa-play-circle bigger text-link"  *ngIf="(trackCurrentlyLoaded._id == track._id && !isPlayerPlaying) || trackCurrentlyLoaded._id != track._id" (click)="togglePlayPause(track)"></i>\n                      <i class="fa fa-pause-circle bigger text-link"  *ngIf="(trackCurrentlyLoaded._id == track._id && isPlayerPlaying)" (click)="togglePlayPause(track)"></i>\n                      <i class="fa fa-trash bigger" title="Remove track" (click)="removeTrackFromRelease(track, release)"></i>\n                    </div>\n                  </div>\n                </template>\n              </p-dataTable>\n\n            </div>\n          </div>\n          <div class="row" *ngIf="lengthCounter(uploadService.tracksReadyToPublish.results) == 0 && releases.draftList.length == 0">\n            <div class="col-md-12">\n              There are no tracks and/or releases to submit.\n            </div>\n          </div>\n                    </div>\n\n        </tab>\n\n      </tabset>\n    </div>\n  </div>\n</div>\n<track-editor></track-editor>\n<release-editor></release-editor>\n';
},1588:function(e,t){e.exports='<iframe src="https://v2-docs.crooklynclan.net"></iframe>'},1589:function(e,t){e.exports="<router-outlet></router-outlet>"}});